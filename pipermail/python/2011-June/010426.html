<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/python/2011-June/010426.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:17:51 GMT -->
<HEAD>
   <TITLE> [python] hash objektu, kontrola aktuálnosti dat v databázi
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20%3D%3Fiso-8859-1%3Fq%3Fhash_objektu%3D2C_kontrola_aktu%3DE1lnosti_da%3F%3D%0A%09%3D%3Fiso-8859-1%3Fq%3Ft_v_datab%3DE1zi%3F%3D&In-Reply-To=%3CBANLkTinR3f0DmcQcZf6J5arUQCqHoqo1NA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/python/2011-June/010425.html">
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/python/2011-June/010427.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[python] hash objektu, kontrola aktuálnosti dat v databázi</H1>
    <B>Martin Stiborský</B> 
    <A HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20%3D%3Fiso-8859-1%3Fq%3Fhash_objektu%3D2C_kontrola_aktu%3DE1lnosti_da%3F%3D%0A%09%3D%3Fiso-8859-1%3Fq%3Ft_v_datab%3DE1zi%3F%3D&In-Reply-To=%3CBANLkTinR3f0DmcQcZf6J5arUQCqHoqo1NA%40mail.gmail.com%3E"
       TITLE="[python] hash objektu, kontrola aktuálnosti dat v databázi">martin.stiborsky na gmail.com
       </A><BR>
    <I>Sobota Èerven 18 23:13:37 CEST 2011</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2011-June/010425.html">[python] Career opportunity inside
</A></li>
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2011-June/010427.html">[python] hash objektu, kontrola aktuálnosti dat v databázi
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2011-June/date.html#10426">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2011-June/thread.html#10426">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2011-June/subject.html#10426">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2011-June/author.html#10426">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ahoj,
mám takovou situaci, kdy parsuju rùzný obsah z webu a ukládám si ho do databáze.
Problém je, ¾e potøebuji kontrolovat jestli jsou data u mì aktuální
oproti tìm na netu, pokud ne, tak je updatovat.
Nápad jsem mìl takový, ¾e parser otevøe stránku, vyzobe data která
chci, ty se hned sypou do objektù modelu (django) a vkládají do
seznamu, spoèítal bych si hash tohoto seznamu (built-in hash()), hash
si nìkam poznaèil a ulo¾il data. Pøi dal¹ím checku (bude se opakovat
co 2 hodiny) se stránka znovu zparsuje, znovu se data nacpu do seznamu
a spoèítá se hash, pokud bude jiný, updatuje se, pokud ne, data se
zahodí a jedeme dál. Co¾ asi moc fungovat nebude, viz dále...

Moc se mi nelíbí, ¾e pøi ka¾dém prùchodu se bude znovu parsovat, ale
není to na¹tìstí nijak slo¾ité nebo nároèné. Parsovat bych mo¾ná ani
nemusel, mohl bych spoèítat hash komplet celé stránky, ale myslím si,
¾e se tam spí¹ zmìní nìco jiného, ne¾ to po èem jdu a to by dìlalo
bordel a dal¹í zbyteènou práci s updatováním dat, která se ani
nemusela zmìnit, proto bych radìji hlídal checksum rovnou dat po
kterých jdu.

Dále, je na toto vhodná interní hash() funkce? Nejsem si v tomto úplnì
jistý, nic takového jsem je¹tì neøe¹il. Co jsem tak zkou¹el, tak hash
dvou instancí stejné tøídy je v¾dycky jiný, nevím podle èeho pøesnì se
ten hash poèítá, ale já asi budu muset udìlat hash z kompletního
&quot;textu&quot; který ze stránky vytáhnu, co¾ se mi trochu komplikuje, proto¾e
na jednu parsovanou stránku vytáhnu tøeba 15 rùzných &quot;objektù&quot; které
se pak ulo¾í jako záznamy v databázi, tak nevím jestli je dobré z nich
nasekat jeden velký string...

Napadá vás jiný/lep¹í zpùsob?

Dìkuji mnohokrát za rady.


-- 
S pozdravem
Martin Stiborský

Jabber: <A HREF="http://www.py.cz/mailman/listinfo/python">stibi na njs.netlab.cz</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2011-June/010425.html">[python] Career opportunity inside
</A></li>
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2011-June/010427.html">[python] hash objektu, kontrola aktuálnosti dat v databázi
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2011-June/date.html#10426">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2011-June/thread.html#10426">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2011-June/subject.html#10426">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2011-June/author.html#10426">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/python">Dal¹í informace o konferenci Python</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/python/2011-June/010426.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:17:51 GMT -->
</html>
