<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/python/2005-April/002563.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:27:41 GMT -->
<HEAD>
   <TITLE> [python] cestina a python
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:python%40py.cz?Subject=%5Bpython%5D%20cestina%20a%20python&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/python/2005-April/002561.html">
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/python/2005-April/002564.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[python] cestina a python</H1>
    <B>Petr Prikryl</B> 
    <A HREF="mailto:python%40py.cz?Subject=%5Bpython%5D%20cestina%20a%20python&In-Reply-To="
       TITLE="[python] cestina a python">Prikryl na skil.cz
       </A><BR>
    <I>Pátek Duben 15 08:53:09 CEST 2005</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2005-April/002561.html">[python] cestina a python
</A></li>
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2005-April/002564.html">[python] èajírna u Pythona
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2005-April/date.html#2563">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2005-April/thread.html#2563">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2005-April/subject.html#2563">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2005-April/author.html#2563">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ivo ©tolpa napsal
&gt;<i> Nevím, jestli je to ono, proto¾e já to je¹tì 
</I>&gt;<i> nepotøeboval, ale v dokumentaci se pí¹e 
</I>&gt;<i> o raw-unicode-escape. Tedy místo u&quot;text&quot; se pí¹e 
</I>&gt;<i> ur&quot;text&quot;. A taky to prý jde pøekódovávat nìco 
</I>&gt;<i> jako t = s.encode('raw-unicode-escape') nebo
</I>&gt;<i> t = s.encode('unicode-escape'). 
</I>
Asi to s tím nemá nic spoleèného. Slovo &quot;raw&quot;
znamená &quot;surový&quot;, &quot;nezpracovaný&quot;. Identifikátor
raw_input() znamená, ¾e se zadaný vstup nijak 
nezpracovává (nepøevádí se napøíklad na èíslo,
jako je tomu u input()). Pojem &quot;raw string&quot;
vyjadøuje skuteènost, ¾e se se zapsaným obsahem
nic nedìlá. Konkrétnì to znamená, ¾e se 
neinterpretují sekvence pro vlo¾ení koncù øádkù
tabulátorù a dal¹í, které se bì¾nì zapisují 
&quot;\t\n\a...&quot;.

Raw stringy se pou¾ívají i v neunicodových
øetìzcích. Zmínìná poznámka souvisí s tím,
¾e i pøi zápisu unicode øetìzù mohu pøedepsat,
¾e se nemají interpretovat takzvané escape 
sekvence. To znamená, ¾e napøíklad sekvence 
&quot;\t&quot; není nahrazena znakem s ordinální hodnotou 9,
ale zùstane pøítomna jako dvojice znakù &quot;\&quot; a &quot;t&quot;.

Speciální znaèky pøi zápisu øetìzce (jako je u a r
pøed úvozovkami) øíkají jen to, co se má udìlat
pøi pøevodu zdrojového textu do pamì»ové reprezentace.
Buï vznikne posloupnost bajtù, které lze chápat
jako øetìzec v pøedem dohodnutém kódování, nebo 
vznikne unicode øetìzec. Zpìtnì se u¾ nedá zjistit,
zda bylo pøedepsáno &quot;raw&quot;.

Zpìt k uvedenému problému s èe¹tinou. Pøíklad mù¾u
pøepsat i bez unicode a provádìt konverzi sám:

# -*- coding: cp1250 -*-
import sys
s = u'pøí¹ernì ¾lu»ouèký kùò úpìl ïábelské ódy'
print s.encode('cp852') 
sys.stdout.write(s.encode('cp852') + '\n')
val = raw_input(s.encode('cp852'))

Pokud v tomto pøípadì spou¹tím skript v dosovém
oknì èeských Windows, pak se unicode konvertuje
do kódování 852 a v¹e je v poøádku. Problém spoèívá
v tom, ¾e se takhle obtí¾nì pí¹e pøenositelný
program v tom smyslu, aby korektnì vypisoval èeské
texty v konzolovém pod Linuxem, v konzolovém oknì
pod Windows, v jiném GUI oknì, které mù¾e (typicky
ve Windows) pou¾ívat jiné kódování, atd.

V návrhu Python 3.0 (viz 
<A HREF="http://www.python.org/peps/pep-3000.html">http://www.python.org/peps/pep-3000.html</A>) se øíká,
¾e øetìzce budou pou¾ívat výhradnì unicode. Pro 
posloupnost bajtù bude zaveden nový typ bytes().

Pokud v souèasném Pythonu nepou¾íváme zápis
u'text', pak vlastnì do vnitøní reprezentace
ukládáme posloupnost bajtù, ani¾ by byla zachycena
informace o pou¾itém kódování. Za bìhu u¾ se to
pak nedá zjistit. Musíme to _vìdìt_ a podle potøeby
provádìt pøípadné konverze. Dìlá se to obtí¾nì
zvlá¹tì tehdy, kdy¾ pou¾íváme rùzné moduly
a nemáme v¹e pod vlastní kontrolou. Proto je dùle¾ité,
aby v¹e unicodové v Pythonu fungovalo.

Petr

P.S. V bug listu jsem uvedené chybì zvý¹il prioritu,
viz [ 1099364 ] raw_input() displays wrong unicode prompt

<A HREF="https://sourceforge.net/tracker/index.php?func=detail&amp;aid=1099364&amp;group_id=5470&amp;atid=105470">https://sourceforge.net/tracker/index.php?func=detail&amp;aid=1099364&amp;group_id=5470&amp;atid=105470</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2005-April/002561.html">[python] cestina a python
</A></li>
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2005-April/002564.html">[python] èajírna u Pythona
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2005-April/date.html#2563">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2005-April/thread.html#2563">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2005-April/subject.html#2563">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2005-April/author.html#2563">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/python">Dal¹í informace o konferenci Python</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/python/2005-April/002563.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:27:41 GMT -->
</html>
