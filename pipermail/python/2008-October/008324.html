<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/python/2008-October/008324.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:20:19 GMT -->
<HEAD>
   <TITLE> [python] Twitter klient- návrh aplikace - diskuze k teoretickému øe¹ení.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20%3D%3Fiso-8859-2%3Fq%3FTwitter_klient-_n%3DE1vrh_aplikace_-_diskuz%3F%3D%0A%09%3D%3Fiso-8859-2%3Fq%3Fe_k_teoretick%3DE9mu_%3DF8e%3DB9en%3DED%3D2E%3F%3D&In-Reply-To=%3Cd2219e620810240621x2bd192f4s75500af133cf6b52%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/python/2008-October/008329.html">
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/python/2008-October/008325.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[python] Twitter klient- návrh aplikace - diskuze k teoretickému øe¹ení.</H1>
    <B>Martin Stiborský</B> 
    <A HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20%3D%3Fiso-8859-2%3Fq%3FTwitter_klient-_n%3DE1vrh_aplikace_-_diskuz%3F%3D%0A%09%3D%3Fiso-8859-2%3Fq%3Fe_k_teoretick%3DE9mu_%3DF8e%3DB9en%3DED%3D2E%3F%3D&In-Reply-To=%3Cd2219e620810240621x2bd192f4s75500af133cf6b52%40mail.gmail.com%3E"
       TITLE="[python] Twitter klient- návrh aplikace - diskuze k teoretickému øe¹ení.">martin.stiborsky na gmail.com
       </A><BR>
    <I>Pátek Øíjen 24 15:21:34 CEST 2008</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2008-October/008329.html">[python] SQLObject - úprava parametr? p?i vytvá?ení t?ídy
</A></li>
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2008-October/008325.html">[python]  Pøekreslení os v matplotlib
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2008-October/date.html#8324">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2008-October/thread.html#8324">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2008-October/subject.html#8324">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2008-October/author.html#8324">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Zdravím, nevím pokud nìkdo pou¾íváte Twitter, pokud ne, nejspí¹ tu¹ítì
na co to je (vlastnì na nic, ale to je jedno :))
Vadí mi na nìm jedna vìc, kdy¾ nav¹tívím svùj úèet tøeba po pùl dni
kdy jsem na nìj nekoukl, tak dostanu jenom 20 posledních zprávièek a
kvùli tìm star¹ím se musím slo¾itì vracet. Mùj klient by mi ukázal
jenom ty nové od poslední náv¹tìvy a star¹í pouze na vy¾ádní. Málokdy
se potøebuji kouknout na staré tweety, zajímají mì aktuální a ty,
které jsem je¹tì neèetl. Sepsal jsem trochu teorie, jak to realizovat.
Byl bych moc rád za va¹e pøipomnky,

Aplikace se skládá ze dvou èástí.
Démon slou¾í k sbírání dat z twitteru pro jednotlivé registrované úèty.
Klient nasbíraná data zobrazuje a cachuje.

Démon se spou¹tí ka¾dou celou hodinu, to je nejmen¹í mo¾ný interval,
kdy se úèty automaticky zaktualizují = dojde k naètení nových tweetù a
jejich ulo¾ení.

Twitter API uvádí, ¾e pro jeden dotaz, by poèet naètených tweetù nemìl
pøekroèit 200 kouskù, pokud nìjaký úèet má za hodinu více ne¾ 200
zpráv, je to nemilé a asi bude mít smùlu a v jeho timeline kterou mu
má aplikace zobrazí bude mít díru.

Pøi spu¹tìní démona se pøipraví dva seznamy.
V prvním bude seznam úètù, které se zaktualizují v tomto cyklu, v tom
druhém ty, které a¾ dal¹í celou hodinu. Pøi dal¹ím spu¹tìní démona u¾
bude k dispozici seznam pro aktuální refresh, jenom se pøipraví seznam
pro dal¹í cyklus.
Výbìr závisí na nìkolika kritériích.
Po registraci mají v¹echny úèty defaultnì automaticky refresh ka¾dou
celou hodinu, ale podle toho, kolik tweetù se u úètu za hodinu
prùmìrnì naète, se mù¾e interval prodlu¾it. Napøíklad pokud prùmìr
poètu nových tweetù za hodinu poèítaný z 10 automatických refreshù
bude men¹í ne¾ 30, tak se interval prodlou¾í na automatický refresh
ka¾dou druhou hodinu. Tìch 30 jsem jenom støelil, urèit hranici budu
muset za provozu.
Dal¹í vìc, která mù¾e posunout refresh na dal¹í hodinu, je aktualizace
kterou provedl u¾ivatel napøíklad náv¹tìvou svého profilu, tom pøípadì
se naètou nové tweety hned, nové se filtrují pomocí parametru &quot;since&quot;
(z Twitter API) který oèekává datum a èas a vybere v¹echny tweety
star¹í ne¾ zadaný parametr, tento parametr získám z databáze, u
ka¾dého úètu uchovávám datum poslední náv¹tìvy, které se ale bude
upravovat taky kvùli automatickým refreshùm. Pøi u¾ivatelovì refreshi,
se taky úèet vykopne ze seznamu pro aktualizaci v dal¹ím cyklu, pokud
v nìm je.

Pøi naètení tweetù ze serverù Twitteru, se ka¾dý tweet ulo¾í do
databáze, oznaèí se svým id, jak tím twitterovským, tak databázovým.
Budu muset vyøe¹it jak je tøídit mezi timeline jednotlivých
u¾ivatelù... Posledních øeknìme 300 tweetù, se bude cachovat do XML,
samostaný soubor pro ka¾dý úèet, tím budu co nejmíò otravovat svou
databázi a taky to bude pøíjemnìj¹í pro AJAX manipulaci s tweety ve
frontendu aplikace. Pokud by u¾ivatel chtìl kouknout na své tweety
star¹í ne¾ je tìch 300 v XML, dostane je z databáze.

Realizace pomocí python-twitter, sqlite, pylons.
Chci co nejmíò otravovat servery twitteru, koukal jsem ¾e tam jsou
nìjaká omezení na poèet pøipojení a dal¹í vìci, to budu muset je¹tì
prozkoumat, pokud to opravdu dám do kupy, je mi jedno jestli to nìkdo
bude pou¾ívat, mohl bych to udìlat jen pro sebe, ale je zajímavìj¹í
øe¹it jak to zpøístupnit i dal¹ím lidem.

-- 
S pozdravem
Martin Stiborský

Jabber: <A HREF="http://www.py.cz/mailman/listinfo/python">stibi na njs.netlab.cz</A>
ICQ: 224-065-849
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2008-October/008329.html">[python] SQLObject - úprava parametr? p?i vytvá?ení t?ídy
</A></li>
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2008-October/008325.html">[python]  Pøekreslení os v matplotlib
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2008-October/date.html#8324">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2008-October/thread.html#8324">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2008-October/subject.html#8324">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2008-October/author.html#8324">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/python">Dal¹í informace o konferenci Python</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/python/2008-October/008324.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:20:19 GMT -->
</html>
