<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/python/2011-February/010159.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:09 GMT -->
<HEAD>
   <TITLE> [python] Dekorátor
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20%3D%3Fiso-8859-1%3Fq%3FDekor%3DE1tor%3F%3D&In-Reply-To=%3Cbe4227c9-a9ca-4b6d-8085-1a03c33de5a7%40y31g2000prd.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/python/2011-February/010156.html">
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/python/2011-February/010162.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[python] Dekorátor</H1>
    <B>Radek</B> 
    <A HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20%3D%3Fiso-8859-1%3Fq%3FDekor%3DE1tor%3F%3D&In-Reply-To=%3Cbe4227c9-a9ca-4b6d-8085-1a03c33de5a7%40y31g2000prd.googlegroups.com%3E"
       TITLE="[python] Dekorátor">radek.hnilica na gmail.com
       </A><BR>
    <I>Pondìlí Únor 21 23:00:26 CET 2011</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2011-February/010156.html">[python] Dekorátor
</A></li>
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2011-February/010162.html">[python] Dekorátor
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2011-February/date.html#10159">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2011-February/thread.html#10159">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2011-February/subject.html#10159">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2011-February/author.html#10159">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 21 ún, 15:01, Hynek Fabian &lt;<A HREF="http://www.py.cz/mailman/listinfo/python">hynek.fab... na firma.seznam.cz</A>&gt; wrote:
&gt;<i> Radek (Wednesday 16 of February 2011 15:23:07):&gt; nejdøív bych se uvedl, jsem takový opakovaný zaèáteèník,  k Pythonu
</I>&gt;<i> &gt; jsem naposled pøièichl mo¾ná pøed osmi lety a nic moc.  Teï, asi tøi
</I>&gt;<i> &gt; mìsíce zpátky jsem se k nìmu vrátil, proto¾e si hraju s GAE/P.  Pøes
</I>&gt;<i> &gt; v¹echny problémy se zkou¹ím prokousávat, ikdy¾ python bolí,
</I>&gt;<i>
</I>&gt;<i> Nìco dìlá¹ ¹patnì. Kde to bolí?
</I>
To je na takové to domácí popovídání.  Poslední roky jsem psal v Bashi
a nìco v Ruby.  Z objektových systémù beru jako la»ku se kterou
srovnávám právì to Ruby.  Kdy¾ jsem zaèal hledat literaturu a zdroje
ke studiu, øekl jsem si ¾e kdy¾ je spousta textù stylu  &quot;Java pro
céèkaøe&quot;, &quot;Python pro fyziky&quot;.  ®e bych se porozhlédl jestli není nìco
jako Python pro Rubisty.  Bohu¾el nena¹el.  Tak jediným zdrojem je to
co po rùznu najdu.  Sna¾ím se postupnì jednotlivé problémy øe¹it ale
lámání je na dlouho.  Asi bych si mìl psát v¹echny nejasnosti bokem
abych je mìl po ruce, ale takto se spoléhám jen na svou dìravou hlavu.

Co mì opravdu dostalo, a to jsem mìl chu» projít stropem, byla práce s
èasem.  Potøeboval jsem jednoduchou vìc, vzít èasovou/datumovou
informaci od u¾ivatele a udìlat z ní èasový objekt.  Ke své hrùze jsem
zjistil, ¾e to tak nìjak nejde.  Na IRCu se mi podaøilo odchytit
nìjakého programátora, a má hrùza se zaèala stupòovat jak jsem
zji¹»oval ¾a ani nechápe co chcu.  Obyè funkci, nejlépe metodu
èasového objektu, které nacpu øetìzec od u¾ivatele jako string a
dostanu objekt.  Neustále øíkal ¾e pøece nic problém, ¾e to umí metoda
strptime a je to popsáno v dokumentaci.  Opìtovnì po nìkolikáté jsem
velmi peèlivì èetl tu stránku v dokumentaci a nechápal, proto¾e
strptime je na tohle absolutnì nepou¾itelná.  Nakonec jsem objevil na
netu knihovnu která to umí.  Ale strávil jsem dost èasu zji¹»ováním ¾e
èistý python a dodané knihovny jsou v tomhle ohledu pøinejmen¹ím
neúplné.

A to je jen ukázka jednoho z mnoha pøípadù kdy mi dlouhé hodiny,
pøípadnì celé dny trvá najít øe¹ení.

Potøeboval bych nìjakou rozumnou dokumentaci, a nevím kde ji vzít.
Vìt¹ina toho na co se lidi odkazují a co pou¾ívají se mi zdá tak
podivnì strohé  Viz Pythoní dokumentace k datetime.

Èasto kdy¾ nìco pí¹u, tak mám pøedstavu co vlastnì dìlám, jen nevím
jak se to pí¹e v Pythonu.  I chtìl bych tøeba, k danému objaktu, znát
v¹echny metody a vlastnosti co má.  A neumím nikde najít takový
pøehled.  Takový pøehled jako má napøíklad dokumentace k Ruby.
Nakliknout si Modul/Objekt a dostanu metody.  Nakliknu metodu a mám
podrobný popis k èemu ¾e vlastnì slou¾í, jak se jí dávají parametry a
ukázkou nìkolika pou¾ití.

Dal¹í &quot;drobnost&quot; na kterou jsem narazil je join.  Prostì potøebujete z
seznamu který máte, nebo který dr¾íte &quot;uprostøed výpoètu na teèce&quot;
udìlat øetezec.  Nìco jak seznam.join(',').  Tohle je na¹tìstí tak
profláknuté, ¾e u¾ jsem si zapamatoval ¾e v Pythonu je join metoda
toho ',' a ne toho pole.

&gt;<i> &gt; Jen tím ¾e chci aby mìl dekorátor parametry, se tak radikálnì zmìní
</I>&gt;<i> &gt; kód dekorátoru.
</I>&gt;<i> &gt; Potøeboval bych nìjak po lopatì vìdìt, co se uvnitø dìje, proto¾e
</I>&gt;<i> &gt; cítím ¾e ty dekorátory budu urèitì pou¾ívat je¹tì mnohem divoèeji.
</I>&gt;<i>
</I>&gt;<i> Vtip je v tom ¾e se ve skuteènosti kód nijak nemìní. Intuitivní pøedstava ¾e
</I>&gt;<i> parametry v závorkách by mìly být pøedány dekorátoru je jen optický klam.
</I>&gt;<i> Pokud mám dekorátor jménem &quot;spam&quot;
</I>
jj teï u¾ to vim, zaèal jsem si dìlat obrázek o tom jak to funguje a
kdy se co vyhodnocuje a jak to dopadne.

&gt;<i> Osobnì pova¾uji pou¾ití objektù k dekoraci za ne¹»astné. Metoda &quot;uzávìra v
</I>&gt;<i> uzávìøe&quot; sice vypadá zezaèátku dìsivì, ale je aspoò pøímoèará a dá se pochopit
</I>&gt;<i> co se dìje uvnitø. Objekty jen nahradí jednu slo¾itost jinou (kolik lidí chápe
</I>&gt;<i> nuance metod __call__, __new__ a __init__?).
</I>
No jde o to, ¾e jsem nevidìl dost pøíkladù abych si udìlal obrázek.
Jedno z prvních vysvìlení dekorátorù které jsem vidìl pou¾ívalo tøídu
s odùvodnìním ¾e je to mnohem sna¾¹í na pochopení, tak jsem se toho
dr¾el.  Mù¾u zkusit svùj pøípad pøepsat s pou¾ítí tøídy na pou¾ítí
funkce.  Ale nebude to mo¾ná mít ten správný efekt, proto¾e jsem ostrý
okód tak refaktorizoval, ¾e z nìj u¾ moc nezbylo. (Jak jsem zmiòoval,
pùvodnì tam byly dal¹í dvì metody které se volaly).  Dal¹í vìc je, ¾e
mám nìkde v hlavì ¹pendílèek zara¾ený k dekorátoru ¾e bych mohl vyu¾ít
dìdiènost pøi tvorbì rùzných druhù authorizaèních dekorátorù.  Jako ¾e
základní princip a pak BasicHTTP, Session, ..... podìdìné z nìj.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2011-February/010156.html">[python] Dekorátor
</A></li>
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2011-February/010162.html">[python] Dekorátor
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2011-February/date.html#10159">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2011-February/thread.html#10159">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2011-February/subject.html#10159">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2011-February/author.html#10159">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/python">Dal¹í informace o konferenci Python</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/python/2011-February/010159.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:09 GMT -->
</html>
