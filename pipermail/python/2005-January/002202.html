<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/python/2005-January/002202.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:27:56 GMT -->
<HEAD>
   <TITLE> [python] globální promìnné
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:python%40py.cz?Subject=%5Bpython%5D%20%3D%3FISO-8859-2%3FQ%3Fglob%3DE1ln%3DED_prom%3DECnn%3DE9%3F%3D&In-Reply-To=mailman.94.1103534370.32358.python%40py.cz">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/python/2005-January/002211.html">
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/python/2005-January/002204.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[python] globální promìnné</H1>
    <B>p.kosina</B> 
    <A HREF="mailto:python%40py.cz?Subject=%5Bpython%5D%20%3D%3FISO-8859-2%3FQ%3Fglob%3DE1ln%3DED_prom%3DECnn%3DE9%3F%3D&In-Reply-To=mailman.94.1103534370.32358.python%40py.cz"
       TITLE="[python] globální promìnné">gen2n na seznam.cz
       </A><BR>
    <I>Pondìlí Leden  3 15:42:16 CET 2005</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2005-January/002211.html">[python] Re: 20 html ---&gt; py.cz
</A></li>
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2005-January/002204.html">[python] globální promìnné
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2005-January/date.html#2202">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2005-January/thread.html#2202">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2005-January/subject.html#2202">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2005-January/author.html#2202">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dìkuji za vyèerpávajjící vysvìtlení.
Nechci vypadat jako Tluèhuba :-), pøesto zkusím je¹tì jednou mùj postoj.

class G:
   pass

g=G()
g.x=30

Mo¾ná nepou¾ívám nejsprávnìj¹í terminologii, kdy¾  nazývám x globální 
promìnnou (ano, je to lokální uvnitø G), nicménì objekt 'g.x' je 
&quot;veøejnì pøístupný&quot;, *ze v¹ech funkcí mìnitelný bez jakýchkoliv dal¹ích 
fíglu v rámci celého programu*, jedná se tedy, podle mne, o mnou 
obhajovanou superglobalni (superglobalni z hlediska celého programu a ne 
jednotlivé tøídy èi instance - z jejich hlediska to je samozøejmì 
lokální) promìnnou. Ale i výraz veøejnì pøístupný je OK, nic to na vìci 
nemìní. Mo¾ná se pletu, mo¾ná existují skulinky, kdy to neplatí, nicménì 
v programu s pár funkcemi a jednou main to funguje.

Uznávám, není to èisté øe¹ení, pøesto mi to pøipadá &quot;èistìj¹í&quot; ne¾ 
pou¾ití global. Také si vlastnì uvìdomuji, ¾e nikdo zde neøíkal, ¾e to 
nefunguje, &quot;jen&quot; ¾e to není globální promìnná.

Kdy¾ ukazujete &quot;zjednodu¹ování&quot; kódu vypou¹tìním funkcí f() i r(), tak 
to nevyjadøuje praxi. V praxi samozøejmì funkce takto jednoduché nejsou 
a nedají se vypustit, proto¾e &quot;nìco dìlají&quot; a veøejnì pøístupné promìnné 
jsou tam jenom pro usnadnìní práce (funkce tam není samoúèelnì, kvùli 
nim), pro zpøehlednìní kódu, pro pøiblí¾ení se práce v OOP. Snad 
klasickým pøípadem je vznik nových promìnných ve funkci, které v¹ak je 
tøeba si uchovat do dal¹ího prùchodu funkcí,kde se s nimi bude opìt 
pracovat.

Já si tedy OOP dost zjednodu¹uji, tøebas kdy¾ se vytváøí nìjaký textový 
editor v OOP, tak vlastnì celý program je jedna velká tøída a uvnitø ní 
jsou její promìnné 'self.x' viditelné ze v¹ech jejích metod. Tomu jsem 
se právì chtìl svým pøístupem pøiblí¾it.


Pavel




Petr Prikryl napsal(a):
&gt;<i> p.kosina napsal...
</I>&gt;<i> 
</I>&gt;&gt;<i>Pøipadá mi to nespravedlivé :-), ¾e u OO se globální
</I>&gt;&gt;<i>promìnné vytváøí naprosto transparentnì self.x=10 v
</I>&gt;&gt;<i>kterékoliv metodì a platnost (vèetnì zmìn) je napøíè celou
</I>&gt;&gt;<i>tøídou a je¹tì je to vydáváno za velké plus.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> V tomto pøípadì nejde ani o globální promìnnou, ani o
</I>&gt;<i> promìnnou platnou v kterékoliv metodì tøídy. Vytváøí se v
</I>&gt;<i> rámci objektu a je platná pouze v rámci objektu (instanci
</I>&gt;<i> tøídy). Na self.x není nic globálního ani magického. Mù¾u si
</I>&gt;<i> to do èe¹tiny pøelo¾it jako &quot;moje vlastní x&quot;, kdy &quot;moje
</I>&gt;<i> vlastní&quot; uva¾ujeme z pohledu objektu samotného.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i>Naproti tomu u nás, u procedurákù, u nás je global, které se
</I>&gt;&gt;<i>v¹ak musí objevovat jednak v ka¾dé funkci zvlá¹», co¾ je
</I>&gt;&gt;<i>velmi netransparentní a je¹tì je to zavr¾eníhodné. Dá se to
</I>&gt;&gt;<i>samozøejmì obcházet, ale transparentnost je v¾dy pøednost.
</I>&gt;&gt;<i>Funkce se dají samozøejmì volat s parametry a také vracet
</I>&gt;&gt;<i>výsledky, ale pokud je argumentù více, program se stává
</I>&gt;&gt;<i>zbyteènì nepøehledným.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Pokud bych chtìl, aby v¹echny promìnné byly globální, dostal
</I>&gt;<i> bych se do poèítaèového pravìku. Programy pouze s globálními
</I>&gt;<i> promìnnými by byly pøi souèasném rozsahu kódu neèitelné a
</I>&gt;<i> neudr¾ovatelné. Proto se ve funkcích v¾dy vytváøí nové
</I>&gt;<i> lokální promìnné. U jazykù, kde se promìnná musí povinnì
</I>&gt;<i> deklarovat (napøíklad Pascal) nìco takového jako klíèové
</I>&gt;<i> slovo &quot;global&quot; nepotøebuji -- lokální promìnná stejného
</I>&gt;<i> jména má v¾dy pøednost. Pokud není definována, bere se
</I>&gt;<i> automaticky promìnná &quot;globálnìj¹í&quot;.
</I>&gt;<i> 
</I>&gt;<i> Pou¾ívání globálních promìnných u slo¾itìj¹ích programù vede
</I>&gt;<i> k vytváøení závislostí, kdy jeden úsek kódu mù¾e neèekaným
</I>&gt;<i> zpùsobem ovlivnit jinak naprosto nesouvisející jiný úsek
</I>&gt;<i> kódu.
</I>&gt;<i> 
</I>&gt;<i> Souhlasím s tím, ¾e ¹patný objektový návrh mù¾e být
</I>&gt;<i> nepøehlednìj¹í, ne¾ dobrý procedurální návrh. Ale dobrý
</I>&gt;<i> objektový návrh bude v¾dy udr¾ovatelnìj¹í a pøehlednìj¹í,
</I>&gt;<i> ne¾ procedurální návrh. Jedinou nevýhodou mù¾e být vytváøení
</I>&gt;<i> více oddìlených èástí s kódem a daty (objektù), které se
</I>&gt;<i> propojují vzájemnými odkazy (tj. zvý¹ení stupnì nepøímosti
</I>&gt;<i> odkazù). Na druhou stranu právì tento rys vynucuje èist¹í
</I>&gt;<i> rozhraní, sni¾uje vzájemné závislosti a usnadòuje budoucí
</I>&gt;<i> údr¾bu. I kdy¾, v¹echno se dá sprasit ;-)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i>Chci uvést jednu z transparentnìj¹í metod (mo¾ná jsem
</I>&gt;&gt;<i>objevil objevené, ale já jsem dosud pou¾íval seznamy nebo to
</I>&gt;&gt;<i>hrozné global):
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>class globalniTrida:
</I>&gt;&gt;<i>   pass
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>def r():
</I>&gt;&gt;<i>   Global.delka=10
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Global=globalniTrida()
</I>&gt;&gt;<i>r()
</I>&gt;&gt;<i>Global.delka=Global.delka+20
</I>&gt;&gt;<i>print Global.delka
</I>&gt;&gt;<i> &gt;&gt;&gt; 30
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Následující pøíklad je významovì naprosto shodný:
</I>&gt;<i> 
</I>&gt;<i> globalni_promenna = 10
</I>&gt;<i> globalni_promenna = globalni_promenna + 20
</I>&gt;<i> print globalni_promenna
</I>&gt;<i> 
</I>&gt;<i> Vý¹e uvedenou tøídou globalniTrida a vytvoøením její
</I>&gt;<i> instance Global se pouze zavede nìco jako prostor jmen.
</I>&gt;<i> Pokud si zavedu svùj modul -- soubor Global.py takto...
</I>&gt;<i> 
</I>&gt;<i> Global.py
</I>&gt;<i> ------------------------------------------------------
</I>&gt;<i> delka = 10
</I>&gt;<i> ------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> .... pak mù¾u ve svém programu psát:
</I>&gt;<i> 
</I>&gt;<i> import Global
</I>&gt;<i> 
</I>&gt;<i> Global.delka = Global.delka + 20
</I>&gt;<i> print Global.delka
</I>&gt;<i> 
</I>&gt;<i> Definice a pou¾ití funkce r() a pou¾ití tøídy do toho nic
</I>&gt;<i> nového nevná¹í. Je to jen krkolomì zapsané vytvoøení
</I>&gt;<i> inicializace promìnné uvnitø existujícího objektu.
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2005-January/002211.html">[python] Re: 20 html ---&gt; py.cz
</A></li>
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2005-January/002204.html">[python] globální promìnné
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2005-January/date.html#2202">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2005-January/thread.html#2202">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2005-January/subject.html#2202">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2005-January/author.html#2202">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/python">Dal¹í informace o konferenci Python</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/python/2005-January/002202.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:27:56 GMT -->
</html>
