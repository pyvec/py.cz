<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/python/2010-March/009576.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:56 GMT -->
<HEAD>
   <TITLE> [python] &quot;list comprehension&quot; -- prozatimni zaver
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20%22list%20comprehension%22%20--%20prozatimni%20zaver&In-Reply-To=%3C7ecc64dada3f4744b756b702ed4dbf78%408d6e27bd5e18464fbc942b77a5cf11c2%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/python/2010-March/009572.html">
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/python/2010-March/009578.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[python] &quot;list comprehension&quot; -- prozatimni zaver</H1>
    <B>Pøikryl Petr</B> 
    <A HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20%22list%20comprehension%22%20--%20prozatimni%20zaver&In-Reply-To=%3C7ecc64dada3f4744b756b702ed4dbf78%408d6e27bd5e18464fbc942b77a5cf11c2%3E"
       TITLE="[python] &quot;list comprehension&quot; -- prozatimni zaver">prikryl na atlas.cz
       </A><BR>
    <I>Pátek Bøezen 26 00:38:15 CET 2010</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-March/009572.html">[python] Dive Into Python 3 - diskuse k pojmum na nic.cz (bylo Re:	Preklad &quot;list comprehension&quot;?)
</A></li>
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-March/009578.html">[python] &quot;list comprehension&quot; -- prozatimni zaver
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2010-March/date.html#9576">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/thread.html#9576">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/subject.html#9576">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/author.html#9576">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Toto je velmi zajímavý pøíspìvek a na jeho
základì jsem dospìl k závìru, který uvádím...
no na závìr. Díky

Jan Bednaøík napsal (rozlámal jsem a doplnil èíslování kvùli odkazùm)
&gt;<i> 
</I>&gt;<i> 1) Rozhodnì nepøekládat. Pøeklad nic neøekne zaèáteèníkovi,
</I>&gt;<i> ale ani nikomu, kdo má s programováním zku¹enosti. 
</I>&gt;<i> 
</I>&gt;<i> &quot;list comprehension&quot; je obecný pojem pou¾ívaný 
</I>&gt;<i> v mnoha programovacích jazycích. 
</I>&gt;<i> Pokud vím, tak neexistuje ¾ádný v¹eobecnì roz¹íøený pøeklad 
</I>&gt;<i> do èe¹tiny. A osobnì se nepamatuji, ¾e bych se setkal 
</I>&gt;<i> s knihou/uèebnicí/skripty, kde by to nìkdo pøekládal.
</I>&gt;<i> 
</I>&gt;<i> 2) Význam pojmu &quot;list comprehension&quot; je natolik specifický, 
</I>&gt;<i> ¾e pøi snaze ho pøelo¾it se v¾dy dostaneme na velmi 
</I>&gt;<i> tenký led. 
</I>&gt;<i> 
</I>&gt;<i> 3) Pou¾ití v¹eobecnì známých pojmù z programovacích 
</I>&gt;<i> jazykù jako &quot;generátor&quot;, &quot;konstruktor&quot;, atp. s sebou 
</I>&gt;<i> ponese matoucí asociace. 
</I>&gt;<i> 
</I>&gt;<i> 4) Napøíklad pod pojmem &quot;generátorový zápis&quot; si spousta 
</I>&gt;<i> lidí pøedstaví &quot;generator expression&quot; a tì¾ko pochopí, 
</I>&gt;<i> ¾e to má mít úplnì jiný význam.
</I>&gt;<i> 
</I>&gt;<i> 5) &quot;list comprehension&quot; je pojem pou¾ívaný 
</I>&gt;<i> v informatice desítky let. To ¾e ho je¹tì nikdo 
</I>&gt;<i> nìjak rozumnì nepøelo¾il do èe¹tiny (tím myslím pøeklad 
</I>&gt;<i> který by se uchytil) asi o nìèem vypovídá. Myslím si, 
</I>&gt;<i> ¾e jakákoliv snaha tento pojem pøelo¾it si vy¾ádá ¹ir¹í 
</I>&gt;<i> akademickou diskusi pøesahující komunitu okolo jazyka 
</I>&gt;<i> Python. Zkusil bych se poptat odborníkù na fakultách 
</I>&gt;<i> informatiky zdej¹ích vysokých ¹kol. Tøeba nìkde 
</I>&gt;<i> vymysleli a pou¾ívají nìjaký rozumný pøeklad.
</I>
=================================================

ad 1) Cílem té knihy mimo jiné je, aby to nìkomu nìco øeklo.
A ten pøeklad se dìlá proto, aby to bylo k dispozici
pro èeské ètenáøe. Chápu, je to trochu paradox ;)

Tak¾e první závìr zní, rozhodnì to nìjak pøelo¾ím.
Originální pojem samozøejmì ponechám v závorce 
a pøidám asi odkaz na <A HREF="http://en.wikipedia.org/wiki/List_comprehension">http://en.wikipedia.org/wiki/List_comprehension</A>

ad 2) Není to zase tak tenký led. Jedna vìc je sna¾it se
pøelo¾it &quot;anglické slovo comprehension&quot; a druhá vìc je sna¾it
se najít odpovídající pojem, který vychází z významu toho
anglického pojmu. Na vý¹e uvedeném odkazu na wikipedii se
dají najít tyto jasné stopy (list comprehension):

 - Je to SYNTAKTICKÁ KONSTRUKCE. Tím odpadají kandidáti
   typu &quot;generovaný seznam&quot; (proto¾e to vyjadøuje spí¹
   dynamický výsledek, ne¾ statický zápis v programu, tj.
   syntaktickou konstrukci.
   
 - Existuje i matematický pojem &quot;set comprehension&quot;, pro který
   existuje ekvivalent &quot;set-builder notation&quot; -- doslova
   notace (zápis) vytváøeèe mno¾in. Je to ono známé (pøíklad)
   
      { x elem N: x &gt; 0 }
      
 - Ty zmínìné jazyky jsou vìt¹inou deklarativní jazyky. 
   Mají svým zpùsobem blí¾ ke klasické matematice, kde 
   &quot;mno¾ina vznikne, obsah splòuje vlastnosti, je&quot;.
   Ale u¾ ono &quot;set-builder&quot; napovídá tomu, ¾e v praktickém
   pøípadì se musí nìjak vybudovat...
   
ad 3) S tím èásteènì souhlasím. Proto se sna¾ím o diskusi.
Proto¾e definice pojmù jsou v¾dy vìcí dohody. Není v tom nic
mechanického. Vstupuje do toho lidský faktor, proto¾e je to 
nástroj pro lidi.

ad 4) Tady si dovolím oponovat. Jestli jste to pochopil
takto, tak mám radost, proto¾e právì takhle to bylo my¹leno.
Ono to toti¾ nemá jiný význam.

Na <A HREF="http://en.wikipedia.org/wiki/List_comprehension">http://en.wikipedia.org/wiki/List_comprehension</A> se øíká,
¾e jde o &quot;syntaktickou konstrukci pro vytvoøení seznamu
z jiného seznamu&quot;. V deklarativních jazycích je to OK.
Ale Python je imperativní jazyk a tahle pøejatá konstrukce
je elegantnì pou¾ita s ¹ir¹í platností. List comprehension
toti¾ umo¾òuje vytvoøit seznam z èehokoliv, pøes co se dá
iterovat (nejen ze seznamu). A ta iterace se dá popsat
výrazem (tedy nejen pøíkazy) a tomu výrazu se øíká 
generátorový výraz. 

Generátorový výraz je zvlá¹tní v tom, ¾e ¹ikovnì kombinuje
deklarativní pøístup s imperativním. Deklarativnì se zapisuje
a jeho mo¾nosti se podobají generátorové funkci (která
má uvnitø yield). 

Vyhodnocením generátorového výrazu nebo zavoláním generátorové
funkce vznikne generátor (generátorový objekt). Postupným 
voláním .next() mù¾eme získat generované hodnoty.

ad 5) [... akademickou diskusi.] Co¾ tímto samozøejmì èiníme.
Ètou to i lidé, kteøí se vìnují výuce.

Postupnì pøejdu k závìru...

List comprehension je syntaktická konstrukce. Jejím úèelem
je popsat vytvoøení seznamu jaksi víc deklarativnì. Proto¾e
jde o syntaktickou konstrukci se specifickým významem, není
pravdìpodobnì implementována pøekladem na obecný generátor,
ale je to udìláno efektivnìji.

Pøesto ale vìcnì mù¾eme List comprehension èistì nahradit
pou¾itím konstruktoru seznamu a do nìj vlo¾eného generátoru,
který mù¾e být definován i generátorovým výrazem. Srovnejte:

&gt;&gt;&gt;<i> lst = [ i*2 for i in range(10) ]
</I>&gt;&gt;&gt;<i> lst
</I>[0, 2, 4, 6, 8, 10, 12, 14, 16, 18]

a generátorovým výrazem

&gt;&gt;&gt;<i> lst = list(i*2 for i in range(10))
</I>&gt;&gt;&gt;<i> lst
</I>[0, 2, 4, 6, 8, 10, 12, 14, 16, 18]

Tak¾e list comprehension je typický &quot;syntactic sugar&quot;, 
který mù¾e být díky tomu, ¾e jde o speciální pøípad
generátoru ponìkud efektivnìji implementován.

A teï &quot;set comprehension&quot; neboli &quot;set-builder NOTATION&quot;:

&gt;&gt;&gt;<i> mn = { i*2 for i in range(10) }
</I>&gt;&gt;&gt;<i> mn
</I>{0, 2, 4, 6, 8, 10, 12, 14, 16, 18}

a generátorovým výrazem

&gt;&gt;&gt;<i> mn = set( i*2 for i in range(10) )
</I>&gt;&gt;&gt;<i> mn
</I>{0, 2, 4, 6, 8, 10, 12, 14, 16, 18}

Schválnì jsem to &quot;set(&quot; a &quot;)&quot; oddìlil mezerou, aby bylo
poznat, jak moc je to syntaktický cukr.

Syntaktický cukr je to rozhodnì u dictionary comprehension,
proto¾e se v nìm kombinuje zpùsob zápisu slovníkového literálu...

    d = { 1: 2, 2: 4, ...}
    
s generátorovým výrazem:

&gt;&gt;&gt;<i> d = { i: 2*i for i in range(10) }
</I>&gt;&gt;&gt;<i> d
</I>{0: 0, 1: 2, 2: 4, 3: 6, 4: 8, 5: 10, 6: 12, 7: 14, 8: 16, 9: 18}

Pøesto to jde snadno (mechanicky) pøepsat:

&gt;&gt;&gt;<i> d = dict( (i, 2*i) for i in range(10) )
</I>&gt;&gt;&gt;<i> d
</I>{0: 0, 1: 2, 2: 4, 3: 6, 4: 8, 5: 10, 6: 12, 7: 14, 8: 16, 9: 18}

A mù¾eme takto vytvoøit i generovanou n-tici (tuple)...
     
&gt;&gt;&gt;<i> t = tuple( i*2 for i in range(10) )
</I>&gt;&gt;&gt;<i> t
</I>(0, 2, 4, 6, 8, 10, 12, 14, 16, 18)

... i kdy¾ &quot;tuple comprehension&quot; Python nedefinuje. Troufám si 
tvrdit, ¾e je tomu tak jen proto, proto¾e zápis

  g = ( i*2 for i in range(10) )
  
byl vyhrazen pro zápis samostatnì uvedeného generátorového 
výrazu. (Tuple je immutable, a proto má syntaktický cukr
pro generovaný obsah men¹í význam ne¾ u seznamu, mno¾iny
a slovníku.)

Závìr
=====

Zhruba uvedenou úvahou jsem døíve dospìl k pojmùm:
   
   generátorový zápis seznamu
   generátorový zápis slovníku
   generátorový zápis mno¾iny
   
Z toho taky pìknì vyplynul pøeklad pojmu &quot;comprehension&quot; 
(neboli ...-builder notation) &quot;generátorový zápis&quot;.

Cítil jsem, ¾e &quot;generátorový zápis&quot; jaksi nemá punc &quot;pojmovitosti&quot;,
proto¾e slovo &quot;zápis&quot; je velmi èeské a hlavnì obecné, snadno 
pøehlédnutelné, neprovokující k uva¾ování, ¾e bychom je mìli
chápat neoddìlitelnì s pøedchozím &quot;generátorový&quot; jako jeden pojem.
U definic na wikipedii mì proto trklo do oka slovo &quot;notace&quot;.
Tak¾e jsem dospìl k následujícímu rozuzlení:

   comprehension = generátorová notace

   list comprehension = generátorová notace seznamu
   set comprehension = generátorová notace mno¾iny
   dictionary comprehension = generátorová notace slovníku
   
Nikdy neøíkej nikdy. Tak¾e lep¹í nápady vítám ;)

Mìjte se fajn,
   pepr
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-March/009572.html">[python] Dive Into Python 3 - diskuse k pojmum na nic.cz (bylo Re:	Preklad &quot;list comprehension&quot;?)
</A></li>
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-March/009578.html">[python] &quot;list comprehension&quot; -- prozatimni zaver
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2010-March/date.html#9576">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/thread.html#9576">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/subject.html#9576">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/author.html#9576">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/python">Dal¹í informace o konferenci Python</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/python/2010-March/009576.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:56 GMT -->
</html>
