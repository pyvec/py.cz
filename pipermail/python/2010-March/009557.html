<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/python/2010-March/009557.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:54 GMT -->
<HEAD>
   <TITLE> [python] generatorovy vyraz
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20generatorovy%20vyraz&In-Reply-To=%3Cba2405907dee49869cd1f5ce57b26dea%40c5c42f4cadcd400483e71978c804eb3c%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/python/2010-March/009554.html">
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/python/2010-March/009558.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[python] generatorovy vyraz</H1>
    <B>Pøikryl Petr</B> 
    <A HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20generatorovy%20vyraz&In-Reply-To=%3Cba2405907dee49869cd1f5ce57b26dea%40c5c42f4cadcd400483e71978c804eb3c%3E"
       TITLE="[python] generatorovy vyraz">prikryl na atlas.cz
       </A><BR>
    <I>Støeda Bøezen 24 16:33:49 CET 2010</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-March/009554.html">[python] generatorovy vyraz (bylo Re: nevznik objektu)
</A></li>
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-March/009558.html">[python] &quot;Dive
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2010-March/date.html#9557">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/thread.html#9557">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/subject.html#9557">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/author.html#9557">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

&gt;<i>---------------------------------------------------------
</I>&gt;<i>Od: David Rohleder
</I>&gt;&gt;<i>   g = (i*i for i in range(4))
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Jde jen o specialitu, aby pøekladaè poznal,
</I>&gt;&gt;<i> ¾e to je generátorový výraz. Je to jako numerický
</I>&gt;&gt;<i> výraz -- taky se mù¾e zapsat do závorek.
</I>&gt;<i>
</I>&gt;<i>Mnì vadí nekonzistence:
</I>&gt;<i>
</I>&gt;<i>jde napsat 
</I>&gt;<i>
</I>&gt;<i>a = fce(generátor)
</I>&gt;<i>
</I>&gt;<i>nebo
</I>&gt;<i>
</I>&gt;<i>a = fce((generátor))
</I>
To i*i for i in range(4) není generátor, ale generátorový výraz.
Generátor se z toho stane a¾ po tom pøiøazení.

&gt;<i>je mo¾né napsat
</I>&gt;<i>
</I>&gt;<i>a = (generátor)
</I>&gt;<i>
</I>&gt;<i>ale ne 
</I>&gt;<i>
</I>&gt;<i>a = generátor
</I>
Tedy pøesnìji, nelze napsat:

a = generátorový výraz

... jde o to, ¾e se bez tìch závorek jednoznaènì 
nepozná, ¾e jde o generátorový výraz -- podobnì jako 
kdy¾ se u slo¾itìj¹ích aritmetických výrazù musí
uzávorkovat podvýrazy, proto¾e ty podvýrazy se 
nepoznají samy od sebe.

&gt;<i>výmluvy na to, ¾e by pøekladaè nepoznal, ¾e se jedná o generátor a ne o
</I>&gt;<i>pøiøazení i*i jsou liché, proto¾e on to musí poznat napø. u té funkce.
</I>&gt;<i>pokud by byl tak hloupý, jak øíká¹, tak by 
</I>&gt;<i>
</I>&gt;<i>a = fce(i*i for i in range(4))
</I>&gt;<i>
</I>&gt;<i>nahlásila taky syntax error jako v pøíkladu ní¾e.
</I>
Jde o to, ¾e pøi volání funkce pøekladaè oèekává výraz(y).
Tam není jiná mo¾nost, ¾e by se to dalo chápat jako pøíkazy.

Pøekladaè tu situaci bez závorek samozøejmì pozná, 
ale bez tìch závorek se nedá jednoznaènì rozhodnout, 
jestli je to generátorový výraz nebo chybnì zapsaný pøíkaz.

&gt;<i>podle mne tady tyto problémy zpùsobuje tøeba i pou¾ití kulatých závorek,
</I>&gt;<i>proto¾e se pak jednodu¹e splete s nìjakým tuple, pøípadnì dal¹ími
</I>&gt;<i>operátory. Pøekladaè musí zji¹»ovat jestli se ve výrazu nìkde vepøedu
</I>&gt;<i>nevyskytuje for, aby celý výraz mohl prohlásit za generátor.
</I>
Pøekladaè se neplete. Tuple takto definovat nelze. A asi právì proto
neexistuje nìco, èemu by se øíkalo &quot;tuple comprehension&quot;.
Proè by taky mìlo, kdy¾ to nepotøebuji a jednodu¹e dosadím
generátorový výraz do tuple() -- je tam o &quot;tuple&quot; víc a mám toté¾.

&gt;<i>Kdybych chtìl nìjakou jednoznaènou syntaxi, tak bych mnohem rad¹i pou¾il
</I>&gt;<i>slo¾ené závorky:
</I>&gt;<i>
</I>&gt;<i>a = { i*i | for i in range(4)}
</I>
Jen¾e tohle je v Pythonu u¾ pou¾ito (a¾ na tu sviskou èáru, 
která je tam jaksi nepythonovsky navíc). Následující pøíklad
ukazuje generátor mno¾iny (ve smyslu vytvoøení vygenerované
mno¾iny; nìco jako konstruktor mno¾iny definované 
generátorovým výrazem -- anglicky set comprehension):

&gt;&gt;&gt;<i> a = { i*i for i in range(4) }
</I>&gt;&gt;&gt;<i> a
</I>{0, 1, 4, 9}
&gt;&gt;&gt;<i> type(a)
</I>&lt;class 'set'&gt;

A dal¹í pøíklad je nìco podobného -- dictionary comprehension
aneb konstruktor generovaného slovníku:

&gt;&gt;&gt;<i> a = { i:i*i for i in range(4) }
</I>&gt;&gt;&gt;<i> a
</I>{0: 0, 1: 1, 2: 4, 3: 9}
&gt;&gt;&gt;<i> type(a)
</I>&lt;class 'dict'&gt;

&gt;&gt;<i> Jde taky o to, ¾e generátorový výraz lze napsat
</I>&gt;&gt;<i> na víc øádkù. Tady je jiný výraz a je to pitomost,
</I>&gt;&gt;<i> ale pro ilustraci:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;&gt;&gt; g = (i*i
</I>&gt;&gt;<i> ...        for i in range(4)
</I>&gt;&gt;<i> ...        if i &gt; 2)
</I>&gt;<i>
</I>&gt;<i>to u¾ je hodnì pøita¾ené za vlasy, normálnì se jeden pøíkaz pí¹e na
</I>&gt;<i>jeden øádek, lambda funkci taky nemù¾e¹ napsat takovým zpùsobem na dva
</I>&gt;<i>øádky. Tady prostì normálnì funguje \ a dostane¹ stejnou vìc.
</I>
Jako pøita¾ené za vlasy se to mù¾e zdát do doby, ne¾ zjistí¹,
¾e generátorové výrazy lze do sebe zanoøovat.

A taky je lep¹í nevydávat vlastní pøání za skuteènost.
Python je rozumnìj¹í jazyk, ne¾ napøíklad makrojazyk v C.
Zpìtné lomítko pro indikaci pokraèovacího øádku není nutné
psát. Jinými slovy, jeden pøíkaz nemusí být zapsaný na
jednom øádku -- i kdy¾ se nepou¾ije zpìtné lomítko. 
Napøíklad volání funkce:

&gt;&gt;&gt;<i> def f(a, b, c, d):
</I>...     print(a, b, c, d)
...
&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> f('první',
</I>...   'druhý',
...   3,
...   4)
první druhý 3 4
&gt;&gt;&gt;<i>
</I>
Lambda funkce v Pythonu pøestává být pøirozeným
prvkem. Ve specializovaných jazycích by to bylo taky
na ma¹lu, kdyby se lambda výraz nemohl zalomit na víc
øádkù.

Kdy¾ to shrnu, tak v¹echny ty komplikace, které
by vznikly pøi jiném pøístupu ke generátorovému
výrazu, nestojí za to. Navíc v situaci, která se 
prakticky vùbec nevyskytuje a ve které navíc staèí
prostì uzavøít generátorový výraz do kulatých závorek.

pepr
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-March/009554.html">[python] generatorovy vyraz (bylo Re: nevznik objektu)
</A></li>
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-March/009558.html">[python] &quot;Dive
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2010-March/date.html#9557">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/thread.html#9557">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/subject.html#9557">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/author.html#9557">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/python">Dal¹í informace o konferenci Python</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/python/2010-March/009557.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:54 GMT -->
</html>
