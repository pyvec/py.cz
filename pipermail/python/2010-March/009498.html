<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/python/2010-March/009498.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:51 GMT -->
<HEAD>
   <TITLE> [python] Problém s subprocess
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20%3D%3Futf-8%3Fq%3FProbl%3DC3%3DA9m_s_subprocess%3F%3D&In-Reply-To=%3C6b637bd0c29649208edac37f879705fe%40pobox.sk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/python/2010-March/009497.html">
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/python/2010-March/009500.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[python] Problém s subprocess</H1>
    <B>azurIt</B> 
    <A HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20%3D%3Futf-8%3Fq%3FProbl%3DC3%3DA9m_s_subprocess%3F%3D&In-Reply-To=%3C6b637bd0c29649208edac37f879705fe%40pobox.sk%3E"
       TITLE="[python] Problém s subprocess">azurit na pobox.sk
       </A><BR>
    <I>Sobota Bøezen 13 23:26:27 CET 2010</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-March/009497.html">[python] Problém s subprocess
</A></li>
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-March/009500.html">[python] Problém s subprocess
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2010-March/date.html#9498">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/thread.html#9498">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/subject.html#9498">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/author.html#9498">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Skusal si to pustat mimo PyDev ?

To, ako sa ti to sprava, je vcelku zvlastne, pretoze ked zavolas communicate(), tak subprocess pocka na dokoncenie programu (nie je teda mozne, ze ten skonci az po skonceni skriptu). Skus este funkcie/premenne stadeto:
<A HREF="http://docs.python.org/release/2.5.4/lib/node532.html">http://docs.python.org/release/2.5.4/lib/node532.html</A>

Hlavne wait(), poll() a returncode.


&gt;<i>-----Pôvodná správa-----
</I>&gt;<i>Od: Radek Hol [mailto:<A HREF="http://www.py.cz/mailman/listinfo/python">radekholypublic na gmail.com</A>]
</I>&gt;<i>Komu: Konference PyCZ &lt;<A HREF="http://www.py.cz/mailman/listinfo/python">python na py.cz</A>&gt;
</I>&gt;<i>Predmet: Re: [python] Problém s subprocess
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Dìkuju za odpovìï.
</I>&gt;<i>Pøedtím jsem si experimentálnì ovìøil, ¾e bez pøesmìrování se to také
</I>&gt;<i>vypisuje na stdout, stderr.
</I>&gt;<i>Pro jistotu uvádím výsledky rùzných mo¾ností:
</I>&gt;<i>
</I>&gt;<i>-------------------------------------------------------------------------
</I>&gt;&gt;&gt;&gt;<i> javac = subprocess.Popen(command)
</I>&gt;<i>(Hlá¹ka &quot;javac.exe&quot; se vypí¹e.)
</I>&gt;<i>-------------------------------------------------------------------------
</I>&gt;&gt;&gt;&gt;<i> javac = subprocess.Popen(command)
</I>&gt;&gt;&gt;&gt;<i> print javac.communicate()
</I>&gt;<i>(None, None)
</I>&gt;<i>(Hlá¹ka &quot;javac.exe&quot; se NEvypí¹e.)
</I>&gt;<i>-------------------------------------------------------------------------
</I>&gt;&gt;&gt;&gt;<i> javac = subprocess.Popen(command, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
</I>&gt;<i>(Hlá¹ka &quot;javac.exe&quot; se NEvypí¹e.)
</I>&gt;<i>-------------------------------------------------------------------------
</I>&gt;&gt;&gt;&gt;<i> javac = subprocess.Popen(command, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
</I>&gt;&gt;&gt;&gt;<i> print javac.communicate()
</I>&gt;<i>('', '')
</I>&gt;<i>(Hlá¹ka &quot;javac.exe&quot; se NEvypí¹e.)
</I>&gt;<i>-------------------------------------------------------------------------
</I>&gt;&gt;&gt;&gt;<i> javac = subprocess.Popen(command, stdout=sys.stdout, stderr=sys.stderr)
</I>&gt;<i>(Hlá¹ka &quot;javac.exe&quot; se vypí¹e.)
</I>&gt;<i>-------------------------------------------------------------------------
</I>&gt;&gt;&gt;&gt;<i> javac = subprocess.Popen(command, stdout=sys.stdout, stderr=sys.stderr)
</I>&gt;&gt;&gt;&gt;<i> print javac.communicate()
</I>&gt;<i>(None, None)
</I>&gt;<i>(Hlá¹ka &quot;javac.exe&quot; se NEvypí¹e.)
</I>&gt;<i>-------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i>Navíc by to bohu¾el neøe¹ilo ten druhý podstatnìj¹í problém, ¾e se mi
</I>&gt;<i>soubor (Main.class) vytvoøí a¾ po skonèení mého programu.
</I>&gt;<i>
</I>&gt;<i>Pro jistotu uvádím, ¾e testuji v prostøedí PyDev.
</I>&gt;<i>
</I>&gt;<i>Dìkuji, Radek
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>2010/3/13 azurIt &lt;<A HREF="http://www.py.cz/mailman/listinfo/python">azurit na pobox.sk</A>&gt;:
</I>&gt;&gt;<i> subprocess predsa plne podporuje presmerovanie standardneho aj chyboveho vystupu (hint: stdout, stderr):
</I>&gt;&gt;<i> <A HREF="http://docs.python.org/release/2.5.4/lib/node528.html">http://docs.python.org/release/2.5.4/lib/node528.html</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Priklad:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> import subprocess
</I>&gt;&gt;<i> javac = subprocess.Popen(args=[&quot;C:\\java\\bin\\javac.exe Main.java -d .&quot;], stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
</I>&gt;&gt;<i> print javac.communicate()
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> azur
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>-----Pôvodná správa-----
</I>&gt;&gt;&gt;<i>Od: Radek Hol [mailto:<A HREF="http://www.py.cz/mailman/listinfo/python">radekholypublic na gmail.com</A>]
</I>&gt;&gt;&gt;<i>Komu: Konference PyCZ &lt;<A HREF="http://www.py.cz/mailman/listinfo/python">python na py.cz</A>&gt;
</I>&gt;&gt;&gt;<i>Predmet: [python] Problém s subprocess
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Ahoj,
</I>&gt;&gt;&gt;<i>chtìl bych se Vás zeptat, zda byste mi neumìli poradit s mým problémem
</I>&gt;&gt;&gt;<i>s voláním externího programu.
</I>&gt;&gt;&gt;<i>Pou¾ívám Python 2.5.4 (vìøím, ¾e kvùli kompatibilitì s Jython 2.5.1)
</I>&gt;&gt;&gt;<i>na Windows 7.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Sna¾ím se o spu¹tìní &quot;pøekladaèe&quot; &quot;javac.exe&quot;:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>------------------------------------------------
</I>&gt;&gt;&gt;<i>...
</I>&gt;&gt;&gt;<i>javac = subprocess.Popen(u&quot;C:\\java\\bin\\javac.exe Main.java -d .&quot;)
</I>&gt;&gt;&gt;<i>javac.communicate()
</I>&gt;&gt;&gt;<i>------------------------------------------------
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Zjistil jsem ale, ¾e takto volaný externí program (nebo alepoò
</I>&gt;&gt;&gt;<i>&quot;javac.exe&quot;) s následným voláním &quot;communicate()&quot; (ale nemusí to být
</I>&gt;&gt;&gt;<i>jen volání této metody - mù¾e to být jakýkoliv dal¹í kód) mi nevypí¹e
</I>&gt;&gt;&gt;<i>na chybový výstup ¾ádné informace (pokud je chyba v &quot;Main.java&quot;), i
</I>&gt;&gt;&gt;<i>kdy¾ pøi volání ze systémové pøíkazové øádky se informace vypí¹í.
</I>&gt;&gt;&gt;<i>Dále jsem zjistil, ¾e kdy¾ mùj program skonèí ihned po
</I>&gt;&gt;&gt;<i>&quot;...subprocess.Popen...&quot; (tedy vynechám &quot;communicate()&quot;), tak se na
</I>&gt;&gt;&gt;<i>chybový výstup vypí¹e, co má. Jen¾e já tímto samozøejmì nechci
</I>&gt;&gt;&gt;<i>konèit...
</I>&gt;&gt;&gt;<i>Zkou¹el jsem i pou¾ití funkce &quot;time.sleep()&quot;, ale bez úspìchu.
</I>&gt;&gt;&gt;<i>Pokud v &quot;Main.java&quot; chyba není, má &quot;javac.exe&quot; vygenerovat soubor
</I>&gt;&gt;&gt;<i>&quot;Main.class&quot;, jen¾e chování je podobné... Tedy, pokud se pod voláním
</I>&gt;&gt;&gt;<i>&quot;javac.exe&quot; vyskytuje je¹tì dal¹í kód, soubor &quot;Main.class&quot; se
</I>&gt;&gt;&gt;<i>vygeneruje a¾ po skonèení mého programu. (Ovìøeno pomocí
</I>&gt;&gt;&gt;<i>&quot;os.path.exists()&quot; i &quot;os.listdir()&quot;)
</I>&gt;&gt;&gt;<i>Pøitom návratový kód je ji¾ nastaven...
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Pøedem dìkuji za pomoc, Radek Holý
</I>&gt;&gt;&gt;<i>_______________________________________________
</I>&gt;&gt;&gt;<i>Python mailing list
</I>&gt;&gt;&gt;<i><A HREF="http://www.py.cz/mailman/listinfo/python">Python na py.cz</A>
</I>&gt;&gt;&gt;<i><A HREF="http://www.py.cz/mailman/listinfo/python">http://www.py.cz/mailman/listinfo/python</A>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Python mailing list
</I>&gt;&gt;<i> <A HREF="http://www.py.cz/mailman/listinfo/python">Python na py.cz</A>
</I>&gt;&gt;<i> <A HREF="http://www.py.cz/mailman/listinfo/python">http://www.py.cz/mailman/listinfo/python</A>
</I>&gt;&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Python mailing list
</I>&gt;<i><A HREF="http://www.py.cz/mailman/listinfo/python">Python na py.cz</A>
</I>&gt;<i><A HREF="http://www.py.cz/mailman/listinfo/python">http://www.py.cz/mailman/listinfo/python</A>
</I></PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-March/009497.html">[python] Problém s subprocess
</A></li>
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-March/009500.html">[python] Problém s subprocess
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2010-March/date.html#9498">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/thread.html#9498">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/subject.html#9498">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/author.html#9498">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/python">Dal¹í informace o konferenci Python</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/python/2010-March/009498.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:51 GMT -->
</html>
