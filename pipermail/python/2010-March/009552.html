<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/python/2010-March/009552.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:54 GMT -->
<HEAD>
   <TITLE> [python] Trida pro IP adresu,	vyjimky (bylo RE: Re:  nevznik objektu)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20Trida%20pro%20IP%20adresu%2C%0A%09vyjimky%20%28bylo%20RE%3A%20Re%3A%20%20nevznik%20objektu%29&In-Reply-To=%3C6d86a3a8d451402faf82b7733a3847bb%40177f5fd83f20477b91aa02786334c25e%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/python/2010-March/009555.html">
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/python/2010-March/009556.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[python] Trida pro IP adresu,	vyjimky (bylo RE: Re:  nevznik objektu)</H1>
    <B>Pøikryl Petr</B> 
    <A HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20Trida%20pro%20IP%20adresu%2C%0A%09vyjimky%20%28bylo%20RE%3A%20Re%3A%20%20nevznik%20objektu%29&In-Reply-To=%3C6d86a3a8d451402faf82b7733a3847bb%40177f5fd83f20477b91aa02786334c25e%3E"
       TITLE="[python] Trida pro IP adresu,	vyjimky (bylo RE: Re:  nevznik objektu)">prikryl na atlas.cz
       </A><BR>
    <I>Støeda Bøezen 24 13:41:50 CET 2010</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-March/009555.html">[python] &quot;Dive
</A></li>
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-March/009556.html">[python] Trida pro IP adresu, 	vyjimky (bylo RE: Re:  nevznik objektu)
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2010-March/date.html#9552">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/thread.html#9552">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/subject.html#9552">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/author.html#9552">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Zdravím,

Pøidám svùj pohled na øe¹ení problému s IP objektem 
a na pohled na výjimky (s ohledem na va¹e vzdìlání
a pùsobení).

S tím návrhem tøídy IP bych se pøimlouval k promy¹lení
pohledu na to, co objekt tøídy IP reprezentuje. Zohlednil
bych taky to, jak by to vypadalo v jiných jazycích, tøeba
v C++. Prakticky ¾ádný jazyk neumo¾ní korektní &quot;nevznik&quot;
objektu -- pokud nedojde k nìjaké nízkoúrovòové havárii.

Objekt v kompilovaných jazycích buï vytvoøím staticky, 
na zásobníku (jakoby staticky, ale v prostoru zásobníku)
nebo dynamicky (new nebo nìco takového). Jakmile vznikne,
zpøístupòuji jej pøímo pøes jméno promìnné (statický
objekt nebo na zásobníku -- tohle v Pythonu není),
pøes referenci (to je pøípad Pythonu) nebo pøes ukazatel.

Pouze v pøípadì pou¾ití ukazatele mám mo¾nost vrátit
alternativnì hodnotu NULL. Pak to musí být pøípad,
který popisoval Petr Messner -- zavolat funkci a ta
vrátí buï NULL nebo hodnotu ukazatele na vytvoøený 
objekt. Tohle by v Pythonu bylo stejné.

Pøi návrhu se musí rozhodnout, co vlastnì objekt
tøídy IP má vyjadøovat. Má vyjadøovat zachycení 
pøání vnìj¹ího prostøedí (u¾ivatele, volajícího kódu)
získat objekt s právì takovou IP adresou? Má existence
objektu vyjadøovat platnost IP adresy? Co to vùbec
je &quot;platná IP adresa&quot;? Je to syntakticky správnì 
napsaná adresa, nebo je to adresa, která se dá skuteènì
pou¾ít? Nebo dokonce adresa, která mi umo¾ní udìlat
operaci, kterou bych chtìl provést (tj. s ovìøením,
¾e se pøes ni nìkam dostanu)? A co kdy¾ se syntaxe
IP adres v budoucnu zmìní? Jak to udìlat, abych
toho musel pøedìlávat co nejménì?

V tomto smyslu se pøimlouvám za to, aby objetk tøídy
IP vznikl v¾dy, ale aby se bránil pou¾ití v pøípadì,
kdy má nepou¾itelný obsah -- v okam¾iku pou¾ití, 
nikoliv v okam¾iku vzniku (viz napøíklad momentální
nedostupnost pøes IP). Na vy¹¹í úrovni si pak mù¾u
rozhodnout, zda objekt s nepou¾itelnou IP adresou
(po otestovnání jeho vlastností) ponechám nebo zru¹ím.

V tomto smyslu se pøimlouvám znovu za návrh Petra 
Messnera -- vyu¾ít __nozero__. Proto¾e pøesnì pro
tento úèel byla metoda navr¾ena. Ona se vlastnì jmenuje
blbì. Její jméno by mìlo být odvozeno spí¹ z my¹lenky
&quot;hodnota v boolovském kontextu&quot;. Ale vznikla v dobì,
kdy Python místo True a False pou¾íval je¹tì 0 a != 0
(jako C). Pak nepotøebuji pomocnou funkci, ale objekt
mù¾u pou¾ít k testování pøesnì stejným zpùsobem, jako
bylo pùvodnì zamý¹leno:

    ipaddr = IP(&quot;192.168.34536.45&quot;)
    ....
    if not ipaddr:
        print &quot;zadavas blby vstup&quot;

Chování v boolovském kontextu implementované
metodou __nozero__ navíc umo¾òuje dynamicky mìnit
&quot;platnost&quot; objektu podle potøeby.

Teï k výjimkám. Souhlasím s názorem, ¾e výjimky
by se mìly vyskytovat výjimeènì. Ale spí¹e jde o to,
¾e se výjimeèným zpùsobem o¹etøují.

Co se týká výjimky StopIteration, tu pova¾uji spí¹
za výjimeènou ;) Jde o to, ¾e samotný cyklus for
je v Pythonu proti &quot;klasickým kompilovaným&quot; jazykùm
trochu výjimeèný. Není to poèítaný cyklus. Je to
zobecnìný cyklus pøes sekvenci. Existence StopIteration
pøestavuje jednu z mála mo¾ností, ja mohou v¹echny mo¾né
iterace dát najevo svùj konec (rùzné kontejnery, 
generátory...)

A co se týká programování s výjimkami a bez výjimek, 
je to otázka zmìnìného pøístupu k tvorbì programu
(podle mého k lep¹ímu). Kdy¾ to srovnáváte s goto...

Døíve &quot;neøízené&quot; pou¾ívání goto zpùsobovalo tì¾ko
øe¹itelné problémy. Postupnì to vedlo k &quot;objevu&quot;
strukturovaného programování (Wirth jako pøedstavitel).
Poøád ale bylo zalo¾eno na jednoduchém toku øízení.
Proto bylo mo¾né &quot;následnì&quot; testovat, jak to dopadlo
pøed chvílí.

Ve ¹kolních pøíkladech se èasto &quot;testování jak to 
dopadlo&quot; pro jednoduchost vynechávalo... proto¾e
to zkrátka vede k zaplevelení kódu smetím, které
není u¾iteèné z hlediska abstraktního uva¾ování
o problému. Jen¾e v praxi právì k tomuto jevu dochází
a programy se stávají hùøe èitelné (se v¹emi
dùsledky, jako tøeba vznik dal¹ích chyb díky bobtnání
kódu). To testování se taky muselo dìlat otrocky.
Muselo se myslet na v¹echny mo¾né situace, které
mohly selhat. Pøi rozsáhlej¹ím programu je to 
na ma¹lu.

Objektové programování pøedstavuje dal¹í zmìnu
pohledu ve smyslu &quot;spolupráce kooperujících objektù&quot;.
A i kdy¾ se o tom programátoøi v praxi zatím 
tak moc neuva¾ují, znamená to &quot;potenciálnì paralelní
èinnost&quot; tìch objektù. Potom u¾ je velmi tì¾ké
uva¾ovat v kategoriích co bylo døíve a co pozdìji. 
Umìlá serializace akcí vede k navození situace, 
kdy by se uplatnil Amdahlùv zákon (úzké hrdlo
paralelismu). Výjimka je v takovém pøípadì výhodným
komunikaèním prostøedkem, který bude fungovat 
i v paralelním prostøedí. A opìt, výjimeèný není
samotný objekt výjimky, ale zpùsob, jakým je 
jeho existence zpracována.

V jazycích typu C++ získaly kdysi výjimky pøívlastek
tì¾kopádného nástroje. Ale bylo to proto, ¾e existovalo
ménì zku¹eností s tím, jak jsou u¾iteèné a obtí¾nì
nahraditelné. A taky to souviselo s vývojem pøekladaèù
a s generováním kompilovaného kódu. A taky, v C/C++
se v¹e mìøilo na mikrosekundy a v¹e je velmi rychlé.
Nutná slo¾itost se proto nìkdy neoprávnìnì zamìòovala
za pomalou tì¾kopádnost.

Ten zmìnìný pøístup pøi návrhu aplikace by se dal
shrnout ve stylu: Naprogramuji to tak, jak by to mìlo
fungovat v ideálním pøípadì a pak uvidíme. Selhání 
se mohou o¹etøit &quot;bokem&quot;.

A je¹tì jedna výhoda výjimek. Kdy¾ zapomenu nìco 
otestovat v ifech (klasicky), mù¾e to krachnout velmi
nepøíjemnì. Kdy¾ nìkde neobslou¾ím výjimku, mù¾u ji
krásnì obslou¾it v hlavní funkci (main).

Mìjte se krásnì,
   pepr


&gt;<i>---------------------------------------------------------
</I>&gt;<i>Od: David Rohleder
</I>&gt;<i>Pøijato: 24.3.2010 9:55:53
</I>&gt;<i>Pøedmìt: Re: [python] nevznik objektu
</I>&gt;<i>
</I>&gt;<i>Vladimir Macek pí¹e v Út 23. 03. 2010 v 23:51 +0100:
</I>&gt;<i>
</I>&gt;&gt;<i> On 19.3.2010 00:04, Jirka Vejrazka wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> &gt; Davide, smir se s tim. Vyjimky jsou v Pythonu zavedeny, chapany a
</I>&gt;<i>
</I>&gt;&gt;<i> &gt; podporovany zpusob reagovani na chybove stavy, zejmena na
</I>&gt;<i>
</I>&gt;&gt;<i> &gt; neocekavana data.
</I>&gt;<i>
</I>&gt;&gt;<i> 
</I>&gt;<i>
</I>&gt;&gt;<i> A i to je zbytecne uzky pohled na to, na co se daji vyjimky pouzivat. Za
</I>&gt;<i>
</I>&gt;&gt;<i> prve, nekdy vubec nenesou chybovou informaci, ani nejsou spojeny
</I>&gt;<i>
</I>&gt;&gt;<i> necekanymi daty. Prikladem je built-in
</I>&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://docs.python.org/library/exceptions.html#exceptions.StopIteration">http://docs.python.org/library/exceptions.html#exceptions.StopIteration</A>
</I>&gt;<i>
</I>&gt;&gt;<i> Tedy vyjimka, kterou iterator indikuje, ze je vyprodano.
</I>&gt;<i>
</I>&gt;&gt;<i> 
</I>&gt;<i>
</I>&gt;&gt;<i> Za druhe, vyjimky jsou normalni objekty, ktere mohou nest libovolna
</I>&gt;<i>
</I>&gt;&gt;<i> data. Jakoby promenne, ale zpusobi zmenu provadeni programu zcela jinym,
</I>&gt;<i>
</I>&gt;&gt;<i> ale predem danym a casto uzitecnym smerem (z vnoreni ven).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Pøesnì na to jsem nará¾el, kdy¾ jsem øíkal, ¾e nìkdo pou¾ívá výjimky
</I>&gt;<i>
</I>&gt;<i>jako lep¹í goto (kterým navíc doká¾e¹ vyskoèit z funkce).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>  Nejcasteji
</I>&gt;<i>
</I>&gt;&gt;<i> skutecne nesou podrobnou informaci o chybe vykonavani, ale nikdo nikoho
</I>&gt;<i>
</I>&gt;&gt;<i> neomezuje v rozsireni tohoto modelu podle aktualnich potreb.
</I>&gt;<i>
</I>&gt;&gt;<i> 
</I>&gt;<i>
</I>&gt;&gt;<i> 
</I>&gt;<i>
</I>&gt;&gt;<i> &gt; Zkus to chvili nechat odlezet, treba se ti to zacne libit :)
</I>&gt;<i>
</I>&gt;&gt;<i> 
</I>&gt;<i>
</I>&gt;&gt;<i> Za tohle se taky velmi primlouvam.
</I>&gt;<i>
</I>&gt;&gt;<i> 
</I>&gt;<i>
</I>&gt;&gt;<i> Davide, podle toho, co pisete, jste na zacatku: Syntaxi a knihovnu treba
</I>&gt;<i>
</I>&gt;&gt;<i> zvladate, ale jeste vas ceka krok prijmouti zpusobu mysleni, ktery
</I>&gt;<i>
</I>&gt;&gt;<i> zkusenemu pythonistovi pomaha dosahnout vynikajici vykonnosti a elegance
</I>&gt;<i>
</I>&gt;&gt;<i> kodu. To neni vycitka, naopak, jsem rad, ze se ucite a my ostatni vam
</I>&gt;<i>
</I>&gt;&gt;<i> radi pomuzeme.
</I>&gt;<i>
</I>&gt;&gt;<i> 
</I>&gt;<i>
</I>&gt;&gt;<i> Jen to, ze predcasne soudite a snazite se roubovat novy pristup na drive
</I>&gt;<i>
</I>&gt;&gt;<i> naucene (coz clovek ma clovek tendenci povazovat za to lepsi), to je
</I>&gt;<i>
</I>&gt;&gt;<i> mirne iritujici.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Já to nìjak nesoudím, akorát si sna¾ím objasnit nìkteré vìci. Imho jsou
</I>&gt;<i>
</I>&gt;<i>napøiklad nìkteré z tìch syntaktických cukrù ¹patnì - napø. odstranìní
</I>&gt;<i>
</I>&gt;<i>závorek z generátorù (i*i for i in range(4)). Ne, ¾e by se na to nedalo
</I>&gt;<i>
</I>&gt;<i>zvyknout, akorát to tady trochu pøehnali.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Je¹tì poøád mnì vy pythonu pøijdou nìkteré vìci pomìrnì ne¹ikovnì
</I>&gt;<i>
</I>&gt;<i>vyøe¹ené, ale to se èasem vsákne.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>
</I>&gt;<i>Python mailing list
</I>&gt;<i>
</I>&gt;<i><A HREF="http://www.py.cz/mailman/listinfo/python">Python na py.cz</A>
</I>&gt;<i>
</I>&gt;<i><A HREF="http://www.py.cz/mailman/listinfo/python">http://www.py.cz/mailman/listinfo/python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-March/009555.html">[python] &quot;Dive
</A></li>
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-March/009556.html">[python] Trida pro IP adresu, 	vyjimky (bylo RE: Re:  nevznik objektu)
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2010-March/date.html#9552">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/thread.html#9552">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/subject.html#9552">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-March/author.html#9552">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/python">Dal¹í informace o konferenci Python</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/python/2010-March/009552.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:54 GMT -->
</html>
