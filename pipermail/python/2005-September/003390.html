<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/python/2005-September/003390.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:26:46 GMT -->
<HEAD>
   <TITLE> RE: [python] soubor v jiné zankové sadì
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:python%40py.cz?Subject=%3D%3Fiso-8859-2%3FQ%3FRE%3D3A_%3D5Bpython%3D5D_soubor_v_jin%3DE9_zankov%3DE9_sad%3DEC%3F%3D&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/python/2005-September/003389.html">
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/python/2005-September/003391.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>RE: [python] soubor v jiné zankové sadì</H1>
    <B>Petr Prikryl</B> 
    <A HREF="mailto:python%40py.cz?Subject=%3D%3Fiso-8859-2%3FQ%3FRE%3D3A_%3D5Bpython%3D5D_soubor_v_jin%3DE9_zankov%3DE9_sad%3DEC%3F%3D&In-Reply-To="
       TITLE="RE: [python] soubor v jiné zankové sadì">PrikrylP na skil.cz
       </A><BR>
    <I>Ètvrtek Záøí 29 11:11:36 CEST 2005</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2005-September/003389.html">[python] soubor v jiné zankové sadì
</A></li>
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2005-September/003391.html">[python] soubor v jiné zankové sadì
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2005-September/date.html#3390">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2005-September/thread.html#3390">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2005-September/subject.html#3390">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2005-September/author.html#3390">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>geon...
&gt;<i> pepr...
</I>&gt;<i> 
</I>&gt;<i> &gt;[...] ve Windows [...] Unicode jména souborù. 
</I>&gt;<i> &gt;V souvislosti s naèítáním
</I>&gt;<i> &gt;argv jsem zahlédl nìjakou poznámku, ¾e to 
</I>&gt;<i> &gt;s automatickým naèítáním argv v Unicode není
</I>&gt;<i> &gt;tak jednoduché a musí se to dìlat nìjak 
</I>&gt;<i> &gt;explicitnì. 
</I>&gt;<i> &gt;
</I>&gt;<i> já to nìdìlám pøes arg ale pøes os.walk()
</I>
Myslel jsem tím, ¾e to mù¾e být podobný problém
nedokonalé implementace. Nepøedpokládal jsem,
¾e by to nìjak souviselo s argv.

&gt;<i> &gt;[...] Ono staèí, kdy¾ ten soubor vyrobí
</I>&gt;<i> &gt;nìjaký japonský virus, který to v Unicode
</I>&gt;<i> &gt;vyrobí tøeba korektnì, ale v ¾ádném &quot;normálním
</I>&gt;<i> &gt;kódování&quot; to nedává smysl ;-)
</I>&gt;<i> &gt;
</I>&gt;<i> ano, názvy tìch souborù byly èínsky, vietnamsky 
</I>&gt;<i> nebo japonsky. u¾ jsem to smazal tedy normálnì 
</I>&gt;<i> (tc), ale stejnì mì to zajímá, jak na to v Pythonu...
</I>&gt;<i>
</I>&gt;<i> Ten mùj zku¹ební script, který takový název vytvoøí, ale je èistá 
</I>&gt;<i> èe¹tina, akorát pomotané kodovaní, a stejnì se nemohu dobrat 
</I>&gt;<i> výsledku...
</I>
Taková simulace názvu nemusí být korektní, proto¾e
pak asi nevznikne korektní unicode název souboru.

Nevím, co jsi pøesnì dìlal, ale os.walk() internì
volá os.listdir(). Dokumentace k os.listdir() øíká:

    On Windows NT/2k/XP and Unix, if path is 
    a Unicode object, the result will be a list 
    of Unicode objects

To znamená, ¾e by se cesta pøedávaná walk() mìla
uvést jako unicode øetìzec. Pak by to mohlo zaèít
fungovat. Ale nemusí to zaèít fungovat na té tvé
simulaci, proto¾e ì¹èø¾ý pøevedené do &quot;nìjakého&quot;
kódování nebude tvoøit korektní jméno v unicode.
Zkus to spí¹ nasimulovat tak, ¾e ì¹èø¾ý soubor
vytvoøí¹ jako unicode název souboru:

# -*- coding: cp1250 -*-
f=file(u'ì¹èø¾ýáíé','w')
f.close()

Nezkou¹el jsem to, ale zajímalo by mì, jak to 
dopadlo. Zkus tenhle soubor s unicode názvem
smazat pùvodním øe¹ením a upraveným øe¹ením 
s unicode cestou. Mo¾ná bude lep¹í zkonstruovat
pøímo nìjaký cizojazyèný název, proto¾e na tomhle
by se to nemuselo projevit.

pepr

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2005-September/003389.html">[python] soubor v jiné zankové sadì
</A></li>
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2005-September/003391.html">[python] soubor v jiné zankové sadì
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2005-September/date.html#3390">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2005-September/thread.html#3390">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2005-September/subject.html#3390">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2005-September/author.html#3390">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/python">Dal¹í informace o konferenci Python</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/python/2005-September/003390.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:26:46 GMT -->
</html>
