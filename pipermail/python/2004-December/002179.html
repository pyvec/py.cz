<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/python/2004-December/002179.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:28:06 GMT -->
<HEAD>
   <TITLE> RE: [python] globální promìnné
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:python%40py.cz?Subject=%3D%3Fiso-8859-2%3FQ%3FRE%3D3A_%3D5Bpython%3D5D_glob%3DE1ln%3DED_prom%3DECnn%3DE9%3F%3D&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/python/2004-December/002178.html">
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/python/2004-December/002176.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>RE: [python] globální promìnné</H1>
    <B>Petr Prikryl</B> 
    <A HREF="mailto:python%40py.cz?Subject=%3D%3Fiso-8859-2%3FQ%3FRE%3D3A_%3D5Bpython%3D5D_glob%3DE1ln%3DED_prom%3DECnn%3DE9%3F%3D&In-Reply-To="
       TITLE="RE: [python] globální promìnné">Prikryl na skil.cz
       </A><BR>
    <I>Úterý Prosinec 21 09:36:30 CET 2004</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2004-December/002178.html">[python] TCP/IP
</A></li>
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2004-December/002176.html">[python] Re: volba editoru/IDE pro Python
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2004-December/date.html#2179">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2004-December/thread.html#2179">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2004-December/subject.html#2179">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2004-December/author.html#2179">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>p.kosina napsal...
&gt;<i>
</I>&gt;<i> &gt; V tomto pøípadì nejde ani o globální promìnnou, ani o
</I>&gt;<i> &gt; promìnnou platnou v kterékoliv metodì tøídy. Vytváøí se v
</I>&gt;<i> &gt; rámci objektu a je platná pouze v rámci objektu (instanci
</I>&gt;<i> 
</I>&gt;<i> nicménì z hlediska tøídy je to globální promìnná, i kdy¾ se
</I>&gt;<i> jí tak neøíká.
</I>
Není to globální promìnná -- viz dále.

x = 20
x = x + 10
print x          # 30

Ve vý¹e uvedeném pøíkladu je promìnná x vytvoøena jako
globální.

class G:
    pass
    
g = G()
g.x = 30
g.x = g.x + 20
print g.x        # 50

V tomto pøíkladu je promìnná g globální. Její slo¾ka x je
lokální uvnitø objektu g. Není globální, i kdy¾ je veøejnì
pøístupná -- ale pouze pøes g (tedy lokální uvnitø g).

g2 = G()
print g2.x

Objekt g2 je stejné tøídy, jako g. Jeho vnitøní slo¾ka x ale
nebyla definována a proto se pøi pou¾ití vý¹e uvedeného
print zahlásí chyba.

g2.x = 40
g2.x = g2.x + 30
print g2.x       # 70

V g2 byla vyrobena rovnì¾ slo¾ka x. Je veøejnì pøístupná,
tak¾e s ní mohu normálnì pracovat.

print g.x + g2.x    # 120
print g.x           #  50
print g2.x          #  70

Oba objekty -- g i g2 -- mají svou slo¾ku x. I kdy¾ se tyto
slo¾ky jmenují stejnì, obsahují rùzné hodnoty. Nemohou tedy
být globálním odkazem na stejnou hodnotu.

Alternativou pøedchozího kódu, tentokrát bez definice tøídy
G, je pou¾ití prostých promìnných na globální úrovni.

g_x = 30
g_x = g_x + 20
print g_x          # 50

print g2_x

g2_x = 40
g2_x = g2_x + 30
print g2_x         # 70

print g_x + g2_x   # 120

&gt;<i> &gt; Definice a pou¾ití funkce r() a pou¾ití tøídy do toho nic
</I>&gt;<i> &gt; nového nevná¹í. Je to jen krkolomì zapsané vytvoøení
</I>&gt;<i> &gt; inicializace promìnné uvnitø existujícího objektu.
</I>&gt;<i> 
</I>&gt;<i> napsal jsem spatny priklad, zde je lepsi, proste modikace
</I>&gt;<i> promenné univtr kterekoliv funkce, jako jakysi superglobal
</I>&gt;<i> (to by mohl byt nazev toho noveho klicoveho slova, který by
</I>&gt;<i> toto delal :-)):
</I>&gt;<i> 
</I>&gt;<i> class G:
</I>&gt;<i> 	pass
</I>&gt;<i> def f():
</I>&gt;<i> 	x.what=x.what+10
</I>&gt;<i> 
</I>&gt;<i> x=G()
</I>&gt;<i> x.what=10
</I>&gt;<i> f()
</I>&gt;<i> print x.what #---&gt; 20
</I>
Poøád se jen modifikuje globálnì pøístupný objekt x. Jeho
slo¾ka je nicménì lokální. Taky bych mohl napsat:

class G:
    pass
    
def f():
    x.what = x.what + 10
    
def r():
    x.what = 10
    
x = G()
r()
f()
print x.what


Dal¹í mo¾nost na stejné téma se úplnì obejde bez f() a r():

class G:
    pass

x = G()
x.what = 10
x.what = x.what + 10
print x.what
    
Je to poøád toté¾. Pak u¾ staèí vynechat G a vyrobit
globální jméno, které pøipomíná pùvodní globální x a jeho
lokální slo¾ku what:

x_what = 10
x_what = x_what + 10
print x_what

Na pøíkladu s G není nic &quot;superglobálního&quot;. Spí¹ naopak.
Slo¾ka what je lokální uvnitø globálního objektu x. Globální
objekt x je ulo¾en ve slovníku zpøístupòovaném funkcí
globals(). Slo¾ka what je souèástí lokálního slovníku objektu
x. Zkuste:

class G:
    pass
    
print globals()  # Zatím ¾ádná známka existence x.
x = G()
print globals()  # V globálním slovníku je x vázáno na
                 # instanci tøídy G.
print dir(x)     # Výpis jmen v lokálním slovníku objektu x.   
x.what = 10       
print globals()  # V globálním prostoru se nic nezmìnilo
print dir(x)     # V lokálním prostoru objektu x pøibyla
                 # slo¾ka what.

Je¹tì nedo¹lo na jednu variantu, kdy se promìnná nevytváøí
na úrovni objektu, ale na úrovni tøídy.

class GG:
    xx = 10
    
print GG.xx   # 10    
GG.xx = GG.xx + 10
print GG.xx   # 20    

x = GG()
print x.xx   # chyba

V tomto pøípadì není slo¾ka xx souèástí objektu (instance
tøídy), ale souèástí tøídy samotné (v Pythonu je i tøída
reprezentována objektem, tak¾e xx je souèástí tohoto
systémového objektu, který zachycuje vlastnosti tøídy).

V¹e na nejvy¹¹í úrovni je globální, v¹echna jména, která
nejsou vyjmenována ve slovníku globals() jsou buï nìkde
lokální, nebo neexistují.

Petr

-- 
Petr Prikryl (prikrylp at skil dot cz) 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2004-December/002178.html">[python] TCP/IP
</A></li>
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2004-December/002176.html">[python] Re: volba editoru/IDE pro Python
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2004-December/date.html#2179">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2004-December/thread.html#2179">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2004-December/subject.html#2179">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2004-December/author.html#2179">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/python">Dal¹í informace o konferenci Python</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/python/2004-December/002179.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:28:06 GMT -->
</html>
