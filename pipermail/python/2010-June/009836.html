<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/python/2010-June/009836.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:33 GMT -->
<HEAD>
   <TITLE> [python] TkInter / widget Text / tag_bind: svázání s klávesami nefunguje
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20%3D%3Fiso-8859-1%3Fq%3FTkInter_/_widget_Text_/_tag%3D5Fbind%3D3A_sv%3F%3D%0A%09%3D%3Fiso-8859-1%3Fq%3F%3DE1z%3DE1n%3DED_s_kl%3DE1vesami_nefunguje%3F%3D&In-Reply-To=%3C986426b7-90af-4aeb-b19a-6124e60ee6a4%40q12g2000yqj.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/python/2010-June/009835.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[python] TkInter / widget Text / tag_bind: svázání s klávesami nefunguje</H1>
    <B>petrofF</B> 
    <A HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20%3D%3Fiso-8859-1%3Fq%3FTkInter_/_widget_Text_/_tag%3D5Fbind%3D3A_sv%3F%3D%0A%09%3D%3Fiso-8859-1%3Fq%3F%3DE1z%3DE1n%3DED_s_kl%3DE1vesami_nefunguje%3F%3D&In-Reply-To=%3C986426b7-90af-4aeb-b19a-6124e60ee6a4%40q12g2000yqj.googlegroups.com%3E"
       TITLE="[python] TkInter / widget Text / tag_bind: svázání s klávesami nefunguje">petr0ff na seznam.cz
       </A><BR>
    <I>Ètvrtek Èerven 24 15:53:42 CEST 2010</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-June/009835.html">[python] získání dat formuláøe z HTML source ; odeslání dat (POST)
</A></li>
        
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2010-June/date.html#9836">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-June/thread.html#9836">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-June/subject.html#9836">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-June/author.html#9836">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Zatímco objekt &lt;Text&gt; svázaný s klávesami/my¹í funguje bez problémù,
u tagù mi to pracuje správnì jen u my¹i:
text.tag_bind('tagA', '&lt;Double-1&gt;', echo) ...apod.
U kláves by mìl reagovat callback svázaný s tím tagem, ve kterém právì
do¹lo k zápisu klávesy
Není tomu tak ...o tom, který tag (a zda vùbec nìjaký) bude pou¾it,
rozhoduje pozice kurzoru my¹i v okam¾iku klávesové události (Press/
Release)

Pøíklad:
[zapisuji do tagu A]

KEY=1 (my¹ mimo tagy):
     &lt;nic&gt;

KEY=2 (my¹ nad tagem B):
     txt.get(2.0,3.0) = [LAST TAG]

KEY=3 (my¹ nad tagem A):
     txt.get(1.0,2.0) = [FIRST TAG] 123
     
[Pou¾itý kód]

from Tkinter import *
root = Tk()

def odezva(txt,tagName):
    range = txt.tag_ranges(tagName)
    content = txt.get(range[0],range[1])
    print &quot;txt.get(%s,%s) = %s&quot; % (range[0],range[1],content)

text = Text(font=('courier', 15, 'normal'))
text.pack(expand=YES, fill=BOTH)

text.tag_config('A', background='purple')
text.tag_config('B', background='yellow')

text.tag_bind('A', '&lt;KeyRelease&gt;', lambda event: odezva(text,'A'))
text.tag_bind('B', '&lt;KeyRelease&gt;', lambda event: odezva(text,'B'))

text.insert('1.0', '[FIRST TAG]  \n', 'A')
text.insert('2.0', '[LAST TAG]   \n', 'B')

text.insert('3.0', '---bez tagu---')

text.mark_set(INSERT, '1.0+13char')   # Cursor v tagu A
text.focus_set()

root.mainloop()
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-June/009835.html">[python] získání dat formuláøe z HTML source ; odeslání dat (POST)
</A></li>
	
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2010-June/date.html#9836">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-June/thread.html#9836">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-June/subject.html#9836">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-June/author.html#9836">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/python">Dal¹í informace o konferenci Python</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/python/2010-June/009836.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:33 GMT -->
</html>
