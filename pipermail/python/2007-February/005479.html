<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/python/2007-February/005479.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:23:29 GMT -->
<HEAD>
   <TITLE> [python] Problem s regularnym vyrazom
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:python%40py.cz?Subject=%5Bpython%5D%20Problem%20s%20regularnym%20vyrazom&In-Reply-To=OFC859B430.E576F1DD-ONC1257275.004E932F-C1257275.004FCDAF%40pds.sk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/python/2007-February/005476.html">
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/python/2007-February/005482.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[python] Problem s regularnym vyrazom</H1>
    <B>Petr Hlávka</B> 
    <A HREF="mailto:python%40py.cz?Subject=%5Bpython%5D%20Problem%20s%20regularnym%20vyrazom&In-Reply-To=OFC859B430.E576F1DD-ONC1257275.004E932F-C1257275.004FCDAF%40pds.sk"
       TITLE="[python] Problem s regularnym vyrazom">petrhlavka na gmail.com
       </A><BR>
    <I>Ètvrtek Únor  1 17:44:05 CET 2007</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2007-February/005476.html">[python] Problem s regularnym vyrazom
</A></li>
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2007-February/005482.html">[python] Problem s regularnym vyrazom
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2007-February/date.html#5479">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2007-February/thread.html#5479">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2007-February/subject.html#5479">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2007-February/author.html#5479">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dobry den,

vsak uprava s [^;] nerika, ze statement musi koncit strednikem, pouze
reguralni vyraz nepreskoci pres strednik na dalsi prikaz LABEL ON...

  S pozdravem Petr Hlavka.

On 2/1/07, <A HREF="http://www.py.cz/mailman/listinfo/python">RMiklos na pss.sk</A> &lt;<A HREF="http://www.py.cz/mailman/listinfo/python">RMiklos na pss.sk</A>&gt; wrote:
&gt;<i> No ano, ale ak tam je iba jedno CREATE TABLE(...) tak to nemusi byt
</I>&gt;<i> ukoncene so strednikom ;
</I>&gt;<i>
</I>&gt;<i> Ja som zatial obisiel ten regularny vyraz tak, ze este ked vsetko
</I>&gt;<i> nacitavam do stringu, preventivne hladam prvy strednik zlava a ak tam je,
</I>&gt;<i> tak vsetko od neho napravo odstranim
</I>&gt;<i>
</I>&gt;<i>     idx_1st_semicolon=sql_statement.find(';')
</I>&gt;<i>     if idx_1st_semicolon &gt; 0:
</I>&gt;<i>       sql_statement=sql_statement[:idx_1st_semicolon]
</I>&gt;<i>
</I>&gt;<i> No aj tak by ma zaujimal ten problem s regularnym vyrazom, pretoze som
</I>&gt;<i> skusal aj non greedy ale to pracuje uplne zle.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Leos Pol &lt;<A HREF="http://www.py.cz/mailman/listinfo/python">leos na radiante-corp.com</A>&gt;
</I>&gt;<i> Sent by: <A HREF="http://www.py.cz/mailman/listinfo/python">python-bounces na py.cz</A>
</I>&gt;<i> 01.02.2007 15:15
</I>&gt;<i> Please respond to
</I>&gt;<i> Konference PyCZ &lt;<A HREF="http://www.py.cz/mailman/listinfo/python">python na py.cz</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> To
</I>&gt;<i> Konference PyCZ &lt;<A HREF="http://www.py.cz/mailman/listinfo/python">python na py.cz</A>&gt;
</I>&gt;<i> cc
</I>&gt;<i>
</I>&gt;<i> Subject
</I>&gt;<i> Re: [python] Problem s regularnym vyrazom
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Zdravim,
</I>&gt;<i>
</I>&gt;<i> ja bych to asi nelamal pres koleno a udelal bych tohle:
</I>&gt;<i>
</I>&gt;<i> re.compile(r&quot;^\s*CREATE\s+TABLE\s+&quot;
</I>&gt;<i>            r&quot;(?P&lt;library&gt;[A-Z0-9]+)\s*[/.]\s*(?P&lt;file&gt;[A-Z0-9]+)\s*&quot;
</I>&gt;<i>            r&quot;\((?P&lt;tbl_field_def&gt;[^;]*)\)&quot;)
</I>&gt;<i>
</I>&gt;<i> tzn: Kazde sql query je ukonceno strednikem.....
</I>&gt;<i>
</I>&gt;<i> Leo
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.py.cz/mailman/listinfo/python">RMiklos na pss.sk</A> wrote:
</I>&gt;<i> &gt; Rad by som tymto oslovil odbornikov na regularne vyrazy.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Extrahujem datove polia tabulky cez regularny vyraz takto:
</I>&gt;<i> &gt; --------------------------- skript ---------------------------
</I>&gt;<i> &gt; import sys,re
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; sql_statement='''CREATE TABLE IBPDDB071/R004660V
</I>&gt;<i> &gt; (PERSONNR    DECIMAL     (10, 0)    NOT NULL WITH DEFAULT, LFDNR1
</I>&gt;<i> DECIMAL
</I>&gt;<i> &gt;   (3, 0)     NOT NULL WITH DEFAULT, VOTYP       CHARACTER   (1) NOT
</I>&gt;<i> &gt; NULL WITH DEFAULT, BSSTAMMNR   DECIMAL     (7, 0)     NOT NULL WITH
</I>&gt;<i> &gt; DEFAULT,BSVNR       DECIMAL     (2, 0)     NOT NULL WITH DEFAULT );'''
</I>&gt;<i> &gt; regexp_sql_create=\
</I>&gt;<i> &gt; re.compile(r&quot;^\s*CREATE\s+TABLE\s+&quot;
</I>&gt;<i> &gt;            r&quot;(?P&lt;library&gt;[A-Z0-9]+)\s*[/.]\s*(?P&lt;file&gt;[A-Z0-9]+)\s*&quot;
</I>&gt;<i> &gt;            r&quot;\((?P&lt;tbl_field_def&gt;.*)\)\s*&quot;)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; result=regexp_sql_create.search(sql_statement)
</I>&gt;<i> &gt; if result == None:
</I>&gt;<i> &gt;   # CREATE TABLE statement not valid !
</I>&gt;<i> &gt;   print &quot;SQL CREATE TABLE statement is not valid !!!&quot;
</I>&gt;<i> &gt;   sys.exit()
</I>&gt;<i> &gt; else:
</I>&gt;<i> &gt;   # Parse data from RegExp
</I>&gt;<i> &gt;   library=result.group('library')
</I>&gt;<i> &gt;   print &quot;Library=%s&quot; % library
</I>&gt;<i> &gt;   table=result.group('file')
</I>&gt;<i> &gt;   print &quot;Table=%s&quot; %table
</I>&gt;<i> &gt;   table_field_def=result.group('tbl_field_def')
</I>&gt;<i> &gt;   print &quot;Field Definitions=%s&quot; % table_field_def
</I>&gt;<i> &gt; ------------------------ konec skriptu ------------------------
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Potom definicie dat. poli dalej pracovavam.
</I>&gt;<i> &gt; Toto by fungovalo, az na to ze SQL-skript je vygenerovany a okrem CREATE
</I>&gt;<i>
</I>&gt;<i> &gt; TABLE (...); moze obsahovat aj LABEL ON (...);
</I>&gt;<i> &gt; takze moze vyzerat takto:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; sql_statement='''CREATE TABLE IBPDDB071/R004660V
</I>&gt;<i> &gt; (PERSONNR    DECIMAL     (10, 0)    NOT NULL WITH DEFAULT, LFDNR1
</I>&gt;<i> DECIMAL
</I>&gt;<i> &gt;   (3, 0)     NOT NULL WITH DEFAULT, VOTYP       CHARACTER   (1) NOT
</I>&gt;<i> &gt; NULL WITH DEFAULT, BSSTAMMNR   DECIMAL     (7, 0)     NOT NULL WITH
</I>&gt;<i> &gt; DEFAULT,BSVNR       DECIMAL     (2, 0)     NOT NULL WITH DEFAULT );
</I>&gt;<i> Label
</I>&gt;<i> &gt; on IBPDDB071/R004660V(PERSONNR   IS 'PERSONNR', LFDNR1     IS 'LFDNR1',
</I>&gt;<i> &gt; VOTYP      IS 'VOTYP', BSSTAMMNR  IS 'BSSTAMMNR', BSVNR      IS
</I>&gt;<i> &gt; 'BSVNR');'''
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Vtedy mi horeuvedeny regexp matchuje (pretoze je greedy) vsetko, takze
</I>&gt;<i> &gt; rozpozna vsetko od 'CREATE TABLE(' az po poslednu zatvorku ')' stringu
</I>&gt;<i> &gt; t.j. '..); LABEL ON(..' ale ja potrebujem aby rozpoznal len to co je v
</I>&gt;<i> &gt; tele CREATE TABLE.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Vie mi niekto poradit ako napisat ten regularny vyraz aby robil co
</I>&gt;<i> &gt; potrebujem?
</I>&gt;<i> &gt; Mgr. Ing. Roman MIKLÓ©
</I>&gt;<i> &gt; Prvá stavebná sporiteµòa a.s.
</I>&gt;<i> &gt; Bajkalská 30, P. O. Box 48
</I>&gt;<i> &gt; 829 48  Bratislava 25
</I>&gt;<i> &gt; Tel.: +421/ 2 / 582 31 174
</I>&gt;<i> &gt; Fax: +421/ 2 / 582 31 109
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Python mailing list
</I>&gt;<i> &gt; <A HREF="http://www.py.cz/mailman/listinfo/python">Python na py.cz</A>
</I>&gt;<i> &gt; <A HREF="http://www.py.cz/mailman/listinfo/python">http://www.py.cz/mailman/listinfo/python</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> ----
</I>&gt;<i> Leos Pol
</I>&gt;<i> SW Engineer
</I>&gt;<i> Radiante Corp.
</I>&gt;<i>
</I>&gt;<i> If it can be imagined,
</I>&gt;<i> we can implement it
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Python mailing list
</I>&gt;<i> <A HREF="http://www.py.cz/mailman/listinfo/python">Python na py.cz</A>
</I>&gt;<i> <A HREF="http://www.py.cz/mailman/listinfo/python">http://www.py.cz/mailman/listinfo/python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Mgr. Ing. Roman MIKLÓ©
</I>&gt;<i> Prvá stavebná sporiteµòa a.s.
</I>&gt;<i> Bajkalská 30, P. O. Box 48
</I>&gt;<i> 829 48  Bratislava 25
</I>&gt;<i> Tel.: +421/ 2 / 582 31 174
</I>&gt;<i> Fax: +421/ 2 / 582 31 109
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Python mailing list
</I>&gt;<i> <A HREF="http://www.py.cz/mailman/listinfo/python">Python na py.cz</A>
</I>&gt;<i> <A HREF="http://www.py.cz/mailman/listinfo/python">http://www.py.cz/mailman/listinfo/python</A>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2007-February/005476.html">[python] Problem s regularnym vyrazom
</A></li>
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2007-February/005482.html">[python] Problem s regularnym vyrazom
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2007-February/date.html#5479">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2007-February/thread.html#5479">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2007-February/subject.html#5479">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2007-February/author.html#5479">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/python">Dal¹í informace o konferenci Python</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/python/2007-February/005479.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:23:29 GMT -->
</html>
