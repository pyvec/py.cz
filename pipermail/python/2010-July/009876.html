<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/python/2010-July/009876.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:29 GMT -->
<HEAD>
   <TITLE> [python] =?iso-8859-2?q?=5Bpython=5D=09T=F8=EDda?=, která vytvoøí instanci jen pokud tam u¾ není instance se stejnými parametry
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%0A%09%3D%3Fiso-8859-2%3Fq%3F%3D3D%3D3Fiso-8859-2%3D3Fq%3D3F%3D3D5Bpython%3D3D5D%3F%3D%0A%09%3D%3Fiso-8859-2%3Fq%3F%3D3D09T%3D3DF8%3D3DEDda%3D3F%3D3D%3D2C_kter%3DE1_vytvo%3DF8%3DED_ins%3F%3D%0A%09%3D%3Fiso-8859-2%3Fq%3Ftanci_jen_pokud_tam_u%3DBE_nen%3DED_instance_se_stejn%3F%3D%0A%09%3D%3Fiso-8859-2%3Fq%3F%3DFDmi_parametry%3F%3D&In-Reply-To=%3C913F77222E913C49A057FDD7BBDEAAA301C0E68A%40br-dc.uhul.wan%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/python/2010-July/009875.html">
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/python/2010-July/009877.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[python] =?iso-8859-2?q?=5Bpython=5D=09T=F8=EDda?=, která vytvoøí instanci jen pokud tam u¾ není instance se stejnými parametry</H1>
    <B>MICHÁLEK Jan Mgr.</B> 
    <A HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%0A%09%3D%3Fiso-8859-2%3Fq%3F%3D3D%3D3Fiso-8859-2%3D3Fq%3D3F%3D3D5Bpython%3D3D5D%3F%3D%0A%09%3D%3Fiso-8859-2%3Fq%3F%3D3D09T%3D3DF8%3D3DEDda%3D3F%3D3D%3D2C_kter%3DE1_vytvo%3DF8%3DED_ins%3F%3D%0A%09%3D%3Fiso-8859-2%3Fq%3Ftanci_jen_pokud_tam_u%3DBE_nen%3DED_instance_se_stejn%3F%3D%0A%09%3D%3Fiso-8859-2%3Fq%3F%3DFDmi_parametry%3F%3D&In-Reply-To=%3C913F77222E913C49A057FDD7BBDEAAA301C0E68A%40br-dc.uhul.wan%3E"
       TITLE="[python] =?iso-8859-2?q?=5Bpython=5D=09T=F8=EDda?=, která vytvoøí instanci jen pokud tam u¾ není instance se stejnými parametry">Michalek.Jan na uhul.cz
       </A><BR>
    <I>Ètvrtek Èervenec 22 16:03:05 CEST 2010</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-July/009875.html">[python] =?iso-8859-2?q?=5Bpython=5D=09T=F8=EDda?=, která vytvoøí instanci jen pokud tam u¾ není instance se stejnými parametry
</A></li>
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-July/009877.html">[python] =?iso-8859-2?q?=5Bpython=5D=09T=F8=EDda?=, která vytvoøí instanci jen pokud tam u¾ není instance se stejnými parametry
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2010-July/date.html#9876">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-July/thread.html#9876">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-July/subject.html#9876">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-July/author.html#9876">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dík, myslim, ¾e mì to je jasnìj¹í, tak¾e new vytvoøí prázdnou instanci a init do ní namlátí obsah, tak¾e teoreticky je lep¹í pou¾ít ten dekorátor, proto¾e se nedìlá vùbec nic, co není naprosto nezbytný??

Rozumim tomu správnì?? 

Díky moc
Je.

-----Original Message-----
From: <A HREF="http://www.py.cz/mailman/listinfo/python">python-bounces na py.cz</A> [mailto:<A HREF="http://www.py.cz/mailman/listinfo/python">python-bounces na py.cz</A>] On Behalf Of Hynek Fabian
Sent: Thursday, July 22, 2010 3:55 PM
To: Konference PyCZ
Subject: Re: [python] =?iso-8859-2?q?=5Bpython=5D=09T=F8=EDda?=, která vytvoøí instanci jen pokud tam u¾ není instance se stejnými parametry

Kdyz se tvori nova instance, zavola se __new__() prvni arg je trida, zbytek jsou argumenty predany konstruktoru Zabudovana implementace __new__ obstara alokaci pameti a takovy ty nezajimavy veci a vytvori opravdovou, nefalsovanou instanci. Ta je pak predana do
__init__() jako 'self' argument. Nic vic na tom neni.

Kdyz do toho chces nejak zasahnout, staci ve spravny okamzik zavolat
object.__new__(cls) ktery obstara alokaci pameti a vrati ti novou instanci typu cls - v podstate jen prazdny jmenny prostor, se kterym si mzues delat co chces. Naivkove takhle tvori singleton :-)
__init__() volat nemusis - pokud volani __new__ vrati jakoukoliv (nova, stara, potomek, vsechno jedno) instanci cls, interpretr ho zavola sam. Pokud ven vyleze jiny objekt, bude se povazovat za vysledek konstrukce jako by se nic zvlastniho nedelo, ALE jeho __init__ se nezavola - predpoklada se, ze uz je zkostruovany cili by se volal podruhe.


MICHÁLEK Jan Mgr. (ètvrtek 22 Èervenec 2010 15:25:56):
&gt;<i> V¹em dìkuju za rady, du to vyzkou¹et, mám tu dva rùzný pøístupy, ale 
</I>&gt;<i> ani jeden uplnì nechápu, nicménì s pomocí Googlu si to snad rozpitvam.
</I>&gt;<i> 
</I>&gt;<i> Vøelý díky
</I>&gt;<i> 
</I>&gt;<i> (teda pánové, mam z Vás mindrák, na tohle bych sám asi nepøi¹el)
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://www.py.cz/mailman/listinfo/python">python-bounces na py.cz</A> [mailto:<A HREF="http://www.py.cz/mailman/listinfo/python">python-bounces na py.cz</A>] On Behalf Of 
</I>&gt;<i> Tomá¹ Drenèák Sent: Thursday, July 22, 2010 3:21 PM
</I>&gt;<i> To: Konference PyCZ
</I>&gt;<i> Subject: Re: [python]Tøída, která vytvoøí instanci jen pokud tam u¾ 
</I>&gt;<i> není instance se stejnými parametry
</I>&gt;<i> 
</I>&gt;<i> Aha, tak po dostudovani pojmov to nie je pouzitie metaclass ale len 
</I>&gt;<i> __new__ metody. Tato metoda je zodpovedna za vytvorenie novej instancie objektu.
</I>&gt;<i> Priklad ale zostava platny
</I>&gt;<i> 
</I>&gt;<i> 2010/7/22 Tomá¹ Drenèák &lt;<A HREF="http://www.py.cz/mailman/listinfo/python">tomas na drencak.com</A>&gt;:
</I>&gt;<i> &gt; No ja by som pouzil metaclass (staci definovat metodu __new__), vid
</I>&gt;<i> &gt; priklad:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; xxx = {}
</I>&gt;<i> &gt; class Xxx(object):
</I>&gt;<i> &gt;    def __new__(cls, param):
</I>&gt;<i> &gt;        global xxx
</I>&gt;<i> &gt;        if param not in xxx:
</I>&gt;<i> &gt;                xxx[param] = super(Xxx, cls).__new__(cls, param)
</I>&gt;<i> &gt;        return xxx[param]
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    def __init__(self, param):
</I>&gt;<i> &gt;        self.param = param
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 3077417100
</I>&gt;<i> &gt; 3077417228
</I>&gt;<i> &gt; 3077417100
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Vypise
</I>&gt;<i> &gt; 3077417100
</I>&gt;<i> &gt; 3077417228
</I>&gt;<i> &gt; 3077417100
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; V kode potom nemusis nic menit...
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 2010/7/22 MICHÁLEK Jan Mgr. &lt;<A HREF="http://www.py.cz/mailman/listinfo/python">Michalek.Jan na uhul.cz</A>&gt;:
</I>&gt;<i> &gt;&gt; Ten slovník tam mám, já to umím zachytit, ale neumim udìlat to, aby 
</I>&gt;<i> &gt;&gt; se ta instance nevytvoøila pøes init, ¹lo by udìlat
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; z1= Zvire.pridejZvire('hroch') #a ta metoda bz se podivala do 
</I>&gt;<i> &gt;&gt; slovniku a buï hotovýho hrocha vrátila, nebo udìlala fungl novýho
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; ale to já nechci, já to chci dìlat
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; z1 = Zvire('hroch')
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; kdybych to narval do nový tridy tak si stejne nepomuzu, udela se 
</I>&gt;<i> &gt;&gt; tak jako tak nova instance.
</I>&gt;<i> &gt;&gt; ________________________________
</I>&gt;<i> &gt;&gt; From: <A HREF="http://www.py.cz/mailman/listinfo/python">python-bounces na py.cz</A> [mailto:<A HREF="http://www.py.cz/mailman/listinfo/python">python-bounces na py.cz</A>] On Behalf 
</I>&gt;<i> &gt;&gt; Of Juda Kaleta
</I>&gt;<i> &gt;&gt; Sent: Thursday, July 22, 2010 2:59 PM
</I>&gt;<i> &gt;&gt; To: Konference PyCZ
</I>&gt;<i> &gt;&gt; Subject: Re: [python] Tøída, která vytvoøí instanci jen pokud tam 
</I>&gt;<i> &gt;&gt; u¾ není instance se stejnými parametry
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; Vhodné by bylo mít na vytváøení tìchto objektù nìjakou továrnièku - 
</I>&gt;<i> &gt;&gt; ta by obsahovala slovník s ji¾ vytvoøeními instancemi ({'pes':..., 
</I>&gt;<i> &gt;&gt; 'hroch':...}). Pøi volání metody k vytvoøení nového objektu by se 
</I>&gt;<i> &gt;&gt; kouklo do slovníku, pokud by tam ji¾ objekt s tímto klíèem byl, 
</I>&gt;<i> &gt;&gt; vrátil by se ten, pokud ne, vytvoøil by se nový objekt.
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; Juda Kaleta
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; E-mail: <A HREF="http://www.py.cz/mailman/listinfo/python">juda.kaleta na gmail.com</A>
</I>&gt;<i> &gt;&gt; Jabber: <A HREF="http://www.py.cz/mailman/listinfo/python">yetty na jabber.cz</A>
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; Dne 22.7.2010 14:50, MICHÁLEK Jan Mgr. napsal(a):
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; Otázka:
</I>&gt;<i> &gt;&gt;   je mo¾né napsat tøídu tak, aby vytvoøila instanci, jen pokud 
</I>&gt;<i> &gt;&gt; je¹tì instance se stejnými parametry je¹tì neexistuje.
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; Napø:
</I>&gt;<i> &gt;&gt;   mám tøídu zvíøe a chtìl bych, aby se chovala následujícím 
</I>&gt;<i> &gt;&gt; zpùsobem
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; z1 = zvire('hroch')
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; z1
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; &lt;__main__.zvire instance at 0x017C1EE0&gt;
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; z2 = zvire('pes')
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; z2
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; &lt;__main__.zvire instance at 0x017C1760&gt;
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; z3 = zvire('hroch')
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; z3
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; &lt;__main__.zvire instance at 0x017C1EE0&gt;
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; Jde to nìjak rozumnì (a pochopitelnì) udìlat??
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; Je.
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; Mgr Jan Michálek
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; oddìlení GIS
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; útvar ISaT
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; ÚHÚL Brandýs nad Labem
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; tel.: +420 322 319 886
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; email: mailto:<A HREF="http://www.py.cz/mailman/listinfo/python">michalek.jan na uhul.cz</A>
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; url: <A HREF="http://www.uhul.cz/">http://www.uhul.cz/</A>
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; __________ Informace od ESET NOD32 Antivirus, verze databaze 5300
</I>&gt;<i> &gt;&gt; (20100722) __________
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; Tuto zpravu proveril ESET NOD32 Antivirus.
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; <A HREF="http://www.eset.cz/">http://www.eset.cz</A>
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Python mailing list
</I>&gt;<i> &gt;&gt; <A HREF="http://www.py.cz/mailman/listinfo/python">Python na py.cz</A>
</I>&gt;<i> &gt;&gt; <A HREF="http://www.py.cz/mailman/listinfo/python">http://www.py.cz/mailman/listinfo/python</A>
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; __________ Informace od ESET NOD32 Antivirus, verze databaze 5300
</I>&gt;<i> &gt;&gt; (20100722) __________
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; Tuto zpravu proveril ESET NOD32 Antivirus.
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; <A HREF="http://www.eset.cz/">http://www.eset.cz</A>
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; __________ Informace od ESET NOD32 Antivirus, verze databaze 5300
</I>&gt;<i> &gt;&gt; (20100722) __________
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; Tuto zpravu proveril ESET NOD32 Antivirus.
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; <A HREF="http://www.eset.cz/">http://www.eset.cz</A>
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; __________ Informace od ESET NOD32 Antivirus, verze databaze 5300
</I>&gt;<i> &gt;&gt; (20100722) __________
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; Tuto zpravu proveril ESET NOD32 Antivirus.
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; <A HREF="http://www.eset.cz/">http://www.eset.cz</A>
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Python mailing list
</I>&gt;<i> &gt;&gt; <A HREF="http://www.py.cz/mailman/listinfo/python">Python na py.cz</A>
</I>&gt;<i> &gt;&gt; <A HREF="http://www.py.cz/mailman/listinfo/python">http://www.py.cz/mailman/listinfo/python</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Python mailing list
</I>&gt;<i> <A HREF="http://www.py.cz/mailman/listinfo/python">Python na py.cz</A>
</I>&gt;<i> <A HREF="http://www.py.cz/mailman/listinfo/python">http://www.py.cz/mailman/listinfo/python</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> __________ Informace od ESET NOD32 Antivirus, verze databaze 5300
</I>&gt;<i> (20100722) __________
</I>&gt;<i> 
</I>&gt;<i> Tuto zpravu proveril ESET NOD32 Antivirus.
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://www.eset.cz/">http://www.eset.cz</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> __________ Informace od ESET NOD32 Antivirus, verze databaze 5300
</I>&gt;<i> (20100722) __________
</I>&gt;<i> 
</I>&gt;<i> Tuto zpravu proveril ESET NOD32 Antivirus.
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://www.eset.cz/">http://www.eset.cz</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Python mailing list
</I>&gt;<i> <A HREF="http://www.py.cz/mailman/listinfo/python">Python na py.cz</A>
</I>&gt;<i> <A HREF="http://www.py.cz/mailman/listinfo/python">http://www.py.cz/mailman/listinfo/python</A>
</I>_______________________________________________
Python mailing list
<A HREF="http://www.py.cz/mailman/listinfo/python">Python na py.cz</A>
<A HREF="http://www.py.cz/mailman/listinfo/python">http://www.py.cz/mailman/listinfo/python</A>
 

__________ Informace od ESET NOD32 Antivirus, verze databaze 5300 (20100722) __________

Tuto zpravu proveril ESET NOD32 Antivirus.

<A HREF="http://www.eset.cz/">http://www.eset.cz</A>
 
 

__________ Informace od ESET NOD32 Antivirus, verze databaze 5300 (20100722) __________

Tuto zpravu proveril ESET NOD32 Antivirus.

<A HREF="http://www.eset.cz/">http://www.eset.cz</A>
 
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-July/009875.html">[python] =?iso-8859-2?q?=5Bpython=5D=09T=F8=EDda?=, která vytvoøí instanci jen pokud tam u¾ není instance se stejnými parametry
</A></li>
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-July/009877.html">[python] =?iso-8859-2?q?=5Bpython=5D=09T=F8=EDda?=, která vytvoøí instanci jen pokud tam u¾ není instance se stejnými parametry
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2010-July/date.html#9876">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-July/thread.html#9876">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-July/subject.html#9876">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-July/author.html#9876">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/python">Dal¹í informace o konferenci Python</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/python/2010-July/009876.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:29 GMT -->
</html>
