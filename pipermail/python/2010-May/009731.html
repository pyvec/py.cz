<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/python/2010-May/009731.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:34 GMT -->
<HEAD>
   <TITLE> [python] printy v èe¹tinì na WINDOWS/cmd konzoli neèitelné
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%0A%09%3D%3Futf-8%3Fq%3Fprinty_v_%3DC4%3D8De%3DC5%3DA1tin%3DC4%3D9B_na_WINDOWS/cmd%3F%3D%0A%09%3D%3Futf-8%3Fq%3F_konzoli_ne%3DC4%3D8Diteln%3DC3%3DA9%3F%3D&In-Reply-To=%3C1272970527.193628.29844.nullmailer%40mail1001.cent%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/python/2010-May/009730.html">
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/python/2010-May/009771.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[python] printy v èe¹tinì na WINDOWS/cmd konzoli neèitelné</H1>
    <B>Petr Pøikryl</B> 
    <A HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%0A%09%3D%3Futf-8%3Fq%3Fprinty_v_%3DC4%3D8De%3DC5%3DA1tin%3DC4%3D9B_na_WINDOWS/cmd%3F%3D%0A%09%3D%3Futf-8%3Fq%3F_konzoli_ne%3DC4%3D8Diteln%3DC3%3DA9%3F%3D&In-Reply-To=%3C1272970527.193628.29844.nullmailer%40mail1001.cent%3E"
       TITLE="[python] printy v èe¹tinì na WINDOWS/cmd konzoli neèitelné">prikryl na atlas.cz
       </A><BR>
    <I>Úterý Kvìten  4 12:55:27 CEST 2010</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-May/009730.html">[python] printy v èe¹tinì na WINDOWS/cmd konzoli neèitelné
</A></li>
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-May/009771.html">[python] printy v èe¹tinì na WINDOWS/cmd konzoli neèitelné
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2010-May/date.html#9731">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-May/thread.html#9731">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-May/subject.html#9731">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-May/author.html#9731">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Do toho sitecustomize.py bych to necpal. Je to soubor v podstatì 
vázaný na poèítaè. Pokud by aplikace na nìco takového spoléhala,
nedala by se rozumnì instalovat jinde.

Pøimlouvám se o naprostý pøechod k Unicode -- jinak s tím bude
problém v¾dycky. Nebo se musí pøinejmen¹ím neunicodový øetìzec
pøevést na Unicode øetìzec (v kódování podle zdrojového textu)
a pøi výstupu urèit kódování pøes sys.stdout.encoding nebo 
sys.stderr.encoding.

Je to furt ten samý problém, ¾e v Python 2.x  &quot;takovýhle&quot; øetìzec
vlastnì není øetìzec, ale posloupnost bajtù. Vypoøádává se s tím
a¾ Python 3, ale to nebrání tomu v Pythonu 2.x dùslednì pou¾ívat
u&quot;unicode øetìzce&quot;.  Jedinì ty jsou øetìzci, se kterými se dá
nìco dìlat z hlediska pøenositelnosti.

Petr

petrofF
&gt;<i>Petr Pøikryl
</I>&gt;&gt;<i> petrofF
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;Bohu¾el, toto se týká jen pøíkazù print.
</I>&gt;&gt;<i> &gt;Pokud pou¾iju raw_input(u&quot;Zadej jméno...&quot;) hodí to chybu
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Zdá se, ¾e jde o starou chybu, kterou jsem hlásil vývojáøùm skoro pøed
</I>&gt;&gt;<i> 5 lety. Mrkni <A HREF="semhttp://www.py.cz/pipermail/python/2005-July/003022.html">semhttp://www.py.cz/pipermail/python/2005-July/003022.html</A>
</I>&gt;&gt;<i> Jsou tam popsané projevy a mo¾nost èásteèného øe¹ení.
</I>&gt;<i>
</I>&gt;<i>Zkusil jsem místo explicitního volání:   
</I>&gt;<i>      raw_input(s.encode(sys.stdout.encoding))
</I>&gt;<i>vytvoøit soubor sitecustomize.py s pøedefinovanými vstupními funkcemi
</I>&gt;<i>
</I>&gt;<i>------------[ sitecustomize.py ]--------------------------------
</I>&gt;<i>
</I>&gt;<i>&quot;&quot;&quot;
</I>&gt;<i>  - change raw_input() and input() commands if console present
</I>&gt;<i>    (i.e. if sys.stdout.encoding is 'cp852')
</I>&gt;<i>  - modification of prompt argument proceed only if it is a unicode
</I>&gt;<i>object
</I>&gt;<i>   (non-unicode object is treated unchanged)
</I>&gt;<i>&quot;&quot;&quot;
</I>&gt;<i>import sys
</I>&gt;<i>if sys.stdout.encoding == &quot;cp852&quot;:
</I>&gt;<i>  try:
</I>&gt;<i>    import __builtin__
</I>&gt;<i>    original_raw_input = __builtin__.raw_input
</I>&gt;<i>    original_input   = __builtin__.input    
</I>&gt;<i>
</I>&gt;<i>    def raw_input(prompt=''):
</I>&gt;<i>      if type(prompt)==unicode:
</I>&gt;<i>        prompt = prompt.encode(sys.stdout.encoding)
</I>&gt;<i>      return original_raw_input(prompt)
</I>&gt;<i>
</I>&gt;<i>    def input(prompt=''):
</I>&gt;<i>      return eval(raw_input(prompt))
</I>&gt;<i>    
</I>&gt;<i>    raw_input.__doc__ = original_raw_input.__doc__
</I>&gt;<i>    input.__doc__   = original_input.__doc__
</I>&gt;<i>
</I>&gt;<i>    __builtin__.raw_input = raw_input
</I>&gt;<i>    __builtin__.input   = input
</I>&gt;<i>
</I>&gt;<i>  except:
</I>&gt;<i>    import traceback; traceback.print_exc()
</I>&gt;<i>
</I>&gt;<i>-------------------------------------------------------------
</I>&gt;<i>Skripty (s unicode literály) se v WinDOS oknì zobrazují bezchybnì.
</I>&gt;<i>Jen si nejsem jistý jestli je úprava kompatibilní s rùznými bìhovými
</I>&gt;<i>prostøedími
</I>&gt;<i>(IDLE, PyWin, PyDev, konzole.py apod)
</I>&gt;<i>  -petroff-
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Python mailing list
</I>&gt;<i><A HREF="http://www.py.cz/mailman/listinfo/python">Python na py.cz</A>
</I>&gt;<i><A HREF="http://www.py.cz/mailman/listinfo/python">http://www.py.cz/mailman/listinfo/python</A>
</I>&gt;<i>
</I></PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-May/009730.html">[python] printy v èe¹tinì na WINDOWS/cmd konzoli neèitelné
</A></li>
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-May/009771.html">[python] printy v èe¹tinì na WINDOWS/cmd konzoli neèitelné
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2010-May/date.html#9731">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-May/thread.html#9731">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-May/subject.html#9731">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-May/author.html#9731">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/python">Dal¹í informace o konferenci Python</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/python/2010-May/009731.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:34 GMT -->
</html>
