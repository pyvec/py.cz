<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/python/2008-November/008330.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:20:12 GMT -->
<HEAD>
   <TITLE> [python] problém s èe¹tinou v pøíloze
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20%3D%3Futf-8%3Fb%3FcHJvYmzDqW0gcyDEjWXFoXRpbm91IHYgcMWZw61sb3pl%3F%3D&In-Reply-To=%3C49103BBA.4000701%40ludik.cz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/python/2008-November/008331.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[python] problém s èe¹tinou v pøíloze</H1>
    <B>&quot;Ing. Vladislav Ludík&quot;</B> 
    <A HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20%3D%3Futf-8%3Fb%3FcHJvYmzDqW0gcyDEjWXFoXRpbm91IHYgcMWZw61sb3pl%3F%3D&In-Reply-To=%3C49103BBA.4000701%40ludik.cz%3E"
       TITLE="[python] problém s èe¹tinou v pøíloze">vlada na ludik.cz
       </A><BR>
    <I>Úterý Listopad  4 13:10:34 CET 2008</I>
    <P><UL>
        
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2008-November/008331.html">[python] Prosba o pomoc zaèinam
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2008-November/date.html#8330">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2008-November/thread.html#8330">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2008-November/subject.html#8330">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2008-November/author.html#8330">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Zdravím v¹echny,

nepodaøilo se mi vyøe¹it následující problém pøi odesílání pøílohy v emailu.
Pokud dám text do tìla zprávy, je èe¹tina v poøádku.
Pokud v¹ak ulo¾ím text do souboru v kódování latin2, je èitelný a 
viditelnì také v poøádku.
Ale po odeslání v pøíloze emailu se v pøijaté zprávì objeví ¾,¹ pøekódované.
Mù¾e mi nìkdo prakticky poradit?

Díky VL

Pou¾il jsem následující konstrukci:

#!/usr/bin/python2.4
# -*- coding: iso-8859-2 -*-

import smtplib
from email.MIMEMultipart import MIMEMultipart
from email.MIMEBase import MIMEBase
from email.MIMEText import MIMEText
from email.Utils import COMMASPACE, formatdate
from email import Encoders

def send_mail(files,send_from, send_to, subject, text, server):
    'Posle email s prilohami'
   
    assert type(send_to)==str
    assert type(files)==list
   
    msg = MIMEMultipart()
    msg['From'] = send_from
    msg['To'] = send_to
    msg['Date'] = formatdate(localtime=True)
    msg['Subject'] = subject

    msg.attach( MIMEText(text,_charset='iso-8859-2') )
   
    for f in files:
      part = MIMEBase('application', &quot;octet-stream&quot;)
      part.set_payload(open(f,&quot;rb&quot;).read())
      Encoders.encode_base64(part)
      part.add_header('Content-Disposition', 'attachment; filename=&quot;%s&quot;' 
% os.path.basename(f))
      msg.attach(part)
 
    smtp = smtplib.SMTP(server)
    smtp.sendmail(send_from, send_to, msg.as_string())
    smtp.close()


------------- dal¹í èást ---------------
A non-text attachment was scrubbed...
Name: vlada.vcf
Type: text/x-vcard
Size: 482 bytes
Desc: [¾ádný popis není k dispozici]
URL: &lt;<A HREF="http://www.py.cz/pipermail/python/attachments/20081104/7c9d2e1a/attachment.vcf">http://www.py.cz/pipermail/python/attachments/20081104/7c9d2e1a/attachment.vcf</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2008-November/008331.html">[python] Prosba o pomoc zaèinam
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2008-November/date.html#8330">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2008-November/thread.html#8330">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2008-November/subject.html#8330">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2008-November/author.html#8330">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/python">Dal¹í informace o konferenci Python</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/python/2008-November/008330.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:20:12 GMT -->
</html>
