<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/python/2010-April/009675.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:45 GMT -->
<HEAD>
   <TITLE> [python] Python WSGI (zaèáteèník)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20%3D%3Fiso-8859-2%3Fq%3FPython_WSGI_%3D28za%3DE8%3DE1te%3DE8n%3DEDk%3D29%3F%3D&In-Reply-To=%3C9FFB44C5-4088-4E00-9968-233115A16A68%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/python/2010-April/009674.html">
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/python/2010-April/009676.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[python] Python WSGI (zaèáteèník)</H1>
    <B>Petr Messner</B> 
    <A HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20%3D%3Fiso-8859-2%3Fq%3FPython_WSGI_%3D28za%3DE8%3DE1te%3DE8n%3DEDk%3D29%3F%3D&In-Reply-To=%3C9FFB44C5-4088-4E00-9968-233115A16A68%40gmail.com%3E"
       TITLE="[python] Python WSGI (zaèáteèník)">petr.messner na gmail.com
       </A><BR>
    <I>Sobota Duben 24 17:34:51 CEST 2010</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-April/009674.html">[python] Python WSGI (zaèáteèník)
</A></li>
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-April/009676.html">[python] Python WSGI (zaèáteèník)
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2010-April/date.html#9675">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-April/thread.html#9675">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-April/subject.html#9675">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-April/author.html#9675">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ahoj,

zkusím ti to nejdøív nìjak vysvìtlit, pak ti odpovím na tvé konkrétní otázky a závìr je¹tì nìco pøidám. Sorry, vzhledem k formulaci a vlastnì samotné existenci dotazu jsem se trochu více rozepsal.

Pro jistotu zde uvedu definici WSGI: je to lepidlo, pomocí kterého se slepí webový server a webový framework/webová aplikace; je to proto, aby ka¾dá aplikace/ka¾dý framework nemusel znovu a znovu implementovat HTTP, FastCGI, CGI atd. Místo toho jen webserver nebo FastCGI server nebo CGI handler (nebo cokoliv) jen poskytne WSGI rozhraní a aplikace/framework u¾ se tím nemusí zabývat.

Ale stále toho k zabývání se je¹tì spousta zbývá. WSGI je low-level a nedìlá nic jiného, ne¾ co jsem právì popsal. Mohl bys WSGI vzít a pøidat do nìj nìjaké hezèí zpracování uploadu souborù, mohl bys do nìj pøidat spojení do databáze, logování atd., ale to u¾ by pak nebylo hezké rozhraní, ale pìkný moloch. Byl by to webový framework. Úkolem WSGI není být webovým frameworkem, ale umo¾nit webovým frameworkùm fungovat nezávisle na tom, jestli budou spu¹tìny pøes CGI, FastCGI nebo nìjak jinak.

Tak¾e:

1. pokud chce¹ v Pythonu dìlat weby, nedìlej je èistì ve WSGI, ale najdi si knihovnu nebo framework, která bude øe¹it ty nejotravnìj¹í vìci (upload souborù apod.) Mù¾e to být buï full-stack framework jako tøeba Django nebo Pylons, nebo to mù¾e být knihovna, která dìlá primárnì právì jen tohle, napø. Werkzeug, Paste WebOb, yaro, ... Je toho mraky. Mezi tím jsou je¹tì dal¹í vìci, napø. CherryPy. A pak je¹tì speciality, jako Zope nebo Twisted.

2. statistiky na webu bývají pochybné kvality, nejlep¹í je se o výkonu nìèeho pøesvìdèit sám. Na co psát nìco ultra-efektivnì, kdy¾ tam stejnì poleze jen deset lidí dennì - místo toho to dìlej tak, abys z toho mìl sám radost a mìl s tím co nejménì práce. Na druhou stranu, pro jakýkoliv dobøe nakonfigurovaný zpùsob nasazení webové aplikace by nemìl být problém zvádnout stovky po¾adavkù za sekundu, a pokud bude po¾adavkù více, stejnì pøi takovém provozu se u¾ asi dávno bude¹ poohlí¾et po dal¹ím ¾eleze.

3. ¾e nechce¹ pou¾ívat mod_python já osobnì chválím :) I kdy¾ pro to mám jiné dùvody, ne¾ statistiky na webu. WSGI je univerzálnìj¹í. (Ne ¾e by v mod_pythonu ne¹el pou¾ít WSGI handler, vìøím, ¾e je zde øeè o standardním mod_python publisheru.) Mimochodem, abychom pøede¹li obvyklému poèáteènímu zádrhelu - WSGI není to samé, co mod_wsgi. Jedno je rozhraní a druhé je jedna z implementací tohoto rozhraní pro Apache.

4. proè ti nefunguje ten print samozøejmì nevím, ale vzhledem k tomu, ¾e print vypisuje na standardní výstup, asi to bude tím, ¾e svoji aplikaci spou¹tí¹ pomocí nìèeho, co ten standardní výstup zavírá. Tøeba kdybych já pomocí printu nìco napsal, tak se mi to vypí¹e rovnou do konzole, kde je webovka spu¹tìná (tedy ne u¾ivateli do prohlí¾eèe), a na serveru standardní výstup bývá (kdy¾ není zavøený) pøesmìrovaný do /dev/null, tak¾e se to zapí¹e ví¹ kam. Pou¾ívat print ve webové aplikaci lze jen na ladìní, jinak je to asi stejný nesmysl jako pou¾ívat ho v GUI aplikacích. Jo a jestli si chtìl napsat nìco jako print(&quot;&lt;html&gt;... kilobajty balastu ...&lt;/html&gt;&quot;), tak pou¾ij ¹ablonu, je to o dost jednodu¹¹í a pøehlednìj¹í :)

Co by mìl být tvùj dal¹í krok - doporuèuji se podívat na Django. Je tu dost pøíznivcù a u¾ivatelù Djanga, tak¾e i z tohoto pohledu je to perspektivní.

Kdybys nechtìl jít do Djanga, tak se zkus tøeba podívat na <A HREF="http://werkzeug.pocoo.org/">http://werkzeug.pocoo.org/</A> a rozklikni si to &quot;click here to see ...&quot;, je tam docela pìkná ukázka. Jak vidí¹, snadno získá¹ objekt Request, ve kterém je v¹e co potøebuje¹, odpovìï vrací¹ objektem tøídy Response a co dìlá¹ mezi tím je na tobì, to ti jako PHP programátorovi pøijde asi bli¾¹í. Werkzeug není zrovna hodnì pou¾ívaná vìc, ale mì se líbí, lze na ni demonstrovat, jak to dìlat snadno a bez frameworkového molochu, proto to zde uvádím. Takových podobných nástrojù jako Werkzeug je více.

Vùbec pro PHP programátora bude asi nejvìt¹í problém to, ¾e dìlat nìco v Pythonu nebo Ruby neznamená jen nauèit se jazyk a tøeba jen jeden zpùsob jak to zprovoznit, ale u¾ pøi ètení prvního tutorialu se na tebe valí vìci jako ORM, MVC, URL routing, testování, ideálnì je¹tì základy Linuxu/BSD/.... Tím se nenech odradit.

Tak¾e pøeji hodnì ¹tìstí, ale stojí to za to :)

PM


PS. pøedpokládám, ¾e tvùj dal¹í dotaz do této konference bude, kde na to najít hosting :)

On 24.4.2010, at 16:01, Thomix wrote:

&gt;<i> Zdravím,
</I>&gt;<i> 
</I>&gt;<i> u¾ nìkolik let programuju v php. Poslední dobou ¹ilhám po python pro
</I>&gt;<i> web. Nainstaloval jsem si modul WSGI a zkusil si par tutoriálù. Ov¹em
</I>&gt;<i> mám problém.
</I>&gt;<i> 
</I>&gt;<i> Napø.:
</I>&gt;<i> 
</I>&gt;<i> def application(environ, start_response):
</I>&gt;<i>    status = '200 OK'
</I>&gt;<i>    output = 'hl'
</I>&gt;<i> 
</I>&gt;<i>    response_headers = [('Content-type', 'text/plain'),
</I>&gt;<i>                        ('Content-Length', str(len(output)))]
</I>&gt;<i>    start_response(status, response_headers)
</I>&gt;<i> 
</I>&gt;<i>    return [output]
</I>&gt;<i> 
</I>&gt;<i> Tomuto celkem rozumím ale nechapu jak v tom více programovat ??? Kdy¾
</I>&gt;<i> si napí¹u print(&quot;neco&quot;); napi¹e to chybu a dále se to semnou nebaví.
</I>&gt;<i> 
</I>&gt;<i> Viz.:
</I>&gt;<i> 
</I>&gt;<i> def application(environ, start_response):
</I>&gt;<i>    status = '200 OK'
</I>&gt;<i>    output = 'hl'
</I>&gt;<i>    print(&quot;neco&quot;);
</I>&gt;<i> 
</I>&gt;<i>    response_headers = [('Content-type', 'text/plain'),
</I>&gt;<i>                        ('Content-Length', str(len(output)))]
</I>&gt;<i>    start_response(status, response_headers)
</I>&gt;<i> 
</I>&gt;<i>    return [output]
</I>&gt;<i> 
</I>&gt;<i> Nìjak nechápu v èem je problém. Mod_python nechci pou¾ívat z dùvodu
</I>&gt;<i> slabé odezvialesponò dle statistik co jsem èetl na internetu. Mohl by
</I>&gt;<i> mì prosím nìkdo objasnit alespoò základ psaní ve WSGI ?
</I>&gt;<i> 
</I>&gt;<i> Dìkuji :)
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Python mailing list
</I>&gt;<i> <A HREF="http://www.py.cz/mailman/listinfo/python">Python na py.cz</A>
</I>&gt;<i> <A HREF="http://www.py.cz/mailman/listinfo/python">http://www.py.cz/mailman/listinfo/python</A>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-April/009674.html">[python] Python WSGI (zaèáteèník)
</A></li>
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-April/009676.html">[python] Python WSGI (zaèáteèník)
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2010-April/date.html#9675">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-April/thread.html#9675">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-April/subject.html#9675">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-April/author.html#9675">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/python">Dal¹í informace o konferenci Python</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/python/2010-April/009675.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:45 GMT -->
</html>
