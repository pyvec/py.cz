<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/python/2010-April/009679.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:45 GMT -->
<HEAD>
   <TITLE> [python] Python WSGI (zaèáteèník)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20%3D%3Fiso-8859-2%3Fq%3FPython_WSGI_%3D28za%3DE8%3DE1te%3DE8n%3DEDk%3D29%3F%3D&In-Reply-To=%3Cg2v1e5f8cdc1004250048m5d87d0bah37d1fa73ebf98ac7%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/python/2010-April/009678.html">
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/python/2010-April/009680.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[python] Python WSGI (zaèáteèník)</H1>
    <B>Jirka Vejrazka</B> 
    <A HREF="mailto:python%40py.cz?Subject=Re%3A%20%5Bpython%5D%20%3D%3Fiso-8859-2%3Fq%3FPython_WSGI_%3D28za%3DE8%3DE1te%3DE8n%3DEDk%3D29%3F%3D&In-Reply-To=%3Cg2v1e5f8cdc1004250048m5d87d0bah37d1fa73ebf98ac7%40mail.gmail.com%3E"
       TITLE="[python] Python WSGI (zaèáteèník)">jirka.vejrazka na gmail.com
       </A><BR>
    <I>Nedìle Duben 25 09:48:42 CEST 2010</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-April/009678.html">[python] Python WSGI (zaèáteèník)
</A></li>
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-April/009680.html">[python] Python WSGI (zaèáteèník)
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2010-April/date.html#9679">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-April/thread.html#9679">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-April/subject.html#9679">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-April/author.html#9679">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ahoj,

  4TB mesicne je v podstate nezajimavy udaj, to nic nerika o
narocnosti jednotlivych aplikaci nebo webu. To muze udelat bittorrent
s minimalnimi naroky na pamet a (skoro) nemeritelnou zatezi procesoru.

  Zkust uvest zpracovane HTTP pozadavky za sekundu pri beznem provozu
a ve spicce, pak se tim da nejak pracovat. Ale obecne se da rict, ze
ani v pripade &quot;velkych&quot; cisel ti nikdo nerekne, ze nemas pouzit Python
nebo PHP. I na jednoduche VPS se da na beznem webu udelat velka
spousta optimalizaci a kesovani, ktere dokazou radove zvysit vykon.

  Zkus napsat trochu vic o tom, jak ty tve weby vypadaji...

   Jirka


On 24/04/2010, Thomix &lt;<A HREF="http://www.py.cz/mailman/listinfo/python">thomixcz at gmail.com</A>&gt; wrote:
&gt;<i> On Apr 24, 5:34 pm, Petr Messner &lt;<A HREF="http://www.py.cz/mailman/listinfo/python">petr.mess... at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> Ahoj,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> zkusím ti to nejdøív nìjak vysvìtlit, pak ti odpovím na tvé konkrétní
</I>&gt;&gt;<i> otázky a závìr je¹tì nìco pøidám. Sorry, vzhledem k formulaci a vlastnì
</I>&gt;&gt;<i> samotné existenci dotazu jsem se trochu více rozepsal.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Pro jistotu zde uvedu definici WSGI: je to lepidlo, pomocí kterého se
</I>&gt;&gt;<i> slepí webový server a webový framework/webová aplikace; je to proto, aby
</I>&gt;&gt;<i> ka¾dá aplikace/ka¾dý framework nemusel znovu a znovu implementovat HTTP,
</I>&gt;&gt;<i> FastCGI, CGI atd. Místo toho jen webserver nebo FastCGI server nebo CGI
</I>&gt;&gt;<i> handler (nebo cokoliv) jen poskytne WSGI rozhraní a aplikace/framework u¾
</I>&gt;&gt;<i> se tím nemusí zabývat.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Ale stále toho k zabývání se je¹tì spousta zbývá. WSGI je low-level a
</I>&gt;&gt;<i> nedìlá nic jiného, ne¾ co jsem právì popsal. Mohl bys WSGI vzít a pøidat
</I>&gt;&gt;<i> do nìj nìjaké hezèí zpracování uploadu souborù, mohl bys do nìj pøidat
</I>&gt;&gt;<i> spojení do databáze, logování atd., ale to u¾ by pak nebylo hezké
</I>&gt;&gt;<i> rozhraní, ale pìkný moloch. Byl by to webový framework. Úkolem WSGI není
</I>&gt;&gt;<i> být webovým frameworkem, ale umo¾nit webovým frameworkùm fungovat
</I>&gt;&gt;<i> nezávisle na tom, jestli budou spu¹tìny pøes CGI, FastCGI nebo nìjak
</I>&gt;&gt;<i> jinak.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Tak¾e:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1. pokud chce¹ v Pythonu dìlat weby, nedìlej je èistì ve WSGI, ale najdi
</I>&gt;&gt;<i> si knihovnu nebo framework, která bude øe¹it ty nejotravnìj¹í vìci (upload
</I>&gt;&gt;<i> souborù apod.) Mù¾e to být buï full-stack framework jako tøeba Django nebo
</I>&gt;&gt;<i> Pylons, nebo to mù¾e být knihovna, která dìlá primárnì právì jen tohle,
</I>&gt;&gt;<i> napø. Werkzeug, Paste WebOb, yaro, ... Je toho mraky. Mezi tím jsou je¹tì
</I>&gt;&gt;<i> dal¹í vìci, napø. CherryPy. A pak je¹tì speciality, jako Zope nebo
</I>&gt;&gt;<i> Twisted.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2. statistiky na webu bývají pochybné kvality, nejlep¹í je se o výkonu
</I>&gt;&gt;<i> nìèeho pøesvìdèit sám. Na co psát nìco ultra-efektivnì, kdy¾ tam stejnì
</I>&gt;&gt;<i> poleze jen deset lidí dennì - místo toho to dìlej tak, abys z toho mìl sám
</I>&gt;&gt;<i> radost a mìl s tím co nejménì práce. Na druhou stranu, pro jakýkoliv dobøe
</I>&gt;&gt;<i> nakonfigurovaný zpùsob nasazení webové aplikace by nemìl být problém
</I>&gt;&gt;<i> zvádnout stovky po¾adavkù za sekundu, a pokud bude po¾adavkù více, stejnì
</I>&gt;&gt;<i> pøi takovém provozu se u¾ asi dávno bude¹ poohlí¾et po dal¹ím ¾eleze.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 3. ¾e nechce¹ pou¾ívat mod_python já osobnì chválím :) I kdy¾ pro to mám
</I>&gt;&gt;<i> jiné dùvody, ne¾ statistiky na webu. WSGI je univerzálnìj¹í. (Ne ¾e by v
</I>&gt;&gt;<i> mod_pythonu ne¹el pou¾ít WSGI handler, vìøím, ¾e je zde øeè o standardním
</I>&gt;&gt;<i> mod_python publisheru.) Mimochodem, abychom pøede¹li obvyklému poèáteènímu
</I>&gt;&gt;<i> zádrhelu - WSGI není to samé, co mod_wsgi. Jedno je rozhraní a druhé je
</I>&gt;&gt;<i> jedna z implementací tohoto rozhraní pro Apache.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 4. proè ti nefunguje ten print samozøejmì nevím, ale vzhledem k tomu, ¾e
</I>&gt;&gt;<i> print vypisuje na standardní výstup, asi to bude tím, ¾e svoji aplikaci
</I>&gt;&gt;<i> spou¹tí¹ pomocí nìèeho, co ten standardní výstup zavírá. Tøeba kdybych já
</I>&gt;&gt;<i> pomocí printu nìco napsal, tak se mi to vypí¹e rovnou do konzole, kde je
</I>&gt;&gt;<i> webovka spu¹tìná (tedy ne u¾ivateli do prohlí¾eèe), a na serveru
</I>&gt;&gt;<i> standardní výstup bývá (kdy¾ není zavøený) pøesmìrovaný do /dev/null,
</I>&gt;&gt;<i> tak¾e se to zapí¹e ví¹ kam. Pou¾ívat print ve webové aplikaci lze jen na
</I>&gt;&gt;<i> ladìní, jinak je to asi stejný nesmysl jako pou¾ívat ho v GUI aplikacích.
</I>&gt;&gt;<i> Jo a jestli si chtìl napsat nìco jako print(&quot;&lt;html&gt;... kilobajty balastu
</I>&gt;&gt;<i> ...&lt;/html&gt;&quot;), tak pou¾ij ¹ablonu, je to o dost jednodu¹¹í a pøehlednìj¹í
</I>&gt;&gt;<i> :)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Co by mìl být tvùj dal¹í krok - doporuèuji se podívat na Django. Je tu
</I>&gt;&gt;<i> dost pøíznivcù a u¾ivatelù Djanga, tak¾e i z tohoto pohledu je to
</I>&gt;&gt;<i> perspektivní.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Kdybys nechtìl jít do Djanga, tak se zkus tøeba podívat
</I>&gt;&gt;<i> <A HREF="nahttp://werkzeug.pocoo.org/a">nahttp://werkzeug.pocoo.org/a</A> rozklikni si to &quot;click here to see ...&quot;, je
</I>&gt;&gt;<i> tam docela pìkná ukázka. Jak vidí¹, snadno získá¹ objekt Request, ve
</I>&gt;&gt;<i> kterém je v¹e co potøebuje¹, odpovìï vrací¹ objektem tøídy Response a co
</I>&gt;&gt;<i> dìlá¹ mezi tím je na tobì, to ti jako PHP programátorovi pøijde asi
</I>&gt;&gt;<i> bli¾¹í. Werkzeug není zrovna hodnì pou¾ívaná vìc, ale mì se líbí, lze na
</I>&gt;&gt;<i> ni demonstrovat, jak to dìlat snadno a bez frameworkového molochu, proto
</I>&gt;&gt;<i> to zde uvádím. Takových podobných nástrojù jako Werkzeug je více.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Vùbec pro PHP programátora bude asi nejvìt¹í problém to, ¾e dìlat nìco v
</I>&gt;&gt;<i> Pythonu nebo Ruby neznamená jen nauèit se jazyk a tøeba jen jeden zpùsob
</I>&gt;&gt;<i> jak to zprovoznit, ale u¾ pøi ètení prvního tutorialu se na tebe valí vìci
</I>&gt;&gt;<i> jako ORM, MVC, URL routing, testování, ideálnì je¹tì základy
</I>&gt;&gt;<i> Linuxu/BSD/.... Tím se nenech odradit.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Tak¾e pøeji hodnì ¹tìstí, ale stojí to za to :)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> PM
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> PS. pøedpokládám, ¾e tvùj dal¹í dotaz do této konference bude, kde na to
</I>&gt;&gt;<i> najít hosting :)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 24.4.2010, at 16:01, Thomix wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Zdravím,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; u¾ nìkolik let programuju v php. Poslední dobou ¹ilhám po python pro
</I>&gt;&gt;<i> &gt; web. Nainstaloval jsem si modul WSGI a zkusil si par tutoriálù. Ov¹em
</I>&gt;&gt;<i> &gt; mám problém.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Napø.:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; def application(environ, start_response):
</I>&gt;&gt;<i> &gt;    status = '200 OK'
</I>&gt;&gt;<i> &gt;    output = 'hl'
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;    response_headers = [('Content-type', 'text/plain'),
</I>&gt;&gt;<i> &gt;                        ('Content-Length', str(len(output)))]
</I>&gt;&gt;<i> &gt;    start_response(status, response_headers)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;    return [output]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Tomuto celkem rozumím ale nechapu jak v tom více programovat ??? Kdy¾
</I>&gt;&gt;<i> &gt; si napí¹u print(&quot;neco&quot;); napi¹e to chybu a dále se to semnou nebaví.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Viz.:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; def application(environ, start_response):
</I>&gt;&gt;<i> &gt;    status = '200 OK'
</I>&gt;&gt;<i> &gt;    output = 'hl'
</I>&gt;&gt;<i> &gt;    print(&quot;neco&quot;);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;    response_headers = [('Content-type', 'text/plain'),
</I>&gt;&gt;<i> &gt;                        ('Content-Length', str(len(output)))]
</I>&gt;&gt;<i> &gt;    start_response(status, response_headers)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;    return [output]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Nìjak nechápu v èem je problém. Mod_python nechci pou¾ívat z dùvodu
</I>&gt;&gt;<i> &gt; slabé odezvialesponò dle statistik co jsem èetl na internetu. Mohl by
</I>&gt;&gt;<i> &gt; mì prosím nìkdo objasnit alespoò základ psaní ve WSGI ?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Dìkuji :)
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; Python mailing list
</I>&gt;&gt;<i> &gt; <A HREF="http://www.py.cz/mailman/listinfo/python">Pyt... at py.cz</A>
</I>&gt;&gt;<i> &gt;<A HREF="http://www.py.cz/mailman/listinfo/python">http://www.py.cz/mailman/listinfo/python</A>
</I>&gt;<i>
</I>&gt;<i> Na zaèátek bych stra¹nì rád podìkoval za nádherné odezvy, které mì
</I>&gt;<i> pøivádìjí na tu dle mého správnou cestu. Moje projekty nav¹tìvuje více
</I>&gt;<i> ne¾ deset lidí. Celový traffik je 4TB mìsièné, be¾í na VPS (ubuntu a
</I>&gt;<i> debian). Zpracovávám databáze o velikosti 100 a více mb. Pøíjde mì ¾e
</I>&gt;<i> PHP je v tomto pøi velké náv¹tevnosti stra¹nì pomalé. Proto by mì
</I>&gt;<i> zajímalo zda není chyba pou¾ívat python frameworky na velké projekty.
</I>&gt;<i> Pokud ne v èem by jste mì doporuèili je dìlat ? Rád bych si právì
</I>&gt;<i> udìlal i vlastní administraci a nechtìl bych vyu¾ívat nìco co u¾ je.
</I>&gt;<i> Je¹tì jednou dìkuji :)
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Python mailing list
</I>&gt;<i> <A HREF="http://www.py.cz/mailman/listinfo/python">Python at py.cz</A>
</I>&gt;<i> <A HREF="http://www.py.cz/mailman/listinfo/python">http://www.py.cz/mailman/listinfo/python</A>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-April/009678.html">[python] Python WSGI (zaèáteèník)
</A></li>
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/python/2010-April/009680.html">[python] Python WSGI (zaèáteèník)
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/python/2010-April/date.html#9679">[ data ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-April/thread.html#9679">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-April/subject.html#9679">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/python/2010-April/author.html#9679">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/python">Dal¹í informace o konferenci Python</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/python/2010-April/009679.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:18:45 GMT -->
</html>
