<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/tutor/2006-February/000184.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:36:11 GMT -->
<HEAD>
   <TITLE> [Tutor PyCZ] Help
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:tutor%40py.cz?Subject=%5BTutor%20PyCZ%5D%20Help&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/tutor/2006-February/000183.html">
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/tutor/2006-February/000185.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Tutor PyCZ] Help</H1>
    <B>Petr Prikryl</B> 
    <A HREF="mailto:tutor%40py.cz?Subject=%5BTutor%20PyCZ%5D%20Help&In-Reply-To="
       TITLE="[Tutor PyCZ] Help">PrikrylP na skil.cz
       </A><BR>
    <I>Støeda Únor 22 08:46:05 CET 2006</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/tutor/2006-February/000183.html">[Tutor PyCZ] Help
</A></li>
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/tutor/2006-February/000185.html">[Tutor PyCZ] Help me
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/tutor/2006-February/date.html#184">[ data ]</a>
              <a href="http://www.py.cz/pipermail/tutor/2006-February/thread.html#184">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/tutor/2006-February/subject.html#184">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/tutor/2006-February/author.html#184">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Úvodem, neznám Livewires, tak¾e se na to dívám
jako externista.

geon napsal...
&gt;<i> [...] Taky bych zkusil naznaèit jak se zbavit 
</I>&gt;<i> toho &quot;proklatého&quot; ;-) global v první funkci:
</I>&gt;<i> 
</I>&gt;<i> def vyrobHrace():
</I>&gt;<i>     xh=random.randint(0, 630)
</I>&gt;<i>     yh=random.randint(0, 479)
</I>&gt;<i>     Hrac_telo = circle( xh, yh, 5, filled=1)
</I>&gt;<i>     return xh, yh, Hrac_telo
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> xh, yh, Hrac_telo= vyrobHrace()
</I>&gt;<i> 
</I>&gt;<i> while 1:
</I>&gt;<i>     klavesy = keys_pressed()
</I>&gt;<i>     xh, yh = posunHrace(xh, yh)
</I>&gt;<i>     if &quot;q&quot; in klavesy:
</I>&gt;<i>         break
</I>&gt;<i> [...]
</I>
A pak u¾ je to jen krùèek k pou¾ívání tøíd.
Kdykoliv se dá nìco personifikovat, je to 
dobrý kandidát pro instanci nìjaké tøídy...

class Hrac(object):
    &quot;&quot;&quot;Tøída pro objekt hráèe.&quot;&quot;&quot;

    def __init__(self, x, y):
        &quot;&quot;&quot;Pøi vytváøení hráèe se zadává poèáteèní pozice.&quot;&quot;&quot;
        self.x = x
        self.y = y
        self.telo = circle(self.x, self.y, 5, filled=1)

    def posunRel(dx, dy):
        &quot;&quot;&quot;Relativní posun v souøadnicích.&quot;&quot;&quot;
        self.moveAbs(self.x + dx, self.y + dy)

    def posunAbs(x, y):
        &quot;&quot;&quot;Posun na absolutní souøadnice.&quot;&quot;&quot;
        self.x = x
        self.y = y
        # Tady nevím, jak je v pùvodním pøíkladu
        # realizována funkce move_to(), ale mohlo
        # by to být pou¾ito nìjak takto:
        move_to(self.telo, self.x, self.y)

Hráè by se pak vyrobil nìjak takto:

    hrac = Hrac(random.randint(0, 630),
                random.randint(0, 479))

A posunoval by se takto:

    hrac.posunRel(+1, 0)

Dal¹í problém, který vidím v pùvodním zdrojovém textu
spoèívá v tom, ¾e se testuje moc kláves najednou a 
po testu ka¾dé klávesy se poèká...

    if &quot;8&quot; in klavesy:
        yh=yh+1
        move_to(Hrac_telo, xh, yh)
        sleep(1)
    if &quot;9&quot; in klavesy:
        xh=xh+1
        yh=yh+1
        move_to(Hrac_telo, xh, yh)
        sleep(1)
[...]

    if &quot;3&quot; in klavesy:
        yh=yh-1
        xh=xh+1
        move_to(Hrac_telo, xh, yh)
        sleep(1)

Správnì by se v ostatních vìtvích mìlo pou¾ít elif,
to znamená, ¾e po úspì¹ném testu by se mìly provést
pøíslu¹né pøíkazy a dál u¾ nic (jen ten sleep jedenkrát).

Proto¾e v¾dycky testujeme jednu z osmi kláves
a výsledkem je zji¹tìní, o kolik se máme posunout
ve smìru x a o kolik ve smìru y (tj. o +1, 0 nebo -1).
Pokud vím pøesnì, kterou klávesu chci obslou¾it
(tedy ne mno¾inu kláves, ale jen jednu), pak mù¾e 
být výhodné pøedem nadefinovat a potom vyu¾ívat
takovouto tabulku:

    delta = { &quot;1&quot;: (-1, -1),
              &quot;2&quot;: ( 0, -1),
              &quot;3&quot;: (+1, -1),
              &quot;4&quot;: (-1,  0),
              &quot;5&quot;: ( 0,  0),  # viz dále
              &quot;6&quot;: ( 0, +1),
              &quot;7&quot;: (-1, +1),
              &quot;8&quot;: ( 0, +1),
              &quot;9&quot;: (+1, +1),
            }

A cyklus by pak vypadal nìjak takto:

    klavesy = keys_pressed()  # nebo jiná inicializace
    while &quot;q&quot; not in klavesy:
        for k in klavesy:
            dx, dy = delta[k]
            hrac.moveRel(dx, dy)

            # ©lo by taky napsat...
            # d = delta[k]
            # hrac.moveRel(d)

            # ... nebo jednodu¹e
            # hrac.moveRel(delta[k])

        sleep(1)
        klavesy = keys_pressed()

S tím for je to je¹tì zbyteènì zamotané. Dalo by se to
dále vylep¹it. Kdyby napøíklad existovala funkce, která 
by vracela buï èíselnou klávesu nebo &quot;q&quot;, mohla by v pøípadì
nestisknutí ¾ádné klávesy vracet napøíklad &quot;5&quot; (¾ádný 
posun). Výsledný cyklus by pak vypadal takto:

    k = &quot;5&quot;
    while k != &quot;q&quot;:
        hrac.moveRel(delta[k])
        sleep(1)
        k = stiknutaKlavesa()

Pro testování kolizí se dají pøímo testovat vnitøní
promìnné objektu hrac.x a hrac.y, které nahrazují
pùvodní xh a yh. Pøípadnì se dá nadefinovat metoda
tøídy Hrac takto:

         def kolize(self, x, y):
             return (self.x == x) and (self.y == y)

a pak nìkde pou¾ít...

    if hrac.kolize(x, y):
        akce(&quot;Byl jsi se¾rán robotem.&quot;)

pepr

P.S. Nezkou¹el jsem to. Budou tam asi chyby.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/tutor/2006-February/000183.html">[Tutor PyCZ] Help
</A></li>
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/tutor/2006-February/000185.html">[Tutor PyCZ] Help me
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/tutor/2006-February/date.html#184">[ data ]</a>
              <a href="http://www.py.cz/pipermail/tutor/2006-February/thread.html#184">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/tutor/2006-February/subject.html#184">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/tutor/2006-February/author.html#184">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/tutor">Dal¹í informace o konferenci Tutor</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/tutor/2006-February/000184.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:36:11 GMT -->
</html>
