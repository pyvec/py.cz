<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/tutor/2006-March/000223.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:36:10 GMT -->
<HEAD>
   <TITLE> [Tutor PyCZ] Livewires V - seznam a promìnné
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:tutor%40py.cz?Subject=%5BTutor%20PyCZ%5D%20Livewires%20V%20-%20seznam%20a%20%3D%3FISO-8859-2%3FQ%3Fprom%3DECnn%3F%3D%0A%09%3D%3FISO-8859-2%3FQ%3F%3DE9%3F%3D&In-Reply-To=ca0bf9ff0603051204j28cd6cb0y%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/tutor/2006-March/000222.html">
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/tutor/2006-March/000225.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Tutor PyCZ] Livewires V - seznam a promìnné</H1>
    <B>geon</B> 
    <A HREF="mailto:tutor%40py.cz?Subject=%5BTutor%20PyCZ%5D%20Livewires%20V%20-%20seznam%20a%20%3D%3FISO-8859-2%3FQ%3Fprom%3DECnn%3F%3D%0A%09%3D%3FISO-8859-2%3FQ%3F%3DE9%3F%3D&In-Reply-To=ca0bf9ff0603051204j28cd6cb0y%40mail.gmail.com"
       TITLE="[Tutor PyCZ] Livewires V - seznam a promìnné">geon na post.cz
       </A><BR>
    <I>Nedìle Bøezen  5 21:49:26 CET 2006</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/tutor/2006-March/000222.html">[Tutor PyCZ] Livewires V - seznam a promìnné
</A></li>
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/tutor/2006-March/000225.html">[Tutor PyCZ] predani instance v C++ funkci v pythonu
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/tutor/2006-March/date.html#223">[ data ]</a>
              <a href="http://www.py.cz/pipermail/tutor/2006-March/thread.html#223">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/tutor/2006-March/subject.html#223">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/tutor/2006-March/author.html#223">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Tomá¹ Bìlono¾ník napsal(a):
&gt;<i> Ahoj,
</I>&gt;<i> opìt jsem se zasekl a potøeboval bych pomoct. Ke konci tutoriálu u¾
</I>&gt;<i> toti¾ potøebných a nových vìcí pøibývá a nápovìd rapidnì ubývá. Sice
</I>&gt;<i> se mi podaøilo program napsat tak, aby jak¾ tak¾ celý fungoval, ale je
</I>&gt;<i> tam spousta malých chybièek, je to rozvleklý a úplnì jiný ne¾ to mìlo
</I>&gt;<i> být. Vrátím se k poèátku problému. Mám program, kde hráèe posunovaného
</I>&gt;<i> stisky kláves honí &quot;robot&quot; a kdy¾ ho do¾ene, hráè prohrál. Mìl bych
</I>&gt;<i> pøidìlat dal¹í roboty. Autor tutoriálu dává rady:
</I>&gt;<i>     *   Vytvoøte prázdný list robots.
</I>&gt;<i>     * Opakujte pro ka¾dého robota, kterého chceme:
</I>&gt;<i>           o Pøidejte robota do seznamu robotù.
</I>&gt;<i>           o Vytvoøte náhodnì souøadnice místa, kde by se mìl robot
</I>&gt;<i> narodit. Nezapomeòte nastavit atribut srot na 0.
</I>&gt;<i>           o Opakujte while &quot;pokud se tento robot srazil s jiným&quot;:
</I>&gt;<i>                 + Zkuste jiné místo.
</I>&gt;<i>           o Vytvoøte tìlo robota a ulo¾te ho do jeho atributu telo.
</I>&gt;<i> Kdy¾ jsem se to sna¾il dìlat takto, tøeba se mi i podaøilo vyrobit pìt
</I>&gt;<i> robotích tìl, ale pohybovalo se pouze jedno a ostatní nereagovaly ani
</I>&gt;<i> na kontakt. Dejme tomu tedy, ¾e mám tuto funkci pro tvorbu robotù:
</I>&gt;<i> def vyrobRobota(pocet_opakovani, seznam):
</I>&gt;<i>   
</I>Nevím, proè zde pøedává¹ funkci promìnné, které jsou lokální, tedy 
platné jen uvnitø funkce. Asi ti není poøád zcela zøejmý princip 
pøedávání promìnný a zamìòuje¹ ho s definicí promìnné na lokální úrovni.
Já bych to tedy spí¹e vidìl takto (pokud ov¹em nechce¹ z hlavního 
programu mìnit poèty Robotù, ale tos ty nemìl v tomto smyslu pou¾ito):
def vyrobRobota():
    pocet_opakovani=0
    seznam=[]
...
...

return seznam  # seznam vrátit, aby nezùstal lokální a nezanikl pøi 
opu¹tìní fce ..
&gt;<i>     robot = Robot()
</I>&gt;<i>   
</I>aha, tady bude ta hlavní chyba, robot pøeci musí vzniknout poka¾dý nový, 
èili? tato øádka patøí do cyklu! proto ti to asi fungovalo jak 
popisuje¹, ¾e se hýbal jen jeden a o hodnì rychleji
&gt;<i>     while pocet_opakovani &lt; 5:
</I>&gt;<i>   
</I>Tohle ti nemù¾e fungovat, nikde tam nezvy¹uje¹ promìnnou 
pocet_opakovani. A je lep¹í, pokud pøesnì zná¹ poèet opakování , pou¾ít 
cyklus for, tedy napø. for i in range(5): ....
&gt;<i>   
</I>&gt;<i> 	# Budoucí souøadnice robota
</I>&gt;<i>         robot.x=random.randint(8, 631)
</I>&gt;<i>         robot.y=random.randint(8, 471)
</I>&gt;<i>
</I>&gt;<i>         # Èást funkce zaji¹»ující, ¾e hráè a robot nezaènou na sobì.
</I>&gt;<i>         robot_x_round = robot.x / 10
</I>&gt;<i>         hrac_x_round = hrac.x / 10
</I>&gt;<i>         robot_y_round = robot.y / 10
</I>&gt;<i>         hrac_y_round = hrac.y / 10
</I>&gt;<i>         while robot_x_round == hrac_x_round and robot_y_round == hrac_y_round:
</I>&gt;<i>   
</I>Tady (opìt  - u¾ jsem to jednou psal) se nìkdy vùbec nedostane¹ z cyklu, 
proto¾e uvnitø nikde nemìní¹ promìnné z podmínky za while, tedy  
robot_x_round a robot_y_round. Pro vìt¹í pøehlednost bych tyto promìnné 
pou¾il jako atributy instance, tedy napø. robot.roundx, ....
&gt;<i>             robot.x=random.randint(8, 631)
</I>&gt;<i>             robot.y=random.randint(8, 471)
</I>&gt;<i>             hrac.x=random.randint(8, 631)
</I>&gt;<i>             hrac.y=random.randint(8, 471)
</I>&gt;<i>   
</I>Myslím, ¾e pozice hráèe by se mìnit nemìla ;-) , jak k tomu pøijde, aby 
se teleportoval, kdy¾ se na nìm náhodou narodí robot :-)
&gt;<i>         seznam.append(robot)
</I>&gt;<i>   
</I>Zde to nevadí, ale obecnì je lépe pøidávat do seznamu, a¾ kdy¾ je v¹e 
hotové, tedy bych  seznam.append(robot) dal a¾ za robot.telo=.....
&gt;<i>         robot.telo = box(robot.x-5,robot.y-5,robot.x+5,robot.y+5,
</I>&gt;<i> filled=1, colour=Colour.dark_blue)    # Popis tìla robota
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;<i> Toto mi vytvoøí seznam s pìti instancemi robot tøídy Robot. Jak ale
</I>&gt;<i> udìlat, aby se v této funkci v¹ichni hýbali?
</I>&gt;<i> def posunRobota(hrac):
</I>&gt;<i>     for robot in seznam:     #tahle øádka je tu navíc, tak jsem to zkou¹el
</I>&gt;<i>         if robot.x &lt; hrac.x:
</I>&gt;<i>             robot.x = robot.x + 5
</I>&gt;<i>         elif robot.x &gt; hrac.x:
</I>&gt;<i>             robot.x = robot.x - 5
</I>&gt;<i>         if robot.y &lt; hrac.y:
</I>&gt;<i>             robot.y = robot.y + 5
</I>&gt;<i>         elif robot.y &gt; hrac.y:
</I>&gt;<i>             robot.y = robot.y - 5
</I>&gt;<i>         move_to(robot.telo, robot.x, robot.y)
</I>&gt;<i>         sleep(0.2)
</I>&gt;<i>   
</I>&gt;<i> Pøijde mi, jako by si ti roboti v seznamu nedokázali pamatovat svoje
</I>&gt;<i> .x a .y nebo spí¹ za toho robota, kterým se má hýbat, byl pokládán
</I>&gt;<i> poøád jeden a ten samý, proto¾e se hýbe mnohem rychleji ne¾ hráè. Tomu
</I>&gt;<i> by nasvìdèovalo i to, ¾e jsem kdesi èetl, ¾e jména v Pythonu jsou
</I>&gt;<i> prakticky jen odkazy na objekty.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   
</I>tak to jsem psal nahoøe.

Dál ji¾ neètu (snad nìkdo jiný) , ale jedna rada na závìr - mo¾ná to ji¾ 
zná¹, ale mo¾ná ne - zkus na promptu zkou¹et, po dokonèení programu at 
po chybì nebo normálnì, vìci, o kterých si myslí¹, ¾e by mìly nìjak být 
- napø. jestli v seznamu ní je pìt èlenù a pro jednoho, zkusmo, jestli 
má atributy, co má mít ... apod. Pøi tomto zpùsobu práci já osobnì si 
tyto promìnné, které jsou èasto schovány uvnitø funkcí globalizuji, 
proto¾e po chybì se nalézá¹ v hlavní èásti programu a tam se lokální 
promìnné funkcí tváøí, ¾e neexistují.

Také by nebylo od vìci vyzkou¹et Debugger...  v IDLE menu Debugger  -  a 
peèlivì sledovat promìnné, jestli se ti mìní jak mají ;-)

Ahoj!

-- 
geon
Vyjímka je pravidlo. Rekurzivní.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/tutor/2006-March/000222.html">[Tutor PyCZ] Livewires V - seznam a promìnné
</A></li>
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/tutor/2006-March/000225.html">[Tutor PyCZ] predani instance v C++ funkci v pythonu
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/tutor/2006-March/date.html#223">[ data ]</a>
              <a href="http://www.py.cz/pipermail/tutor/2006-March/thread.html#223">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/tutor/2006-March/subject.html#223">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/tutor/2006-March/author.html#223">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/tutor">Dal¹í informace o konferenci Tutor</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/tutor/2006-March/000223.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:36:10 GMT -->
</html>
