<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 
<!-- Mirrored from www.py.cz/pipermail/tutor/2006-March/000210.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:36:10 GMT -->
<HEAD>
   <TITLE> [Tutor PyCZ] Globalni,
	lokalni a volne promenno (bylo Dalsi problem s Livewires)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:tutor%40py.cz?Subject=%5BTutor%20PyCZ%5D%20Globalni%2C%0A%09lokalni%20a%20volne%20promenno%20%28bylo%20Dalsi%20problem%20s%20Livewires%29&In-Reply-To=E8AE1CAFC84D634A9CCC887B8AAB15EC090766%40skil01.skil.mistni">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="http://www.py.cz/pipermail/tutor/2006-March/000203.html">
   <LINK REL="Next"  HREF="http://www.py.cz/pipermail/tutor/2006-March/000211.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Tutor PyCZ] Globalni,
	lokalni a volne promenno (bylo Dalsi problem s Livewires)</H1>
    <B>Tomá¹ Bìlono¾ník</B> 
    <A HREF="mailto:tutor%40py.cz?Subject=%5BTutor%20PyCZ%5D%20Globalni%2C%0A%09lokalni%20a%20volne%20promenno%20%28bylo%20Dalsi%20problem%20s%20Livewires%29&In-Reply-To=E8AE1CAFC84D634A9CCC887B8AAB15EC090766%40skil01.skil.mistni"
       TITLE="[Tutor PyCZ] Globalni,
	lokalni a volne promenno (bylo Dalsi problem s Livewires)">rebelme na gmail.com
       </A><BR>
    <I>Ètvrtek Bøezen  2 00:19:07 CET 2006</I>
    <P><UL>
        <LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/tutor/2006-March/000203.html">[Tutor PyCZ] Globalni,
	lokalni a volne promenno (bylo Dalsi problem s Livewires)
</A></li>
        <LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/tutor/2006-March/000211.html">[Tutor PyCZ] Milované Livewires - A najednou tam lezou tøídy
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/tutor/2006-March/date.html#210">[ data ]</a>
              <a href="http://www.py.cz/pipermail/tutor/2006-March/thread.html#210">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/tutor/2006-March/subject.html#210">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/tutor/2006-March/author.html#210">[ autora ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Díky za v¹eosvìtlující vysvìtlení. Teï je jasno :), jsem si to
vytisknul a pripich na polystyren za monitorem, kdybych nìco zas
zapomnìl tak to mít aspoò po ruce.

2006/3/1, Petr Prikryl &lt;<A HREF="http://www.py.cz/mailman/listinfo/tutor">PrikrylP na skil.cz</A>&gt;:
&gt;<i> geon
</I>&gt;<i> &gt; Tomá¹ Bìlono¾ník napsal(a):
</I>&gt;<i> &gt; &gt; [...]
</I>&gt;<i> &gt; &gt; def posunHrace():
</I>&gt;<i> &gt; &gt;     stisky = keys_pressed()
</I>&gt;<i> &gt; &gt;     if &quot;2&quot; in stisky:
</I>&gt;<i> &gt; &gt;         yh = yh - 10
</I>&gt;<i> &gt; &gt;         move_to(Hrac_telo, xh, yh)
</I>&gt;<i> &gt; &gt;         return yh
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; [...] Hází mi to ale chybu &quot;local variable 'yh'
</I>&gt;<i> &gt; &gt; referenced before assignment&quot;. Chápu to
</I>&gt;<i> &gt; &gt; tak, ¾e jsem promìnnou yh zmínil je¹tì pøedtím,
</I>&gt;<i> &gt; &gt; ne¾ jsem jí pøiøadil nìjakou hodnotu. Ale proè
</I>&gt;<i> &gt; &gt; si tu hodnotu nevezme sám z vy¹¹ích pater
</I>&gt;<i> &gt; &gt; programu, jako to udìlal, kdy¾ øádek move_to vypadal
</I>&gt;<i> &gt; &gt; &quot;move_to(Hrac_telo, xh, yh-10)&quot;.
</I>&gt;<i>
</I>&gt;<i> &gt; [...] Trocha teorie ode mne: nìkteré promìnné
</I>&gt;<i> &gt; skuteènì funkce doká¾e brát zezhora - zde tøeba Hrac_telo
</I>&gt;<i> &gt; nebo tvùj vý¹e uvádìný move_to(Hrac_telo, xh, yh-10).
</I>&gt;<i> &gt; Jsou to ale vzdy jen ty promìnné, které se ve funkci
</I>&gt;<i> &gt; nemìní - jsou tam jen jakoby read-only. Proto ti to
</I>&gt;<i> &gt; házelo tu chybu, proto¾e jsi chtìl zmìnit read-only
</I>&gt;<i> &gt; promìnnou.
</I>&gt;<i>
</I>&gt;<i> Pokud ve funkci pou¾iji promìnnou a nesna¾ím
</I>&gt;<i> se do ní pøiøazovat, jde o takzvanou volnou promìnnou
</I>&gt;<i> (free variable). Volnou se nazývá proto, proto¾e
</I>&gt;<i> v bloku kódu neexistuje pevná vazba mezi jménem
</I>&gt;<i> 'x' a konkrétním místem, kde je hodnota ulo¾ena.
</I>&gt;<i> V okam¾iku odkazu se teprve poloha &quot;ve vy¹¹ích patrech&quot;
</I>&gt;<i> bude zji¹»ovat.
</I>&gt;<i>
</I>&gt;<i> Pokud do promìnné nìco pøiøadím, stává se lokální
</I>&gt;<i> promìnnou v daném bloku kódu. Vyytváøí se pevná
</I>&gt;<i> vazba z mého lokálního prostoru. U¾ nemù¾eme hovoøit
</I>&gt;<i> o volné promìnné (tj. o promìnné definované nìkde
</I>&gt;<i> ve vy¹¹ích patrech). Pevná vazba na lokální prostor
</I>&gt;<i> se vytváøí i tehdy, kdy¾ se do této promìnné
</I>&gt;<i> pøiøazuje a¾ pozdìji (ve stejném bloku), ne¾ kdy¾
</I>&gt;<i> se z ní ète. Pøíklad:
</I>&gt;<i>
</I>&gt;<i> soubor a.py
</I>&gt;<i> =====================================
</I>&gt;<i> x = 10
</I>&gt;<i>
</I>&gt;<i> def funkce1():
</I>&gt;<i>     print x
</I>&gt;<i>
</I>&gt;<i> def funkce2():
</I>&gt;<i>     return x
</I>&gt;<i>
</I>&gt;<i> print x            # (1)
</I>&gt;<i> funkce1()          # (2)
</I>&gt;<i> print funkce2()    # (3)
</I>&gt;<i> =====================================
</I>&gt;<i>
</I>&gt;<i> Pøíkaz &quot;print x&quot; na øádku (1) vytiskne
</I>&gt;<i> podle oèekávání hodnotu 10. Jde o promìnnou
</I>&gt;<i> definovanou na stejné úrovni.
</I>&gt;<i>
</I>&gt;<i> Na øádku (2) voláme funkce1() a ta se
</I>&gt;<i> v pøíkazu &quot;print x&quot; tiskne promìnou, která
</I>&gt;<i> je definována na &quot;vy¹¹í úrovni&quot;. Jde ale
</I>&gt;<i> o volnou promìnnou, která se postupnì hledá
</I>&gt;<i> v nadøízených lokálních prostorech (zde
</I>&gt;<i> ¾ádné nemáme) a nakonec v prostoru globálním.
</I>&gt;<i>
</I>&gt;<i> Na øádku (3) tiskneme výsledek, který získáváme
</I>&gt;<i> voláním funkce2(). V jejím tìle se pouze vrací
</I>&gt;<i> hodnota volné promìnné x. Jde o podobný pøípad,
</I>&gt;<i> jako u funkce1(). Hodnota promìnné x se pouze
</I>&gt;<i> zpracuje jiným zpùsobem.
</I>&gt;<i>
</I>&gt;<i> Zkuste ale tohle:
</I>&gt;<i>
</I>&gt;<i> soubor c.py
</I>&gt;<i> =====================================
</I>&gt;<i> x = 10
</I>&gt;<i>
</I>&gt;<i> def funkce3():
</I>&gt;<i>     x = x + 1
</I>&gt;<i>     print x
</I>&gt;<i>
</I>&gt;<i> funkce3()
</I>&gt;<i> =====================================
</I>&gt;<i>
</I>&gt;<i> Pøi pokusu o spu¹tìní se uká¾e toto...
</I>&gt;<i>
</I>&gt;<i> C:\tmp&gt;python c.py
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i>   File &quot;c.py&quot;, line 7, in ?
</I>&gt;<i>     funkce3()
</I>&gt;<i>   File &quot;c.py&quot;, line 4, in funkce3
</I>&gt;<i>     x = x + 1
</I>&gt;<i> UnboundLocalError: local variable 'x' referenced before assignment
</I>&gt;<i>
</I>&gt;<i> Jak u¾ bylo uvedeno vý¹e, pøiøazení &quot;x = x + 1&quot;
</I>&gt;<i> zpùsobí, ¾e funkce3 u¾ o promìnné x chce uva¾ovat
</I>&gt;<i> jako o lokální promìnné. Jen¾e tato lokální promìnná
</I>&gt;<i> je pou¾ita na pravé stranì pøiøazení a zatím jí
</I>&gt;<i> nebyla pøiøazena ¾ádná hodnota, tj. &quot;proveden
</I>&gt;<i> odkaz na lokální promìnnou 'x', které dosud nebylo
</I>&gt;<i> nic pøiøazeno&quot;. Ona vlastnì promìnná x zatím
</I>&gt;<i> neexistuje a chceme ji vytvoøit a pøiøadit
</I>&gt;<i> jí její neexistující hodnotu zvìt¹enou o jednièku.
</I>&gt;<i>
</I>&gt;<i> Ve stejném bloku kódu oznaèuje jedno jméno
</I>&gt;<i> jen jednu promìnnou. Python nedovolí, abychom
</I>&gt;<i> se na tuto promìnnou dívali chvíli jako na volnou
</I>&gt;<i> promìnnou (vytvoøenou ve vy¹¹ích patrech) a o nìco
</I>&gt;<i> pozdìji jako na lokální promìnnou. Z tohoto dùvodu
</I>&gt;<i> sel¾e i následující pøíklad:
</I>&gt;<i>
</I>&gt;<i> soubor d.py
</I>&gt;<i> =====================================
</I>&gt;<i> x = 10
</I>&gt;<i>
</I>&gt;<i> def funkce4():
</I>&gt;<i>     print x
</I>&gt;<i>     x = x + 1
</I>&gt;<i>
</I>&gt;<i> funkce4()
</I>&gt;<i> =====================================
</I>&gt;<i>
</I>&gt;<i> C:\tmp\a&gt;python d.py
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i>   File &quot;d.py&quot;, line 7, in ?
</I>&gt;<i>     funkce4()
</I>&gt;<i>   File &quot;d.py&quot;, line 4, in funkce4
</I>&gt;<i>     print x
</I>&gt;<i> UnboundLocalError: local variable 'x' referenced before assignment
</I>&gt;<i>
</I>&gt;<i> Tentokrát sel¾e u¾ pøíkaz &quot;print x&quot;, který
</I>&gt;<i> ve funkce1() normálnì fungoval. Tehdy jsme se
</I>&gt;<i> ale na x dívali jako na volnou promìnnou
</I>&gt;<i> (definovanou jinde). Jen¾e pøíkaz &quot;x = x + 1&quot;
</I>&gt;<i> ve funkce4() zpùsobí, ¾e x nemù¾e být volnou
</I>&gt;<i> promìnnou. V okam¾iku definice funkce4() u¾ se
</I>&gt;<i> rozhodne o tom, ¾e x bude lokální promìnná
</I>&gt;<i> a nikdy jinak. Za tìchto okolností se na pøíkaz
</I>&gt;<i> &quot;print x&quot; pohlí¾í jako na pokus zobrazit obsah
</I>&gt;<i> dosud neexistující promìnné.
</I>&gt;<i>
</I>&gt;<i> Pokud by Python nebyl tak pøísný a mìnil
</I>&gt;<i> by charakter promìnné z volné na lokální
</I>&gt;<i> a¾ podle potøeby, mohlo by to fungovat,
</I>&gt;<i> ale pro èlovìka by se zdrojový text stával
</I>&gt;<i> nepøehledným a v komplikovanìj¹ích pøípadech
</I>&gt;<i> by to mohlo vést k tì¾ko odhalitelným chybám.
</I>&gt;<i> U¾ jen v pøípadì &quot;x = x + 1&quot; bychom vlastnì
</I>&gt;<i> nemohli øíci, co ten pøíkaz dìlá, proto¾e
</I>&gt;<i> bychom nemìli jistotu, ¾e se na obou stranách
</I>&gt;<i> pøiøazení pracuje se stejnou promìnnou x.
</I>&gt;<i>
</I>&gt;<i> pepr
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Tutor mailing list
</I>&gt;<i> <A HREF="http://www.py.cz/mailman/listinfo/tutor">Tutor na py.cz</A>
</I>&gt;<i> <A HREF="http://www.py.cz/mailman/listinfo/tutor">http://www.py.cz/mailman/listinfo/tutor</A>
</I>&gt;<i>
</I>

--
&quot;Any fool who would die for honor is better off dead.&quot; - Cabal Patriarch
&quot;I don't know what the next World War will be fought with, but the
World War after that will be fought with sticks and stones.&quot; - Albert
Einstein
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Pøedchozí pøíspìvek: <A HREF="http://www.py.cz/pipermail/tutor/2006-March/000203.html">[Tutor PyCZ] Globalni,
	lokalni a volne promenno (bylo Dalsi problem s Livewires)
</A></li>
	<LI>Následující pøíspìvek: <A HREF="http://www.py.cz/pipermail/tutor/2006-March/000211.html">[Tutor PyCZ] Milované Livewires - A najednou tam lezou tøídy
</A></li>
         <LI> <B>Zprávy tøídìné podle:</B> 
              <a href="http://www.py.cz/pipermail/tutor/2006-March/date.html#210">[ data ]</a>
              <a href="http://www.py.cz/pipermail/tutor/2006-March/thread.html#210">[ vlákna ]</a>
              <a href="http://www.py.cz/pipermail/tutor/2006-March/subject.html#210">[ subjektu ]</a>
              <a href="http://www.py.cz/pipermail/tutor/2006-March/author.html#210">[ autora ]</a>
         </LI>
       </UL>
<hr>
<a href="http://www.py.cz/mailman/listinfo/tutor">Dal¹í informace o konferenci Tutor</a><br>
</body>
<!-- Mirrored from www.py.cz/pipermail/tutor/2006-March/000210.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:36:10 GMT -->
</html>
