<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en">
                         
  
<!-- Mirrored from www.py.cz/TkinterCommand/diff by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:02:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta http-equiv="Content-Type"
          content="text/html;charset=utf-8" />
    
    <link rel="stylesheet" type="text/css"
          href="../FrontPage/stylesheet.css" />
    <title>PyCZ: Programovací jazyk Python, aplikační servery a frameworky, atd. TkinterCommand</title>
    
    
    <meta name="robots" content="noindex,nofollow" />
  
  
  </head>
  <body>
    
    <div>
      <div id="pageheaderall" class="pageheader">
      <div id="accesskeys">
      <a accesskey="0"
         href="http://www.py.cz/TkinterCommand/helpaccesskeys"></a>
      <a accesskey="f" href="http://www.py.cz/FrontPage"></a>
      <a accesskey="c"
         href="http://www.py.cz/FrontPage/contents#TkinterCommand"></a>
      <a accesskey="r"
         href="http://www.py.cz/FrontPage/recentchanges"></a>
      <a accesskey="" href="http://www.py.cz/FrontPage"></a>
      
      <a accesskey="i"
         href="http://www.py.cz/FrontPage/wikiindex"></a>
      
      <a accesskey="o"
         href="http://www.py.cz/FrontPage/useroptions?redirectURL=http%3A//www.py.cz/TkinterCommand"></a>
      <a accesskey="h" href="http://www.py.cz/HelpPage"></a>
      
      
      <a accesskey="n"
         href="http://www.py.cz/TkinterGUIBuilders"></a>
      <a accesskey="p"
         href="http://www.py.cz/TkinterAplikace"></a>
      <a accesskey="u" href="http://www.py.cz/Tkinter"></a>
      <a accesskey="v"
         href="http://www.py.cz/TkinterCommand"></a>
      <a accesskey="m"
         href="http://www.py.cz/TkinterCommand/subscribeform"></a>
      <a accesskey="b"
         href="http://www.py.cz/TkinterCommand/backlinks"></a>
      <a accesskey="d"
         href="http://www.py.cz/TkinterCommand/diff"></a>
      <a accesskey="y"
         href="http://www.py.cz/TkinterCommand/history"></a>
      <a accesskey="e"
         href="http://www.py.cz/TkinterCommand/editform"></a>
      
    </div>
      <div id="navlinks" class="linkpanel">
      <table class="shade1" width="100%" border="0" cellspacing="0">
        <tr>
          <td align="right">
            
      <a href="http://www.py.cz/FrontPage"
         title="show front page">
      <span>home</span></a>
      <a href="http://www.py.cz/FrontPage/contents#TkinterCommand"
         title="show wiki contents">
      <span>contents</span></a>
      <a href="http://www.py.cz/FrontPage/recentchanges"
         title="show wiki recent changes">
      <span>changes</span></a>
      
      <a title="show wiki index"
         href="http://www.py.cz/FrontPage/wikiindex">
      <span>index</span></a>
      
      <a title="show wiki options"
         href="http://www.py.cz/FrontPage/useroptions?redirectURL=http%3A//www.py.cz/TkinterCommand">
      <span>options</span></a>
      <a title="show help page"
         href="http://www.py.cz/HelpPage">
      <span>help</span></a>
    
            
      
      <a href="http://www.py.cz/TkinterCommand/subscribeform"
         title="configure email subscription to this page or site">
        
      <span>subscribe</span></a>
      
      <a href="http://www.py.cz/TkinterCommand/editform"
         title="edit-page (last edited 4 years ago by geon)">
      <span>edit</span></a>
      
    
          </td>
        </tr>
      </table>
    </div>
      <div id="pageheader">
        <form method="GET"
              action="http://www.py.cz/FrontPage/searchwiki">
          <table width="100%" border="0" cellspacing="0">
            <tr>
              <!-- logo -->
              <td id="logo" width="1%" valign="top"
                  class="logo">
                
                  <a title="go to home page"
                     href="http://www.py.cz/FrontPage">
                    
                    <img src="http://www.py.cz/TkinterCommand/logo.jpg" border="0" alt="home" />
                    
                  </a>
                  &nbsp;
                
              </td>
              <!-- page name and context (parent topics) -->
              <td align="left" width="79%">
                
                  <small><ul class="outline expandable">
 <li><a href="http://www.py.cz/PythonRoot" name="PythonRoot">PythonRoot</a>
<ul class="outline expandable">
  <li><a href="http://www.py.cz/GrafickaProstrediGUI" name="GrafickaProstrediGUI">GrafickaProstrediGUI</a>
<ul class="outline expandable">
   <li><a href="http://www.py.cz/Tkinter" name="Tkinter">Tkinter</a>
<ul class="outline expandable">
   <li><h1 style="display:inline;"><a href="http://www.py.cz/TkinterCommand/backlinks" title="which pages link to this one ?" name="TkinterCommand">TkinterCommand</a></h1></li>
</ul>
   </li>
</ul>
  </li>
</ul>
 </li>
</ul>
</small>
                
                
              </td>
              <!-- search form & page info -->
              <td class="searchbox" width="20%" align="right">
                
                  <input id="searchinput" class="formfield"
                         name="expr" type="text" size="20"
                         maxlength="100" value=""
                         title="search all pages" /><br />
                  <span class="lasteditor">last edited  <a href="http://www.py.cz/TkinterCommand/history" title="show last edit" >4 years</a> ago by <b>geon</b></span><br>
                  <span class="creator">created 2007-04-01</span>   
                
                
              </td>
            </tr>
          </table>
        </form>
      </div>
      <div id="ratingform" align="right">  
      <!-- page rating form -->
      <div>
        <a name="ratingform"></a>
        <style type="text/css">
          input.rating {border:none;}
        </style>
        <form method="POST" id="ratingform"
              action="http://www.py.cz/TkinterCommand/vote">
           <input type="image" name="vote0" value="0"
                  alt="0" class="rating" width="14"
                  height="13"
                  src="http://www.py.cz/p_/sp"
                  style=""
                  title="click to vote 0 (poor) for this page (0 votes)" /><input
    type="image" name="vote1" value="1" alt="1"
    class="rating" src="http://www.py.cz/TkinterCommand/misc_/ZWiki/star_icon" style=""
    title="click to vote 1 (average) for this page (0 votes)" /><input
    type="image" name="vote2" value="2" alt="2"
    class="rating" src="http://www.py.cz/TkinterCommand/misc_/ZWiki/blank_star_icon"
    style=""
    title="click to vote 2 (above average) for this page (0 votes)" /><input
    type="image" name="vote3" value="3" alt="3"
    class="rating" src="http://www.py.cz/TkinterCommand/misc_/ZWiki/blank_star_icon"
    style=""
    title="click to vote 3 (good) for this page (0 votes)" /><input
    type="image" name="vote4" value="4" alt="4"
    class="rating" src="http://www.py.cz/TkinterCommand/misc_/ZWiki/blank_star_icon"
    style=""
    title="click to vote 4 (great) for this page (0 votes)" /><input
    type="image" name="vote5" value="5" alt="5"
    class="rating" src="http://www.py.cz/TkinterCommand/misc_/ZWiki/blank_star_icon"
    style=""
    title="click to vote 5 (superb) for this page (0 votes)" />
        </form>
      </div>
    </div>
    </div>
      <h1>Edit detail for TkinterCommand revision 2 of 1</h1>
      <div class="formcontent">
        <table border="0" cellspacing="0" width="100%">
          <tr valign="top">

            <td align="left">
              <form style="display:inline"
                    action="http://www.py.cz/TkinterCommand">
                <input type="submit" name="history:method"
                       value="Return to edit history" />
                
              </form>
            </td>

            <td align="center">
              <form style="display:inline"
                    action="http://www.py.cz/TkinterCommand/diff">
                <input type="hidden" name="rev" />
                
                <input disabled="1" value=" &lt; "
                       type="submit" accesskey="," />
              </form>
              <a style="font-weight:bold"
                 href="http://www.py.cz/TkinterCommand/diff?rev=2">2</a>
              <form style="display:inline"
                    action="http://www.py.cz/TkinterCommand/diff">
                <input type="hidden" name="rev" />
                
                <input disabled="1" value=" &gt; "
                       type="submit" accesskey="." />
              </form>
            </td>

            <td align="right">
              <form style="display:inline"
                    action="http://www.py.cz/TkinterCommand">
                <input type="hidden" name="rev" value="2" />
                <input value="Revert to this version"
                       type="submit" name="revert:method"
                       disabled="disabled" />
              </form>
            </td>

          </tr>
          <tr valign="top">
            <td colspan="3">
              <span>Editor:</span> geon
              <br />
              <span>Time:</span> 2011/10/12 20:35:46 GMT+2
            </td>
          </tr>
          <tr valign="top">
            <td colspan="3">
              <span>Note:</span> <span
    style="font-weight:bold; font-style:italic;">pridavani znacek 2x-3x</span>
            </td>
          </tr>
        </table>
        <hr />
        <pre>
<b>changed:</b><span style="color:red;text-decoration:line-through">
-</span><span style="color:green">
.. image:: py30.png
   :align: right


Command, Lambda, functools ... Voláme funkce z tlačítka
----------------------------------------

Ukázkový příklad
..................

Nejjednoduší příklady nastávají na tutoriálních příkladech tisku, které v praxi téměř nikdy nenastávají ;-) ::
    
  # -*- coding: utf-8 -*-
  from tkinter import *
  
  def tisk():
      print (1)
  
  hlavni=Tk()
  
  # všimněte si, že tu není &quot;tisk()&quot;! ale jen &quot;tisk&quot;!
  tl=Button(text=&quot;tiskni&quot;, command=tisk)
  tl.pack()
  
  hlavni.mainloop()

Za povšimnutí rozhodně stojí, že se nepoužívá *tisk()*, ale jen *tisk*. Použijete-li tisk(), program nebude fungovat. Vyzkoušejte.

Funkce s parametrem
....................

Častěji chceme funkci volat s nějakým parametrem Z předchozího odstavce již víme, že prosté *command=tisk(10)* fungovat nebude. Můžeme použít lambda funkci::

  
  # -*- coding: utf-8 -*-
  from tkinter import *
  
  def tisk(x):
      print (x)
  
  hlavni=Tk()
  
  # všimněte si, že tu není jen &quot;tisk()&quot;! ale lambda: tisk()
  tl=Button(text=&quot;tiskni&quot;, command= lambda: tisk(10))
  tl.pack()
  
  hlavni.mainloop()
    
Více tlačítek na jednu funkci s parametrem
...........................................

Nefunkční kód může vypadat třeba takto::

  
  from tkinter import*
  
  def pis(co):
      print (co)
  
  okno=Tk()
  menubar = Menu(okno)
  menu = Menu(menubar, tearoff=0)
  cisla=[1,2,3,4,5,6,7,8,9,10]
  
  for prvek in cisla:
      menu.add_cascade(label=prvek,command=lambda: pis(prvek))
  
  menubar.add_cascade(label=&quot;cisla&quot;,menu=menu)
  okno.config(menu=menubar)
  mainloop()

Když v tom menu kliknu na jakoukoliv položku tak se vždy napíše 10? Proč? Mělo by to přece napsat to číslo na který klikám!

Řešení s lambda:
,,,,,,,,,,,,,

Problem je v definici lambda funkce. Promenna 'prvek' je v te funkci jako
volna promenna a zkompilovana lambda vypada nejak takto::

    lambda: pis(LOAD_DEREF('prvek'))

Nebo pokud je definovana na globalni urovni::

    lambda: pis(LOAD_GLOBAL('prvek')) 

Ale ne takto::

    lambda: pis(1)
    lambda: pis(2)
    ....

Cili ve vasem pripade v tom cyklu v podstate vznikne 10 shodnych
funkci, ktere si hodnotu prvku zjistuji az za behu a ta je
po skonceni cyklu rovna hodnote 10. Vice o tom najdete pres
klicova slova &quot;python closures&quot;.

Aby to fungovalo, musi se pouzit nejaky trik::

    lambda p=prvek: pis(p)

nebo::

    new.instancemethod(lambda p:pis(p), prvek, type(prvek))

Tim se vygenerovana instance lambda funkce vzdy svaze s konkretnim prvkem.
Prvni varianta je jednodussi, ale meni signaturu funkce, coz muze nekdy
vadit. Druha verze vytvori fiktivni anonymni metodu konkretniho objektu
prvek (bound method), ikdyz trida int zadnou takovou metodu nema. 

Ale necistsi reseni bez triku (a jeste pomerne kratke) je asi tohle::

    def gen_pis_prvek(prvek):
        return lambda: pis(prvek)

    for prvek in cisla:      
        menu.add_cascade(label=prvek, command=gen_pis_prvek(prvek)) 
        
Řešení s modulem functools:
,,,,,,,,,,,

Od Python 2.5 lze taky využít nový standardní modul
functools a jím definovanou funkci *partial()* --
viz dokumentace *&quot;6.6 functools -- Higher order functions and operations on callable objects. &quot;*

Příklad pak lze přepsat takto::

  import functools
  from tkinter import*
  
  def pis(co):
      print (co)
  
  okno=Tk()
  menubar = Menu(okno)
  menu = Menu(menubar, tearoff=0)
  cisla=[1,2,3,4,5,6,7,8,9,10]
  
  for prvek in cisla:
      menu.add_cascade(label=prvek, command=functools.partial(pis, prvek))
  
  menubar.add_cascade(label=&quot;cisla&quot;,menu=menu)
  okno.config(menu=menubar)
  mainloop()        
</span>
</pre>
        <hr />
        <div><img alt="py30.png" class="align-right" src="http://www.py.cz/TkinterCommand/py30.png" />
<div class="section" id="command-lambda-functools-volame-funkce-z-tlacitka">
<h2>Command, Lambda, functools ... Voláme funkce z tlačítka</h2>
<div class="section" id="ukazkovy-priklad">
<h3>Ukázkový příklad</h3>
<p>Nejjednoduší příklady nastávají na tutoriálních příkladech tisku, které v praxi téměř nikdy nenastávají ;-)</p>
<pre class="literal-block">
# -*- coding: utf-8 -*-
from tkinter import *

def tisk():
    print (1)

hlavni=Tk()

# všimněte si, že tu není &quot;tisk()&quot;! ale jen &quot;tisk&quot;!
tl=Button(text=&quot;tiskni&quot;, command=tisk)
tl.pack()

hlavni.mainloop()
</pre>
<p>Za povšimnutí rozhodně stojí, že se nepoužívá <em>tisk()</em>, ale jen <em>tisk</em>. Použijete-li tisk(), program nebude fungovat. Vyzkoušejte.</p>
</div>
<div class="section" id="funkce-s-parametrem">
<h3>Funkce s parametrem</h3>
<p>Častěji chceme funkci volat s nějakým parametrem Z předchozího odstavce již víme, že prosté <em>command=tisk(10)</em> fungovat nebude. Můžeme použít lambda funkci:</p>
<pre class="literal-block">
# -*- coding: utf-8 -*-
from tkinter import *

def tisk(x):
    print (x)

hlavni=Tk()

# všimněte si, že tu není jen &quot;tisk()&quot;! ale lambda: tisk()
tl=Button(text=&quot;tiskni&quot;, command= lambda: tisk(10))
tl.pack()

hlavni.mainloop()
</pre>
</div>
<div class="section" id="vice-tlacitek-na-jednu-funkci-s-parametrem">
<h3>Více tlačítek na jednu funkci s parametrem</h3>
<p>Nefunkční kód může vypadat třeba takto:</p>
<pre class="literal-block">
from tkinter import*

def pis(co):
    print (co)

okno=Tk()
menubar = Menu(okno)
menu = Menu(menubar, tearoff=0)
cisla=[1,2,3,4,5,6,7,8,9,10]

for prvek in cisla:
    menu.add_cascade(label=prvek,command=lambda: pis(prvek))

menubar.add_cascade(label=&quot;cisla&quot;,menu=menu)
okno.config(menu=menubar)
mainloop()
</pre>
<p>Když v tom menu kliknu na jakoukoliv položku tak se vždy napíše 10? Proč? Mělo by to přece napsat to číslo na který klikám!</p>
<div class="section" id="reseni-s-lambda">
<h4>Řešení s lambda:</h4>
<p>Problem je v definici lambda funkce. Promenna 'prvek' je v te funkci jako
volna promenna a zkompilovana lambda vypada nejak takto:</p>
<pre class="literal-block">
lambda: pis(LOAD_DEREF('prvek'))
</pre>
<p>Nebo pokud je definovana na globalni urovni:</p>
<pre class="literal-block">
lambda: pis(LOAD_GLOBAL('prvek'))
</pre>
<p>Ale ne takto:</p>
<pre class="literal-block">
lambda: pis(1)
lambda: pis(2)
....
</pre>
<p>Cili ve vasem pripade v tom cyklu v podstate vznikne 10 shodnych
funkci, ktere si hodnotu prvku zjistuji az za behu a ta je
po skonceni cyklu rovna hodnote 10. Vice o tom najdete pres
klicova slova &quot;python closures&quot;.</p>
<p>Aby to fungovalo, musi se pouzit nejaky trik:</p>
<pre class="literal-block">
lambda p=prvek: pis(p)
</pre>
<p>nebo:</p>
<pre class="literal-block">
new.instancemethod(lambda p:pis(p), prvek, type(prvek))
</pre>
<p>Tim se vygenerovana instance lambda funkce vzdy svaze s konkretnim prvkem.
Prvni varianta je jednodussi, ale meni signaturu funkce, coz muze nekdy
vadit. Druha verze vytvori fiktivni anonymni metodu konkretniho objektu
prvek (bound method), ikdyz trida int zadnou takovou metodu nema.</p>
<p>Ale necistsi reseni bez triku (a jeste pomerne kratke) je asi tohle:</p>
<pre class="literal-block">
def gen_pis_prvek(prvek):
    return lambda: pis(prvek)

for prvek in cisla:
    menu.add_cascade(label=prvek, command=gen_pis_prvek(prvek))
</pre>
</div>
<div class="section" id="reseni-s-modulem-functools">
<h4>Řešení s modulem functools:</h4>
<p>Od Python 2.5 lze taky využít nový standardní modul
functools a jím definovanou funkci <em>partial()</em> --
viz dokumentace <em>&quot;6.6 functools -- Higher order functions and operations on callable objects. &quot;</em></p>
<p>Příklad pak lze přepsat takto:</p>
<pre class="literal-block">
import functools
from tkinter import*

def pis(co):
    print (co)

okno=Tk()
menubar = Menu(okno)
menu = Menu(menubar, tearoff=0)
cisla=[1,2,3,4,5,6,7,8,9,10]

for prvek in cisla:
    menu.add_cascade(label=prvek, command=functools.partial(pis, prvek))

menubar.add_cascade(label=&quot;cisla&quot;,menu=menu)
okno.config(menu=menubar)
mainloop()
</pre>
<p>
</p>
</div>
</div>
</div>
</div>
      </div>
    </div>
    
  </body>

<!-- Mirrored from www.py.cz/TkinterCommand/diff by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:02:13 GMT -->
</html>

