<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en">
                         
  
<!-- Mirrored from www.py.cz/InstanceTridDynamicky/diff by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:02:41 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta http-equiv="Content-Type"
          content="text/html;charset=utf-8" />
    
    <link rel="stylesheet" type="text/css"
          href="../FrontPage/stylesheet.css" />
    <title>PyCZ: Programovací jazyk Python, aplikační servery a frameworky, atd. InstanceTridDynamicky</title>
    
    
    <meta name="robots" content="noindex,nofollow" />
  
  
  </head>
  <body>
    
    <div>
      <div id="pageheaderall" class="pageheader">
      <div id="accesskeys">
      <a accesskey="0"
         href="http://www.py.cz/InstanceTridDynamicky/helpaccesskeys"></a>
      <a accesskey="f" href="http://www.py.cz/FrontPage"></a>
      <a accesskey="c"
         href="http://www.py.cz/FrontPage/contents#InstanceTridDynamicky"></a>
      <a accesskey="r"
         href="http://www.py.cz/FrontPage/recentchanges"></a>
      <a accesskey="" href="http://www.py.cz/FrontPage"></a>
      
      <a accesskey="i"
         href="http://www.py.cz/FrontPage/wikiindex"></a>
      
      <a accesskey="o"
         href="http://www.py.cz/FrontPage/useroptions?redirectURL=http%3A//www.py.cz/InstanceTridDynamicky"></a>
      <a accesskey="h" href="http://www.py.cz/HelpPage"></a>
      
      
      <a accesskey="n"
         href="http://www.py.cz/JakOdstranitInstanciZPameti"></a>
      <a accesskey="p"
         href="http://www.py.cz/GetSetProperty"></a>
      <a accesskey="u" href="http://www.py.cz/OOP"></a>
      <a accesskey="v"
         href="http://www.py.cz/InstanceTridDynamicky"></a>
      <a accesskey="m"
         href="http://www.py.cz/InstanceTridDynamicky/subscribeform"></a>
      <a accesskey="b"
         href="http://www.py.cz/InstanceTridDynamicky/backlinks"></a>
      <a accesskey="d"
         href="http://www.py.cz/InstanceTridDynamicky/diff"></a>
      <a accesskey="y"
         href="http://www.py.cz/InstanceTridDynamicky/history"></a>
      <a accesskey="e"
         href="http://www.py.cz/InstanceTridDynamicky/editform"></a>
      
    </div>
      <div id="navlinks" class="linkpanel">
      <table class="shade1" width="100%" border="0" cellspacing="0">
        <tr>
          <td align="right">
            
      <a href="http://www.py.cz/FrontPage"
         title="show front page">
      <span>home</span></a>
      <a href="http://www.py.cz/FrontPage/contents#InstanceTridDynamicky"
         title="show wiki contents">
      <span>contents</span></a>
      <a href="http://www.py.cz/FrontPage/recentchanges"
         title="show wiki recent changes">
      <span>changes</span></a>
      
      <a title="show wiki index"
         href="http://www.py.cz/FrontPage/wikiindex">
      <span>index</span></a>
      
      <a title="show wiki options"
         href="http://www.py.cz/FrontPage/useroptions?redirectURL=http%3A//www.py.cz/InstanceTridDynamicky">
      <span>options</span></a>
      <a title="show help page"
         href="http://www.py.cz/HelpPage">
      <span>help</span></a>
    
            
      
      <a href="http://www.py.cz/InstanceTridDynamicky/subscribeform"
         title="configure email subscription to this page or site">
        
      <span>subscribe</span></a>
      
      <a href="http://www.py.cz/InstanceTridDynamicky/editform"
         title="edit-page (last edited 10 years ago)">
      <span>edit</span></a>
      
    
          </td>
        </tr>
      </table>
    </div>
      <div id="pageheader">
        <form method="GET"
              action="http://www.py.cz/FrontPage/searchwiki">
          <table width="100%" border="0" cellspacing="0">
            <tr>
              <!-- logo -->
              <td id="logo" width="1%" valign="top"
                  class="logo">
                
                  <a title="go to home page"
                     href="http://www.py.cz/FrontPage">
                    
                    <img src="http://www.py.cz/InstanceTridDynamicky/logo.jpg" border="0" alt="home" />
                    
                  </a>
                  &nbsp;
                
              </td>
              <!-- page name and context (parent topics) -->
              <td align="left" width="79%">
                
                  <small><ul class="outline expandable">
 <li><a href="http://www.py.cz/PythonRoot" name="PythonRoot">PythonRoot</a>
<ul class="outline expandable">
  <li><a href="http://www.py.cz/OOP" name="OOP">OOP</a>
<ul class="outline expandable">
  <li><h1 style="display:inline;"><a href="http://www.py.cz/InstanceTridDynamicky/backlinks" title="which pages link to this one ?" name="InstanceTridDynamicky">InstanceTridDynamicky</a></h1></li>
</ul>
  </li>
</ul>
 </li>
</ul>
</small>
                
                
              </td>
              <!-- search form & page info -->
              <td class="searchbox" width="20%" align="right">
                
                  <input id="searchinput" class="formfield"
                         name="expr" type="text" size="20"
                         maxlength="100" value=""
                         title="search all pages" /><br />
                  <span class="lasteditor">last edited  <a href="http://www.py.cz/InstanceTridDynamicky/history" title="show last edit" >10 years</a> ago</span><br>
                  <span class="creator">created 2005-05-25</span>   
                
                
              </td>
            </tr>
          </table>
        </form>
      </div>
      <div id="ratingform" align="right">  
      <!-- page rating form -->
      <div>
        <a name="ratingform"></a>
        <style type="text/css">
          input.rating {border:none;}
        </style>
        <form method="POST" id="ratingform"
              action="http://www.py.cz/InstanceTridDynamicky/vote">
           <input type="image" name="vote0" value="0"
                  alt="0" class="rating" width="14"
                  height="13"
                  src="http://www.py.cz/p_/sp"
                  style=""
                  title="click to vote 0 (poor) for this page (0 votes)" /><input
    type="image" name="vote1" value="1" alt="1"
    class="rating" src="http://www.py.cz/InstanceTridDynamicky/misc_/ZWiki/star_icon" style=""
    title="click to vote 1 (average) for this page (0 votes)" /><input
    type="image" name="vote2" value="2" alt="2"
    class="rating" src="http://www.py.cz/InstanceTridDynamicky/misc_/ZWiki/blank_star_icon"
    style=""
    title="click to vote 2 (above average) for this page (0 votes)" /><input
    type="image" name="vote3" value="3" alt="3"
    class="rating" src="http://www.py.cz/InstanceTridDynamicky/misc_/ZWiki/blank_star_icon"
    style=""
    title="click to vote 3 (good) for this page (0 votes)" /><input
    type="image" name="vote4" value="4" alt="4"
    class="rating" src="http://www.py.cz/InstanceTridDynamicky/misc_/ZWiki/blank_star_icon"
    style=""
    title="click to vote 4 (great) for this page (0 votes)" /><input
    type="image" name="vote5" value="5" alt="5"
    class="rating" src="http://www.py.cz/InstanceTridDynamicky/misc_/ZWiki/blank_star_icon"
    style=""
    title="click to vote 5 (superb) for this page (0 votes)" />
        </form>
      </div>
    </div>
    </div>
      <h1>Edit detail for InstanceTridDynamicky revision 1 of 1</h1>
      <div class="formcontent">
        <table border="0" cellspacing="0" width="100%">
          <tr valign="top">

            <td align="left">
              <form style="display:inline"
                    action="http://www.py.cz/InstanceTridDynamicky">
                <input type="submit" name="history:method"
                       value="Return to edit history" />
                
              </form>
            </td>

            <td align="center">
              <form style="display:inline"
                    action="http://www.py.cz/InstanceTridDynamicky/diff">
                <input type="hidden" name="rev" />
                
                <input disabled="1" value=" &lt; "
                       type="submit" accesskey="," />
              </form>
              <a style="font-weight:bold"
                 href="http://www.py.cz/InstanceTridDynamicky/diff?rev=1">1</a>
              <form style="display:inline"
                    action="http://www.py.cz/InstanceTridDynamicky/diff">
                <input type="hidden" name="rev" />
                
                <input disabled="1" value=" &gt; "
                       type="submit" accesskey="." />
              </form>
            </td>

            <td align="right">
              <form style="display:inline"
                    action="http://www.py.cz/InstanceTridDynamicky">
                <input type="hidden" name="rev" value="1" />
                <input value="Revert to this version"
                       type="submit" name="revert:method"
                       disabled="disabled" />
              </form>
            </td>

          </tr>
          <tr valign="top">
            <td colspan="3">
              <span>Editor:</span> 127.0.0.1
              <br />
              <span>Time:</span> 2005/05/25 15:34:31 GMT+0
            </td>
          </tr>
          <tr valign="top">
            <td colspan="3">
              <span>Note:</span> <span
    style="font-weight:bold; font-style:italic;">oprava překlepu (pepr)</span>
            </td>
          </tr>
        </table>
        <hr />
        <pre>
<b>changed:</b><span style="color:red;text-decoration:line-through">
-</span><span style="color:green">
Dotaz

  - Chci dynamicky vytvářet instance tříd. 
  
  - Jsem začátečník, snažil jsem se vytvořit funkci, která by dynamicky vytvářela
  instance třídy.


Jedna odpověď

  V Pythonu se instance objektů vždy vytvářejí
  dynamicky. Využití funkce pro vytváření
  instancí má smysl pouze tehdy, když funkce na
  základě dalších okolností rozhodne, jaká instance
  (jaké třídy nebo s jakým vnitřním stavem). Pak
  se tomu říká &quot;class factory&quot;. V tomto případě
  se funkce použije čistým způsobem (nevolá se s cílem
  využít vedlejší efekt, ale vracenou hodnotu).
  Použití by vypadalo nějak takto::
  
    class Trida1: 
        def __str__(self):
            return 'instance tridy Trida1'
    
    class Trida2: 
        def __str__(self):
            return 'instance tridy Trida2'
    
    
    def mojeClassFactory(okolnosti):
       if okolnosti == 7:
           return Trida1()
       elif okolnosti == 8:
           return Trida2()
       else:
           return None
    
    
    objA = mojeClassFactory(7)
    print 'objA:', objA
    
    objB = mojeClassFactory(8)
    print 'objB:', objB
    
    objC = mojeClassFactory(1)
    print 'objC:', objC
  
(Okolnosti mohou samozřejmě nabývat různou podobu.)



Druhá odpověď

  Následující příklad ukazuje princip::
  
    class MyClass:
    
        def __init__(self, a, b, c):
            self.a = a
            self.b = b
            self.c = c
    
        def __str__(self):
            return str(self.a) + ' ' + str(self.b) + ' ' + str(self.c)
    
    
    class OtherClass:
    
        def __init__(self, a):
            self.a = a
    
        def __str__(self):
            return 'OtherClass instance: ' + str(self.a)
    
    
    
    def createInstance(clsname, *args):
        try:
            cls = globals()[clsname]
            obj = cls(*args)
            return obj
        except:
            print 'Unknown class: ', clsname
            return None
    
    
    #-----------------------------------------------------
    
    o1 = MyClass(1, 2, 3)
    print o1
    
    o2 = createInstance('MyClass', *('a', 'b', 'c'))
    print o2
    
    o3 = createInstance('OtherClass', *('x',))
    print o3
    
    o4 = createInstance('AnotherClass', *('x', 'y', 'z'))
    print o4
    
    o5 = eval('MyClass')(*(5, 6, 7))
    print o5
    
    o6 = eval('MyClass')(8, 9, 10)
    print o6
    
    cls = eval('MyClass')
    o7 = cls(11, 12, 13)
    print o7
    
    ===================================================
    Výstup:
    
    1 2 3
    a b c
    OtherClass instance: x
    Unknown class:  AnotherClass
    None
    5 6 7
    8 9 10
    11 12 13
    
Funkce createInstance() byla nadefinována od boku.
Hledá objekt definující požadovanou třídu v globálním 
slovníku -- viz globals(). Protože se obecně předpokládá
různý počet parametrů, používá speciálnější způsob
předávání parametrů sekvencí. 

Použití eval není tak průhledné, ale je jednodušší
a má další (neukázané) možnosti.

Princip spočívá v nalezení interního objektu, který
reprezentuje požadovanou třídu. Přiřazením tento
objekt spojím s mnou zadaným jménem (jako u ostatních
proměnných). Voláním vzniká instance třídy. Při volání
musím předat požadované parametry.

Naznačená funkce createInstance() kombinuje
jak hledání třídy (třída je reprezentována objektem),
tak předávání parametrů. Poslední příklady (o6, o7)
ukazují lidštější způsob předávání parametrů. 
Poslední příklad dělá přesně totéž, co o6. Rozdíl
spočívá jen v tom, že se objekt reprezentující třídu
nejdříve zapamatuje pod jménem cls.

Další odpovědi?

 patří sem....
</span>
</pre>
        <hr />
        <div><h2>Dotaz</h2>

<ul>
<li>Chci dynamicky vytvářet instance tříd. </li>
<li>Jsem začátečník, snažil jsem se vytvořit funkci, která by dynamicky vytvářela
  instance třídy.</li>

</ul>
<h2>Jedna odpověď</h2>
<p>  V Pythonu se instance objektů vždy vytvářejí
  dynamicky. Využití funkce pro vytváření
  instancí má smysl pouze tehdy, když funkce na
  základě dalších okolností rozhodne, jaká instance
  (jaké třídy nebo s jakým vnitřním stavem). Pak
  se tomu říká "class factory". V tomto případě
  se funkce použije čistým způsobem (nevolá se s cílem
  využít vedlejší efekt, ale vracenou hodnotu).
  Použití by vypadalo nějak takto:</p>

<pre>
    class Trida1: 
        def __str__(self):
            return 'instance tridy Trida1'

    class Trida2: 
        def __str__(self):
            return 'instance tridy Trida2'

    def mojeClassFactory(okolnosti):
       if okolnosti == 7:
           return Trida1()
       elif okolnosti == 8:
           return Trida2()
       else:
           return None

    objA = mojeClassFactory(7)
    print 'objA:', objA

    objB = mojeClassFactory(8)
    print 'objB:', objB

    objC = mojeClassFactory(1)
    print 'objC:', objC
</pre>
<p>(Okolnosti mohou samozřejmě nabývat různou podobu.)</p>
<h2>Druhá odpověď</h2>
<p>  Následující příklad ukazuje princip:</p>

<pre>
    class MyClass:

        def __init__(self, a, b, c):
            self.a = a
            self.b = b
            self.c = c

        def __str__(self):
            return str(self.a) + ' ' + str(self.b) + ' ' + str(self.c)

    class OtherClass:

        def __init__(self, a):
            self.a = a

        def __str__(self):
            return 'OtherClass instance: ' + str(self.a)

    def createInstance(clsname, *args):
        try:
            cls = globals()[clsname]
            obj = cls(*args)
            return obj
        except:
            print 'Unknown class: ', clsname
            return None

    #-----------------------------------------------------

    o1 = MyClass(1, 2, 3)
    print o1

    o2 = createInstance('MyClass', *('a', 'b', 'c'))
    print o2

    o3 = createInstance('OtherClass', *('x',))
    print o3

    o4 = createInstance('AnotherClass', *('x', 'y', 'z'))
    print o4

    o5 = eval('MyClass')(*(5, 6, 7))
    print o5

    o6 = eval('MyClass')(8, 9, 10)
    print o6

    cls = eval('MyClass')
    o7 = cls(11, 12, 13)
    print o7

    ===================================================
    Výstup:

    1 2 3
    a b c
    OtherClass instance: x
    Unknown class:  AnotherClass
    None
    5 6 7
    8 9 10
    11 12 13
</pre>
<p>Funkce createInstance() byla nadefinována od boku.
Hledá objekt definující požadovanou třídu v globálním 
slovníku -- viz globals(). Protože se obecně předpokládá
různý počet parametrů, používá speciálnější způsob
předávání parametrů sekvencí. </p>
<p>Použití eval není tak průhledné, ale je jednodušší
a má další (neukázané) možnosti.</p>
<p>Princip spočívá v nalezení interního objektu, který
reprezentuje požadovanou třídu. Přiřazením tento
objekt spojím s mnou zadaným jménem (jako u ostatních
proměnných). Voláním vzniká instance třídy. Při volání
musím předat požadované parametry.</p>
<p>Naznačená funkce createInstance() kombinuje
jak hledání třídy (třída je reprezentována objektem),
tak předávání parametrů. Poslední příklady (o6, o7)
ukazují lidštější způsob předávání parametrů. 
Poslední příklad dělá přesně totéž, co o6. Rozdíl
spočívá jen v tom, že se objekt reprezentující třídu
nejdříve zapamatuje pod jménem cls.</p>
<h2>Další odpovědi?</h2>
<p> patří sem....</p>
<p>
</p>
</div>
      </div>
    </div>
    
  </body>

<!-- Mirrored from www.py.cz/InstanceTridDynamicky/diff by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:02:41 GMT -->
</html>

