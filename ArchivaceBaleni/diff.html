<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en">
                         
  
<!-- Mirrored from www.py.cz/ArchivaceBaleni/diff by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:02:54 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta http-equiv="Content-Type"
          content="text/html;charset=utf-8" />
    
    <link rel="stylesheet" type="text/css"
          href="../FrontPage/stylesheet.css" />
    <title>PyCZ: Programovací jazyk Python, aplikační servery a frameworky, atd. ArchivaceBaleni</title>
    
    
    <meta name="robots" content="noindex,nofollow" />
  
  
  </head>
  <body>
    
    <div>
      <div id="pageheaderall" class="pageheader">
      <div id="accesskeys">
      <a accesskey="0"
         href="http://www.py.cz/ArchivaceBaleni/helpaccesskeys"></a>
      <a accesskey="f" href="http://www.py.cz/FrontPage"></a>
      <a accesskey="c"
         href="http://www.py.cz/FrontPage/contents#ArchivaceBaleni"></a>
      <a accesskey="r"
         href="http://www.py.cz/FrontPage/recentchanges"></a>
      <a accesskey="" href="http://www.py.cz/FrontPage"></a>
      
      <a accesskey="i"
         href="http://www.py.cz/FrontPage/wikiindex"></a>
      
      <a accesskey="o"
         href="http://www.py.cz/FrontPage/useroptions?redirectURL=http%3A//www.py.cz/ArchivaceBaleni"></a>
      <a accesskey="h" href="http://www.py.cz/HelpPage"></a>
      
      
      <a accesskey="n"
         href="http://www.py.cz/PresmerovaniVystupuDoSouboru"></a>
      <a accesskey="p"
         href="http://www.py.cz/PraceSeSoubory"></a>
      <a accesskey="u"
         href="http://www.py.cz/PraceSeSoubory"></a>
      <a accesskey="v"
         href="http://www.py.cz/ArchivaceBaleni"></a>
      <a accesskey="m"
         href="http://www.py.cz/ArchivaceBaleni/subscribeform"></a>
      <a accesskey="b"
         href="http://www.py.cz/ArchivaceBaleni/backlinks"></a>
      <a accesskey="d"
         href="http://www.py.cz/ArchivaceBaleni/diff"></a>
      <a accesskey="y"
         href="http://www.py.cz/ArchivaceBaleni/history"></a>
      <a accesskey="e"
         href="http://www.py.cz/ArchivaceBaleni/editform"></a>
      
    </div>
      <div id="navlinks" class="linkpanel">
      <table class="shade1" width="100%" border="0" cellspacing="0">
        <tr>
          <td align="right">
            
      <a href="http://www.py.cz/FrontPage"
         title="show front page">
      <span>home</span></a>
      <a href="http://www.py.cz/FrontPage/contents#ArchivaceBaleni"
         title="show wiki contents">
      <span>contents</span></a>
      <a href="http://www.py.cz/FrontPage/recentchanges"
         title="show wiki recent changes">
      <span>changes</span></a>
      
      <a title="show wiki index"
         href="http://www.py.cz/FrontPage/wikiindex">
      <span>index</span></a>
      
      <a title="show wiki options"
         href="http://www.py.cz/FrontPage/useroptions?redirectURL=http%3A//www.py.cz/ArchivaceBaleni">
      <span>options</span></a>
      <a title="show help page"
         href="http://www.py.cz/HelpPage">
      <span>help</span></a>
    
            
      
      <a href="http://www.py.cz/ArchivaceBaleni/subscribeform"
         title="configure email subscription to this page or site">
        
      <span>subscribe</span></a>
      
      <a href="http://www.py.cz/ArchivaceBaleni/editform"
         title="edit-page (last edited 9 years ago by pycz)">
      <span>edit</span></a>
      
    
          </td>
        </tr>
      </table>
    </div>
      <div id="pageheader">
        <form method="GET"
              action="http://www.py.cz/FrontPage/searchwiki">
          <table width="100%" border="0" cellspacing="0">
            <tr>
              <!-- logo -->
              <td id="logo" width="1%" valign="top"
                  class="logo">
                
                  <a title="go to home page"
                     href="http://www.py.cz/FrontPage">
                    
                    <img src="http://www.py.cz/ArchivaceBaleni/logo.jpg" border="0" alt="home" />
                    
                  </a>
                  &nbsp;
                
              </td>
              <!-- page name and context (parent topics) -->
              <td align="left" width="79%">
                
                  <small><ul class="outline expandable">
 <li><a href="http://www.py.cz/PythonRoot" name="PythonRoot">PythonRoot</a>
<ul class="outline expandable">
  <li><a href="http://www.py.cz/PraceSeSoubory" name="PraceSeSoubory">PraceSeSoubory</a>
<ul class="outline expandable">
  <li><h1 style="display:inline;"><a href="http://www.py.cz/ArchivaceBaleni/backlinks" title="which pages link to this one ?" name="ArchivaceBaleni">ArchivaceBaleni</a></h1></li>
</ul>
  </li>
</ul>
 </li>
</ul>
</small>
                
                
              </td>
              <!-- search form & page info -->
              <td class="searchbox" width="20%" align="right">
                
                  <input id="searchinput" class="formfield"
                         name="expr" type="text" size="20"
                         maxlength="100" value=""
                         title="search all pages" /><br />
                  <span class="lasteditor">last edited  <a href="http://www.py.cz/ArchivaceBaleni/history" title="show last edit" >9 years</a> ago by <b>pycz</b></span><br>
                  <span class="creator">created 2006-01-04</span>   
                
                
              </td>
            </tr>
          </table>
        </form>
      </div>
      <div id="ratingform" align="right">  
      <!-- page rating form -->
      <div>
        <a name="ratingform"></a>
        <style type="text/css">
          input.rating {border:none;}
        </style>
        <form method="POST" id="ratingform"
              action="http://www.py.cz/ArchivaceBaleni/vote">
           <input type="image" name="vote0" value="0"
                  alt="0" class="rating" width="14"
                  height="13"
                  src="http://www.py.cz/p_/sp"
                  style=""
                  title="click to vote 0 (poor) for this page (0 votes)" /><input
    type="image" name="vote1" value="1" alt="1"
    class="rating" src="http://www.py.cz/ArchivaceBaleni/misc_/ZWiki/star_icon" style=""
    title="click to vote 1 (average) for this page (0 votes)" /><input
    type="image" name="vote2" value="2" alt="2"
    class="rating" src="http://www.py.cz/ArchivaceBaleni/misc_/ZWiki/blank_star_icon"
    style=""
    title="click to vote 2 (above average) for this page (0 votes)" /><input
    type="image" name="vote3" value="3" alt="3"
    class="rating" src="http://www.py.cz/ArchivaceBaleni/misc_/ZWiki/blank_star_icon"
    style=""
    title="click to vote 3 (good) for this page (0 votes)" /><input
    type="image" name="vote4" value="4" alt="4"
    class="rating" src="http://www.py.cz/ArchivaceBaleni/misc_/ZWiki/blank_star_icon"
    style=""
    title="click to vote 4 (great) for this page (0 votes)" /><input
    type="image" name="vote5" value="5" alt="5"
    class="rating" src="http://www.py.cz/ArchivaceBaleni/misc_/ZWiki/blank_star_icon"
    style=""
    title="click to vote 5 (superb) for this page (0 votes)" />
        </form>
      </div>
    </div>
    </div>
      <h1>Edit detail for ArchivaceBaleni revision 1 of 1</h1>
      <div class="formcontent">
        <table border="0" cellspacing="0" width="100%">
          <tr valign="top">

            <td align="left">
              <form style="display:inline"
                    action="http://www.py.cz/ArchivaceBaleni">
                <input type="submit" name="history:method"
                       value="Return to edit history" />
                
              </form>
            </td>

            <td align="center">
              <form style="display:inline"
                    action="http://www.py.cz/ArchivaceBaleni/diff">
                <input type="hidden" name="rev" />
                
                <input disabled="1" value=" &lt; "
                       type="submit" accesskey="," />
              </form>
              <a style="font-weight:bold"
                 href="http://www.py.cz/ArchivaceBaleni/diff?rev=1">1</a>
              <form style="display:inline"
                    action="http://www.py.cz/ArchivaceBaleni/diff">
                <input type="hidden" name="rev" />
                
                <input disabled="1" value=" &gt; "
                       type="submit" accesskey="." />
              </form>
            </td>

            <td align="right">
              <form style="display:inline"
                    action="http://www.py.cz/ArchivaceBaleni">
                <input type="hidden" name="rev" value="1" />
                <input value="Revert to this version"
                       type="submit" name="revert:method"
                       disabled="disabled" />
              </form>
            </td>

          </tr>
          <tr valign="top">
            <td colspan="3">
              <span>Editor:</span> pycz
              <br />
              <span>Time:</span> 2006/06/02 15:48:13 GMT+0
            </td>
          </tr>
          <tr valign="top">
            <td colspan="3">
              <span>Note:</span> <span
    style="font-weight:bold; font-style:italic;"></span>
            </td>
          </tr>
        </table>
        <hr />
        <pre>
<b>changed:</b><span style="color:red;text-decoration:line-through">
-</span><span style="color:green">
Archivace a Balení v Pythonu

 Díky zipu tyto dva termíny většinou splývají, protože zip umí oboje. Původní význam těchto termínu je asi takový: Archivace je prosté nakopírování více souborů do jednoho (tar). Balení je komprimace jednoho souboru do jiného (jeden do jednoho) (gzip).


 Příklad tar

  ::

    import tarfile
    tar = tarfile.open(&quot;sample.tar&quot;, &quot;w&quot;)
    for name in [&quot;foo&quot;, &quot;bar&quot;, &quot;quux&quot;]:
        tar.add(name)
    tar.close()
    
 Příklad zip

  ::

    import zipfile, os
    
    fzip = zipfile.ZipFile('soubor.zip', 'w')
    
    slozkaVse=os.listdir(&quot;.&quot;)   # vse - soubory i slozky
    slozkaSoubory = [soubor for soubor in slozkaVse if os.path.isfile(soubor)]  # jen soubory
    slozkaSoubory.remove(&quot;soubor.zip&quot;)    # abychom nebalili sami sebe
    
    for soubor in slozkaSoubory:
        print 'Balim ' + soubor
        fzip.write(soubor)
    
    fzip.close()

 Příklad gzip

  ::

    import gzip, os
    
    seznam=[s for s in os.listdir('.') if os.path.isfile(s)]
    
    for s in seznam:
        g=gzip.GzipFile(s+'.gz','w')
        x=file(s,'rb').read()  # 'rb' je důležité nejen pro binárky, ale i  pro .doc, .xls, apod...
        g.write(x)
        g.close()

 Příklad bzip + tar

  ::

    outpath = ''
    
    import glob
    import tarfile
    import os.path
    
    ftar = tarfile.open('soubor.tar.bz2', 'w:bz2')
    allfiles = glob.glob(os.path.join(outpath,'*'))
    for i in allfiles:
        print 'Adding ' + i
        ftar.add(i, os.path.basename(i))
    ftar.close()

 Vytvoření taru se změnou vlastnostní souboru

  Následující kus kódu zabalí podadresář aktuálního adresáře jehož jméno
 obsahuje proměnná 'start'. Souborům, jejichž jméno končí na 'configure'
 budou nastavena unixová práva spustitelného souboru, ostatní soubory
 budou nespustitelné. To se může hodit např. při vytváření archívu určeného
 pro Linux z Windows.

 ::

   from glob import glob
   from os.path import isdir
   from tarfile import *

   start = 'jmeno_adresare'
   tar = TarFile('jmeno_souboru.tar', 'w')

   def work(path):
       files = glob(path + '/*')
       for i in files:
           if isdir(i):
               ti = tar.gettarinfo(i, i[len(start)+1:])
               tar.addfile(ti)
               work(i)
           else:
               ti = tar.gettarinfo(i, i[len(start)+1:])
               if i.endswith('configure'):
                   ti.mode = 0775
               else:
                   ti.mode = 0664
               f = file(i, 'rb')
               tar.addfile(ti, f)
               f.close()

    work(start)
    tar.close()
</span>
</pre>
        <hr />
        <div><h2>Archivace a Balení v Pythonu</h2>
<p> Díky zipu tyto dva termíny většinou splývají, protože zip umí oboje. Původní význam těchto termínu je asi takový: Archivace je prosté nakopírování více souborů do jednoho (tar). Balení je komprimace jednoho souboru do jiného (jeden do jednoho) (gzip).</p>
<h3> Příklad tar</h3>

<pre>
    import tarfile
    tar = tarfile.open("sample.tar", "w")
    for name in ["foo", "bar", "quux"]:
        tar.add(name)
    tar.close()
</pre>
<h3> Příklad zip</h3>

<pre>
    import zipfile, os

    fzip = zipfile.ZipFile('soubor.zip', 'w')

    slozkaVse=os.listdir(".")   # vse - soubory i slozky
    slozkaSoubory = [soubor for soubor in slozkaVse if os.path.isfile(soubor)]  # jen soubory
    slozkaSoubory.remove("soubor.zip")    # abychom nebalili sami sebe

    for soubor in slozkaSoubory:
        print 'Balim ' + soubor
        fzip.write(soubor)

    fzip.close()
</pre>
<h3> Příklad gzip</h3>

<pre>
    import gzip, os

    seznam=[s for s in os.listdir('.') if os.path.isfile(s)]

    for s in seznam:
        g=gzip.GzipFile(s+'.gz','w')
        x=file(s,'rb').read()  # 'rb' je důležité nejen pro binárky, ale i  pro .doc, .xls, apod...
        g.write(x)
        g.close()
</pre>
<h3> Příklad bzip + tar</h3>

<pre>
    outpath = ''

    import glob
    import tarfile
    import os.path

    ftar = tarfile.open('soubor.tar.bz2', 'w:bz2')
    allfiles = glob.glob(os.path.join(outpath,'*'))
    for i in allfiles:
        print 'Adding ' + i
        ftar.add(i, os.path.basename(i))
    ftar.close()
</pre>
<h3> Vytvoření taru se změnou vlastnostní souboru</h3>
<p>  Následující kus kódu zabalí podadresář aktuálního adresáře jehož jméno
 obsahuje proměnná <code>start</code>. Souborům, jejichž jméno končí na <code>configure</code>
 budou nastavena unixová práva spustitelného souboru, ostatní soubory
 budou nespustitelné. To se může hodit např. při vytváření archívu určeného
 pro Linux z Windows.</p>

<pre>
   from glob import glob
   from os.path import isdir
   from tarfile import *

   start = 'jmeno_adresare'
   tar = TarFile('jmeno_souboru.tar', 'w')

   def work(path):
       files = glob(path + '/*')
       for i in files:
           if isdir(i):
               ti = tar.gettarinfo(i, i[len(start)+1:])
               tar.addfile(ti)
               work(i)
           else:
               ti = tar.gettarinfo(i, i[len(start)+1:])
               if i.endswith('configure'):
                   ti.mode = 0775
               else:
                   ti.mode = 0664
               f = file(i, 'rb')
               tar.addfile(ti, f)
               f.close()

    work(start)
    tar.close()
</pre>
<p>
</p>
</div>
      </div>
    </div>
    
  </body>

<!-- Mirrored from www.py.cz/ArchivaceBaleni/diff by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:02:54 GMT -->
</html>

