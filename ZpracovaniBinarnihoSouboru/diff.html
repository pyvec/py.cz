<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en">
                         
  
<!-- Mirrored from www.py.cz/ZpracovaniBinarnihoSouboru/diff by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:02:58 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta http-equiv="Content-Type"
          content="text/html;charset=utf-8" />
    
    <link rel="stylesheet" type="text/css"
          href="../FrontPage/stylesheet.css" />
    <title>PyCZ: Programovací jazyk Python, aplikační servery a frameworky, atd. ZpracovaniBinarnihoSouboru</title>
    
    
    <meta name="robots" content="noindex,nofollow" />
  
  
  </head>
  <body>
    
    <div>
      <div id="pageheaderall" class="pageheader">
      <div id="accesskeys">
      <a accesskey="0"
         href="http://www.py.cz/ZpracovaniBinarnihoSouboru/helpaccesskeys"></a>
      <a accesskey="f" href="http://www.py.cz/FrontPage"></a>
      <a accesskey="c"
         href="http://www.py.cz/FrontPage/contents#ZpracovaniBinarnihoSouboru"></a>
      <a accesskey="r"
         href="http://www.py.cz/FrontPage/recentchanges"></a>
      <a accesskey="" href="http://www.py.cz/FrontPage"></a>
      
      <a accesskey="i"
         href="http://www.py.cz/FrontPage/wikiindex"></a>
      
      <a accesskey="o"
         href="http://www.py.cz/FrontPage/useroptions?redirectURL=http%3A//www.py.cz/ZpracovaniBinarnihoSouboru"></a>
      <a accesskey="h" href="http://www.py.cz/HelpPage"></a>
      
      
      <a accesskey="n"
         href="http://www.py.cz/ZpracovaniCsvSouboru"></a>
      <a accesskey="p"
         href="http://www.py.cz/VJakemKodovaniJeSouborUlozen"></a>
      <a accesskey="u"
         href="http://www.py.cz/PraceSeSoubory"></a>
      <a accesskey="v"
         href="http://www.py.cz/ZpracovaniBinarnihoSouboru"></a>
      <a accesskey="m"
         href="http://www.py.cz/ZpracovaniBinarnihoSouboru/subscribeform"></a>
      <a accesskey="b"
         href="http://www.py.cz/ZpracovaniBinarnihoSouboru/backlinks"></a>
      <a accesskey="d"
         href="http://www.py.cz/ZpracovaniBinarnihoSouboru/diff"></a>
      <a accesskey="y"
         href="http://www.py.cz/ZpracovaniBinarnihoSouboru/history"></a>
      <a accesskey="e"
         href="http://www.py.cz/ZpracovaniBinarnihoSouboru/editform"></a>
      
    </div>
      <div id="navlinks" class="linkpanel">
      <table class="shade1" width="100%" border="0" cellspacing="0">
        <tr>
          <td align="right">
            
      <a href="http://www.py.cz/FrontPage"
         title="show front page">
      <span>home</span></a>
      <a href="http://www.py.cz/FrontPage/contents#ZpracovaniBinarnihoSouboru"
         title="show wiki contents">
      <span>contents</span></a>
      <a href="http://www.py.cz/FrontPage/recentchanges"
         title="show wiki recent changes">
      <span>changes</span></a>
      
      <a title="show wiki index"
         href="http://www.py.cz/FrontPage/wikiindex">
      <span>index</span></a>
      
      <a title="show wiki options"
         href="http://www.py.cz/FrontPage/useroptions?redirectURL=http%3A//www.py.cz/ZpracovaniBinarnihoSouboru">
      <span>options</span></a>
      <a title="show help page"
         href="http://www.py.cz/HelpPage">
      <span>help</span></a>
    
            
      
      <a href="http://www.py.cz/ZpracovaniBinarnihoSouboru/subscribeform"
         title="configure email subscription to this page or site">
        
      <span>subscribe</span></a>
      
      <a href="http://www.py.cz/ZpracovaniBinarnihoSouboru/editform"
         title="edit-page (last edited 10 years ago by geon)">
      <span>edit</span></a>
      
    
          </td>
        </tr>
      </table>
    </div>
      <div id="pageheader">
        <form method="GET"
              action="http://www.py.cz/FrontPage/searchwiki">
          <table width="100%" border="0" cellspacing="0">
            <tr>
              <!-- logo -->
              <td id="logo" width="1%" valign="top"
                  class="logo">
                
                  <a title="go to home page"
                     href="http://www.py.cz/FrontPage">
                    
                    <img src="http://www.py.cz/ZpracovaniBinarnihoSouboru/logo.jpg" border="0" alt="home" />
                    
                  </a>
                  &nbsp;
                
              </td>
              <!-- page name and context (parent topics) -->
              <td align="left" width="79%">
                
                  <small><ul class="outline expandable">
 <li><a href="http://www.py.cz/PythonRoot" name="PythonRoot">PythonRoot</a>
<ul class="outline expandable">
  <li><a href="http://www.py.cz/PraceSeSoubory" name="PraceSeSoubory">PraceSeSoubory</a>
<ul class="outline expandable">
  <li><h1 style="display:inline;"><a href="http://www.py.cz/ZpracovaniBinarnihoSouboru/backlinks" title="which pages link to this one ?" name="ZpracovaniBinarnihoSouboru">ZpracovaniBinarnihoSouboru</a></h1></li>
</ul>
  </li>
</ul>
 </li>
</ul>
</small>
                
                
              </td>
              <!-- search form & page info -->
              <td class="searchbox" width="20%" align="right">
                
                  <input id="searchinput" class="formfield"
                         name="expr" type="text" size="20"
                         maxlength="100" value=""
                         title="search all pages" /><br />
                  <span class="lasteditor">last edited  <a href="http://www.py.cz/ZpracovaniBinarnihoSouboru/history" title="show last edit" >10 years</a> ago by <b>geon</b></span><br>
                  <span class="creator">created 2006-02-21</span>   
                
                
              </td>
            </tr>
          </table>
        </form>
      </div>
      <div id="ratingform" align="right">  
      <!-- page rating form -->
      <div>
        <a name="ratingform"></a>
        <style type="text/css">
          input.rating {border:none;}
        </style>
        <form method="POST" id="ratingform"
              action="http://www.py.cz/ZpracovaniBinarnihoSouboru/vote">
           <input type="image" name="vote0" value="0"
                  alt="0" class="rating" width="14"
                  height="13"
                  src="http://www.py.cz/p_/sp"
                  style=""
                  title="click to vote 0 (poor) for this page (0 votes)" /><input
    type="image" name="vote1" value="1" alt="1"
    class="rating" src="http://www.py.cz/ZpracovaniBinarnihoSouboru/misc_/ZWiki/star_icon" style=""
    title="click to vote 1 (average) for this page (0 votes)" /><input
    type="image" name="vote2" value="2" alt="2"
    class="rating" src="http://www.py.cz/ZpracovaniBinarnihoSouboru/misc_/ZWiki/blank_star_icon"
    style=""
    title="click to vote 2 (above average) for this page (0 votes)" /><input
    type="image" name="vote3" value="3" alt="3"
    class="rating" src="http://www.py.cz/ZpracovaniBinarnihoSouboru/misc_/ZWiki/blank_star_icon"
    style=""
    title="click to vote 3 (good) for this page (0 votes)" /><input
    type="image" name="vote4" value="4" alt="4"
    class="rating" src="http://www.py.cz/ZpracovaniBinarnihoSouboru/misc_/ZWiki/blank_star_icon"
    style=""
    title="click to vote 4 (great) for this page (0 votes)" /><input
    type="image" name="vote5" value="5" alt="5"
    class="rating" src="http://www.py.cz/ZpracovaniBinarnihoSouboru/misc_/ZWiki/blank_star_icon"
    style=""
    title="click to vote 5 (superb) for this page (0 votes)" />
        </form>
      </div>
    </div>
    </div>
      <h1>Edit detail for ZpracovaniBinarnihoSouboru revision 1 of 1</h1>
      <div class="formcontent">
        <table border="0" cellspacing="0" width="100%">
          <tr valign="top">

            <td align="left">
              <form style="display:inline"
                    action="http://www.py.cz/ZpracovaniBinarnihoSouboru">
                <input type="submit" name="history:method"
                       value="Return to edit history" />
                
              </form>
            </td>

            <td align="center">
              <form style="display:inline"
                    action="http://www.py.cz/ZpracovaniBinarnihoSouboru/diff">
                <input type="hidden" name="rev" />
                
                <input disabled="1" value=" &lt; "
                       type="submit" accesskey="," />
              </form>
              <a style="font-weight:bold"
                 href="http://www.py.cz/ZpracovaniBinarnihoSouboru/diff?rev=1">1</a>
              <form style="display:inline"
                    action="http://www.py.cz/ZpracovaniBinarnihoSouboru/diff">
                <input type="hidden" name="rev" />
                
                <input disabled="1" value=" &gt; "
                       type="submit" accesskey="." />
              </form>
            </td>

            <td align="right">
              <form style="display:inline"
                    action="http://www.py.cz/ZpracovaniBinarnihoSouboru">
                <input type="hidden" name="rev" value="1" />
                <input value="Revert to this version"
                       type="submit" name="revert:method"
                       disabled="disabled" />
              </form>
            </td>

          </tr>
          <tr valign="top">
            <td colspan="3">
              <span>Editor:</span> geon
              <br />
              <span>Time:</span> 2006/02/21 12:38:08 GMT+0
            </td>
          </tr>
          <tr valign="top">
            <td colspan="3">
              <span>Note:</span> <span
    style="font-weight:bold; font-style:italic;"></span>
            </td>
          </tr>
        </table>
        <hr />
        <pre>
<b>changed:</b><span style="color:red;text-decoration:line-through">
-</span><span style="color:green">
Zpracování binárního souboru

 Dotaz z koference:

  Ahoj, potreboval by jsem nacist binarni soubor,  zmenit par  bitu a potom ho zase ulozit.  Da se v Pythonu pracovat primo s binarnimy daty?

 Odpověď:

  První problém spočívá v tom, že soubory musíme otevřít
v binárním režimu. To znamená, že konstruktoru file() nebo 
funkci open() musíme v druhém parametru zadat 'rb' (pro binární
čtení) nebo 'wb' (pro binární zápis).

Druhá část problému je daná tím, že string (pokud není
unicodový) je interpretován jako posloupnost bajtů.
Souborové metody read() a write() pracují s řetězci.
Pokud je soubor otevřen binárně, interpretují je jako
posloupnosti bajtů.

Komplikace &quot;bajt/znak řetězce&quot; spočívá v tom, že 
si číselnou podobu bajtu musíme sami konvertovat 
na znak a zpět.

Poslední část problému spočívá v tom, že string
se nedá modifikovat na místě (při modifikaci se 
vytváří modifikovaná kopie). Proto může být 
NĚKDY výhodnější převést si to na seznam (nebo
použít modul array, pokud by seznam nestačil
vzhledem k efektivnosti). Prvky seznamu můžeme 
měnit a výsledný seznam můžeme spojit do řetězce,
který zapíšeme binárně do výstupního souboru.
Příklad::


 import sys

 def zpracujSoubor(fnameIn, fnameOut):
     fin = file(fnameIn, 'rb')
     lst = list(fin.read())
     fin.close()

     # Cvicne zmenime prvni dva bajty.
     lst[0] = chr(13)
     lst[1] = chr(10)

     fout = file(fnameOut, 'wb')
     fout.write(''.join(lst))
     fout.close()


 def main():
    
     # Pripravime si testovaci binarni soubor.
     fout = file('input.bin', 'wb')
     for n in xrange(256):
         fout.write(chr(n))
     fout.close()

     # Zpracujeme binarni soubor.
     zpracujSoubor('input.bin', 'output.bin')


 if __name__ == '__main__':
     main()

Poslední dva řádky spustí funci main().
Ve funkci main() se vygeneruje testovací
binární soubor input.bin (256 bajtů s kódy
0 až 255) a zavolá se funkce pro modifikaci 
tohoto souboru zpracujSoubor(). Ta binárně 
načte celý obsah vstupního souboru (řetězec) a
převede jej na seznam. Modifikovaný seznam
se spojí do řetězce a zapíše do výstupního
binárního souboru.
</span>
</pre>
        <hr />
        <div><h2>Zpracování binárního souboru</h2>
<h3> Dotaz z koference:</h3>
<p>  Ahoj, potreboval by jsem nacist binarni soubor,  zmenit par  bitu a potom ho zase ulozit.  Da se v Pythonu pracovat primo s binarnimy daty?</p>
<h3> Odpověď:</h3>
<p>  První problém spočívá v tom, že soubory musíme otevřít
v binárním režimu. To znamená, že konstruktoru file() nebo 
funkci open() musíme v druhém parametru zadat <code>rb</code> (pro binární
čtení) nebo <code>wb</code> (pro binární zápis).</p>
<p>Druhá část problému je daná tím, že string (pokud není
unicodový) je interpretován jako posloupnost bajtů.
Souborové metody read() a write() pracují s řetězci.
Pokud je soubor otevřen binárně, interpretují je jako
posloupnosti bajtů.</p>
<p>Komplikace "bajt/znak řetězce" spočívá v tom, že 
si číselnou podobu bajtu musíme sami konvertovat 
na znak a zpět.</p>
<p>Poslední část problému spočívá v tom, že string
se nedá modifikovat na místě (při modifikaci se 
vytváří modifikovaná kopie). Proto může být 
NĚKDY výhodnější převést si to na seznam (nebo
použít modul array, pokud by seznam nestačil
vzhledem k efektivnosti). Prvky seznamu můžeme 
měnit a výsledný seznam můžeme spojit do řetězce,
který zapíšeme binárně do výstupního souboru.
Příklad:</p>

<pre>
 import sys

 def zpracujSoubor(fnameIn, fnameOut):
     fin = file(fnameIn, 'rb')
     lst = list(fin.read())
     fin.close()

     # Cvicne zmenime prvni dva bajty.
     lst[0] = chr(13)
     lst[1] = chr(10)

     fout = file(fnameOut, 'wb')
     fout.write(''.join(lst))
     fout.close()

 def main():

     # Pripravime si testovaci binarni soubor.
     fout = file('input.bin', 'wb')
     for n in xrange(256):
         fout.write(chr(n))
     fout.close()

     # Zpracujeme binarni soubor.
     zpracujSoubor('input.bin', 'output.bin')

 if __name__ == '__main__':
     main()
</pre>
<p>Poslední dva řádky spustí funci main().
Ve funkci main() se vygeneruje testovací
binární soubor input.bin (256 bajtů s kódy
0 až 255) a zavolá se funkce pro modifikaci 
tohoto souboru zpracujSoubor(). Ta binárně 
načte celý obsah vstupního souboru (řetězec) a
převede jej na seznam. Modifikovaný seznam
se spojí do řetězce a zapíše do výstupního
binárního souboru.</p>
<p>
</p>
</div>
      </div>
    </div>
    
  </body>

<!-- Mirrored from www.py.cz/ZpracovaniBinarnihoSouboru/diff by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 20 Mar 2016 21:02:58 GMT -->
</html>

